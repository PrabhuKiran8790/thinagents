import"../chunks/DsnmJJEf.js";import{ah as ua,aM as da,b9 as fa,U as Ui,i as Qe,V as ha,m as ga,ba as ma,p as ne,aT as Dt,u as pa,f as se,l as h,H as k,aR as Se,b as X,c as re,d as J,r as U,aS as kt,b3 as qt,a as ue,s as ee,t as de,e as ve,aX as pt,b8 as Qi,h as et,E as fe,w as Y,b2 as pe,I as va,aV as an,aG as Ji,aU as ln,bb as Zr,G as Ne,bc as we,v as mo,aW as Ce,bd as ya,a0 as po,D as wa}from"../chunks/DR-dxs7j.js";import{g as ba,a as Ze,C as Ur,S as _n,s as ie,b as Ue,c as Ct,f as Le,e as En,i as xa}from"../chunks/BOjmiJiY.js";import{p as W,r as it,i as he,b as Bt,c as Qr,s as dt}from"../chunks/Dq_a_W3Z.js";import{M as _a}from"../chunks/Cb_4A294.js";import"../chunks/DQkgn9hc.js";import{i as Ea}from"../chunks/wTEEwHl0.js";const ka=[];function $i(e,t=!1,n=!1){return en(e,new Map,"",ka,null,n)}function en(e,t,n,r,i=null,s=!1){if(typeof e=="object"&&e!==null){var o=t.get(e);if(o!==void 0)return o;if(e instanceof Map)return new Map(e);if(e instanceof Set)return new Set(e);if(ua(e)){var a=Array(e.length);t.set(e,a),i!==null&&t.set(i,a);for(var c=0;c<e.length;c+=1){var u=e[c];c in e&&(a[c]=en(u,t,n,r,null,s))}return a}if(da(e)===fa){a={},t.set(e,a),i!==null&&t.set(i,a);for(var l in e)a[l]=en(e[l],t,n,r,null,s);return a}if(e instanceof Date)return structuredClone(e);if(typeof e.toJSON=="function"&&!s)return en(e.toJSON(),t,n,r,e)}if(e instanceof EventTarget)return e;try{return structuredClone(e)}catch{return e}}function xe(e,t,n){Ui(()=>{var r=Qe(()=>t(e,n?.())||{});if(n&&r?.update){var i=!1,s={};ha(()=>{var o=n();ga(o),i&&ma(s,o)&&(s=o,r.update(o))}),i=!0}if(r?.destroy)return()=>r.destroy()})}class Jr{#e=new WeakMap;#t;#n;static entries=new WeakMap;constructor(t){this.#n=t}observe(t,n){var r=this.#e.get(t)||new Set;return r.add(n),this.#e.set(t,r),this.#r().observe(t,this.#n),()=>{var i=this.#e.get(t);i.delete(n),i.size===0&&(this.#e.delete(t),this.#t.unobserve(t))}}#r(){return this.#t??(this.#t=new ResizeObserver(t=>{for(var n of t){Jr.entries.set(n.target,n);for(var r of this.#e.get(n.target)||[])r(n)}}))}}var Ca=new Jr({box:"border-box"});function vo(e,t,n){var r=Ca.observe(e,()=>n(e[t]));Ui(()=>(Qe(()=>n(e[t])),r))}var An,yo;function $r(){if(yo)return An;yo=1;var e="\0",t="\0",n="";class r{_isDirected=!0;_isMultigraph=!1;_isCompound=!1;_label;_defaultNodeLabelFn=()=>{};_defaultEdgeLabelFn=()=>{};_nodes={};_in={};_preds={};_out={};_sucs={};_edgeObjs={};_edgeLabels={};_nodeCount=0;_edgeCount=0;_parent;_children;constructor(l){l&&(this._isDirected=Object.hasOwn(l,"directed")?l.directed:!0,this._isMultigraph=Object.hasOwn(l,"multigraph")?l.multigraph:!1,this._isCompound=Object.hasOwn(l,"compound")?l.compound:!1),this._isCompound&&(this._parent={},this._children={},this._children[t]={})}isDirected(){return this._isDirected}isMultigraph(){return this._isMultigraph}isCompound(){return this._isCompound}setGraph(l){return this._label=l,this}graph(){return this._label}setDefaultNodeLabel(l){return this._defaultNodeLabelFn=l,typeof l!="function"&&(this._defaultNodeLabelFn=()=>l),this}nodeCount(){return this._nodeCount}nodes(){return Object.keys(this._nodes)}sources(){var l=this;return this.nodes().filter(d=>Object.keys(l._in[d]).length===0)}sinks(){var l=this;return this.nodes().filter(d=>Object.keys(l._out[d]).length===0)}setNodes(l,d){var f=arguments,g=this;return l.forEach(function(v){f.length>1?g.setNode(v,d):g.setNode(v)}),this}setNode(l,d){return Object.hasOwn(this._nodes,l)?(arguments.length>1&&(this._nodes[l]=d),this):(this._nodes[l]=arguments.length>1?d:this._defaultNodeLabelFn(l),this._isCompound&&(this._parent[l]=t,this._children[l]={},this._children[t][l]=!0),this._in[l]={},this._preds[l]={},this._out[l]={},this._sucs[l]={},++this._nodeCount,this)}node(l){return this._nodes[l]}hasNode(l){return Object.hasOwn(this._nodes,l)}removeNode(l){var d=this;if(Object.hasOwn(this._nodes,l)){var f=g=>d.removeEdge(d._edgeObjs[g]);delete this._nodes[l],this._isCompound&&(this._removeFromParentsChildList(l),delete this._parent[l],this.children(l).forEach(function(g){d.setParent(g)}),delete this._children[l]),Object.keys(this._in[l]).forEach(f),delete this._in[l],delete this._preds[l],Object.keys(this._out[l]).forEach(f),delete this._out[l],delete this._sucs[l],--this._nodeCount}return this}setParent(l,d){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(d===void 0)d=t;else{d+="";for(var f=d;f!==void 0;f=this.parent(f))if(f===l)throw new Error("Setting "+d+" as parent of "+l+" would create a cycle");this.setNode(d)}return this.setNode(l),this._removeFromParentsChildList(l),this._parent[l]=d,this._children[d][l]=!0,this}_removeFromParentsChildList(l){delete this._children[this._parent[l]][l]}parent(l){if(this._isCompound){var d=this._parent[l];if(d!==t)return d}}children(l=t){if(this._isCompound){var d=this._children[l];if(d)return Object.keys(d)}else{if(l===t)return this.nodes();if(this.hasNode(l))return[]}}predecessors(l){var d=this._preds[l];if(d)return Object.keys(d)}successors(l){var d=this._sucs[l];if(d)return Object.keys(d)}neighbors(l){var d=this.predecessors(l);if(d){const g=new Set(d);for(var f of this.successors(l))g.add(f);return Array.from(g.values())}}isLeaf(l){var d;return this.isDirected()?d=this.successors(l):d=this.neighbors(l),d.length===0}filterNodes(l){var d=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});d.setGraph(this.graph());var f=this;Object.entries(this._nodes).forEach(function([b,w]){l(b)&&d.setNode(b,w)}),Object.values(this._edgeObjs).forEach(function(b){d.hasNode(b.v)&&d.hasNode(b.w)&&d.setEdge(b,f.edge(b))});var g={};function v(b){var w=f.parent(b);return w===void 0||d.hasNode(w)?(g[b]=w,w):w in g?g[w]:v(w)}return this._isCompound&&d.nodes().forEach(b=>d.setParent(b,v(b))),d}setDefaultEdgeLabel(l){return this._defaultEdgeLabelFn=l,typeof l!="function"&&(this._defaultEdgeLabelFn=()=>l),this}edgeCount(){return this._edgeCount}edges(){return Object.values(this._edgeObjs)}setPath(l,d){var f=this,g=arguments;return l.reduce(function(v,b){return g.length>1?f.setEdge(v,b,d):f.setEdge(v,b),b}),this}setEdge(){var l,d,f,g,v=!1,b=arguments[0];typeof b=="object"&&b!==null&&"v"in b?(l=b.v,d=b.w,f=b.name,arguments.length===2&&(g=arguments[1],v=!0)):(l=b,d=arguments[1],f=arguments[3],arguments.length>2&&(g=arguments[2],v=!0)),l=""+l,d=""+d,f!==void 0&&(f=""+f);var w=o(this._isDirected,l,d,f);if(Object.hasOwn(this._edgeLabels,w))return v&&(this._edgeLabels[w]=g),this;if(f!==void 0&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(l),this.setNode(d),this._edgeLabels[w]=v?g:this._defaultEdgeLabelFn(l,d,f);var x=a(this._isDirected,l,d,f);return l=x.v,d=x.w,Object.freeze(x),this._edgeObjs[w]=x,i(this._preds[d],l),i(this._sucs[l],d),this._in[d][w]=x,this._out[l][w]=x,this._edgeCount++,this}edge(l,d,f){var g=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,l,d,f);return this._edgeLabels[g]}edgeAsObj(){const l=this.edge(...arguments);return typeof l!="object"?{label:l}:l}hasEdge(l,d,f){var g=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,l,d,f);return Object.hasOwn(this._edgeLabels,g)}removeEdge(l,d,f){var g=arguments.length===1?c(this._isDirected,arguments[0]):o(this._isDirected,l,d,f),v=this._edgeObjs[g];return v&&(l=v.v,d=v.w,delete this._edgeLabels[g],delete this._edgeObjs[g],s(this._preds[d],l),s(this._sucs[l],d),delete this._in[d][g],delete this._out[l][g],this._edgeCount--),this}inEdges(l,d){var f=this._in[l];if(f){var g=Object.values(f);return d?g.filter(v=>v.v===d):g}}outEdges(l,d){var f=this._out[l];if(f){var g=Object.values(f);return d?g.filter(v=>v.w===d):g}}nodeEdges(l,d){var f=this.inEdges(l,d);if(f)return f.concat(this.outEdges(l,d))}}function i(u,l){u[l]?u[l]++:u[l]=1}function s(u,l){--u[l]||delete u[l]}function o(u,l,d,f){var g=""+l,v=""+d;if(!u&&g>v){var b=g;g=v,v=b}return g+n+v+n+(f===void 0?e:f)}function a(u,l,d,f){var g=""+l,v=""+d;if(!u&&g>v){var b=g;g=v,v=b}var w={v:g,w:v};return f&&(w.name=f),w}function c(u,l){return o(u,l.v,l.w,l.name)}return An=r,An}var Rn,wo;function Na(){return wo||(wo=1,Rn="2.2.4"),Rn}var zn,bo;function Sa(){return bo||(bo=1,zn={Graph:$r(),version:Na()}),zn}var Ln,xo;function Pa(){if(xo)return Ln;xo=1;var e=$r();Ln={write:t,read:i};function t(s){var o={options:{directed:s.isDirected(),multigraph:s.isMultigraph(),compound:s.isCompound()},nodes:n(s),edges:r(s)};return s.graph()!==void 0&&(o.value=structuredClone(s.graph())),o}function n(s){return s.nodes().map(function(o){var a=s.node(o),c=s.parent(o),u={v:o};return a!==void 0&&(u.value=a),c!==void 0&&(u.parent=c),u})}function r(s){return s.edges().map(function(o){var a=s.edge(o),c={v:o.v,w:o.w};return o.name!==void 0&&(c.name=o.name),a!==void 0&&(c.value=a),c})}function i(s){var o=new e(s.options).setGraph(s.value);return s.nodes.forEach(function(a){o.setNode(a.v,a.value),a.parent&&o.setParent(a.v,a.parent)}),s.edges.forEach(function(a){o.setEdge({v:a.v,w:a.w,name:a.name},a.value)}),o}return Ln}var Hn,_o;function Oa(){if(_o)return Hn;_o=1,Hn=e;function e(t){var n={},r=[],i;function s(o){Object.hasOwn(n,o)||(n[o]=!0,i.push(o),t.successors(o).forEach(s),t.predecessors(o).forEach(s))}return t.nodes().forEach(function(o){i=[],s(o),i.length&&r.push(i)}),r}return Hn}var Vn,Eo;function es(){if(Eo)return Vn;Eo=1;class e{_arr=[];_keyIndices={};size(){return this._arr.length}keys(){return this._arr.map(function(n){return n.key})}has(n){return Object.hasOwn(this._keyIndices,n)}priority(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority}min(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key}add(n,r){var i=this._keyIndices;if(n=String(n),!Object.hasOwn(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1}removeMin(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key}decrease(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)}_heapify(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))}_decrease(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s}_swap(n,r){var i=this._arr,s=this._keyIndices,o=i[n],a=i[r];i[n]=a,i[r]=o,s[a.key]=n,s[o.key]=r}}return Vn=e,Vn}var qn,ko;function ts(){if(ko)return qn;ko=1;var e=es();qn=n;var t=()=>1;function n(i,s,o,a){return r(i,String(s),o||t,a||function(c){return i.outEdges(c)})}function r(i,s,o,a){var c={},u=new e,l,d,f=function(g){var v=g.v!==l?g.v:g.w,b=c[v],w=o(g),x=d.distance+w;if(w<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+g+" Weight: "+w);x<b.distance&&(b.distance=x,b.predecessor=l,u.decrease(v,x))};for(i.nodes().forEach(function(g){var v=g===s?0:Number.POSITIVE_INFINITY;c[g]={distance:v},u.add(g,v)});u.size()>0&&(l=u.removeMin(),d=c[l],d.distance!==Number.POSITIVE_INFINITY);)a(l).forEach(f);return c}return qn}var Bn,Co;function Ma(){if(Co)return Bn;Co=1;var e=ts();Bn=t;function t(n,r,i){return n.nodes().reduce(function(s,o){return s[o]=e(n,o,r,i),s},{})}return Bn}var Fn,No;function ns(){if(No)return Fn;No=1,Fn=e;function e(t){var n=0,r=[],i={},s=[];function o(a){var c=i[a]={onStack:!0,lowlink:n,index:n++};if(r.push(a),t.successors(a).forEach(function(d){Object.hasOwn(i,d)?i[d].onStack&&(c.lowlink=Math.min(c.lowlink,i[d].index)):(o(d),c.lowlink=Math.min(c.lowlink,i[d].lowlink))}),c.lowlink===c.index){var u=[],l;do l=r.pop(),i[l].onStack=!1,u.push(l);while(a!==l);s.push(u)}}return t.nodes().forEach(function(a){Object.hasOwn(i,a)||o(a)}),s}return Fn}var Kn,So;function Ia(){if(So)return Kn;So=1;var e=ns();Kn=t;function t(n){return e(n).filter(function(r){return r.length>1||r.length===1&&n.hasEdge(r[0],r[0])})}return Kn}var Yn,Po;function Da(){if(Po)return Yn;Po=1,Yn=t;var e=()=>1;function t(r,i,s){return n(r,i||e,s||function(o){return r.outEdges(o)})}function n(r,i,s){var o={},a=r.nodes();return a.forEach(function(c){o[c]={},o[c][c]={distance:0},a.forEach(function(u){c!==u&&(o[c][u]={distance:Number.POSITIVE_INFINITY})}),s(c).forEach(function(u){var l=u.v===c?u.w:u.v,d=i(u);o[c][l]={distance:d,predecessor:c}})}),a.forEach(function(c){var u=o[c];a.forEach(function(l){var d=o[l];a.forEach(function(f){var g=d[c],v=u[f],b=d[f],w=g.distance+v.distance;w<b.distance&&(b.distance=w,b.predecessor=v.predecessor)})})}),o}return Yn}var Gn,Oo;function rs(){if(Oo)return Gn;Oo=1;function e(n){var r={},i={},s=[];function o(a){if(Object.hasOwn(i,a))throw new t;Object.hasOwn(r,a)||(i[a]=!0,r[a]=!0,n.predecessors(a).forEach(o),delete i[a],s.push(a))}if(n.sinks().forEach(o),Object.keys(r).length!==n.nodeCount())throw new t;return s}class t extends Error{constructor(){super(...arguments)}}return Gn=e,e.CycleException=t,Gn}var jn,Mo;function Ta(){if(Mo)return jn;Mo=1;var e=rs();jn=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return jn}var Wn,Io;function os(){if(Io)return Wn;Io=1,Wn=e;function e(i,s,o){Array.isArray(s)||(s=[s]);var a=i.isDirected()?d=>i.successors(d):d=>i.neighbors(d),c=o==="post"?t:n,u=[],l={};return s.forEach(d=>{if(!i.hasNode(d))throw new Error("Graph does not have node: "+d);c(d,a,l,u)}),u}function t(i,s,o,a){for(var c=[[i,!1]];c.length>0;){var u=c.pop();u[1]?a.push(u[0]):Object.hasOwn(o,u[0])||(o[u[0]]=!0,c.push([u[0],!0]),r(s(u[0]),l=>c.push([l,!1])))}}function n(i,s,o,a){for(var c=[i];c.length>0;){var u=c.pop();Object.hasOwn(o,u)||(o[u]=!0,a.push(u),r(s(u),l=>c.push(l)))}}function r(i,s){for(var o=i.length;o--;)s(i[o],o,i);return i}return Wn}var Xn,Do;function Aa(){if(Do)return Xn;Do=1;var e=os();Xn=t;function t(n,r){return e(n,r,"post")}return Xn}var Zn,To;function Ra(){if(To)return Zn;To=1;var e=os();Zn=t;function t(n,r){return e(n,r,"pre")}return Zn}var Un,Ao;function za(){if(Ao)return Un;Ao=1;var e=$r(),t=es();Un=n;function n(r,i){var s=new e,o={},a=new t,c;function u(d){var f=d.v===c?d.w:d.v,g=a.priority(f);if(g!==void 0){var v=i(d);v<g&&(o[f]=c,a.decrease(f,v))}}if(r.nodeCount()===0)return s;r.nodes().forEach(function(d){a.add(d,Number.POSITIVE_INFINITY),s.setNode(d)}),a.decrease(r.nodes()[0],0);for(var l=!1;a.size()>0;){if(c=a.removeMin(),Object.hasOwn(o,c))s.setEdge(c,o[c]);else{if(l)throw new Error("Input graph is not connected: "+r);l=!0}r.nodeEdges(c).forEach(u)}return s}return Un}var Qn,Ro;function La(){return Ro||(Ro=1,Qn={components:Oa(),dijkstra:ts(),dijkstraAll:Ma(),findCycles:Ia(),floydWarshall:Da(),isAcyclic:Ta(),postorder:Aa(),preorder:Ra(),prim:za(),tarjan:ns(),topsort:rs()}),Qn}var Jn,zo;function Ie(){if(zo)return Jn;zo=1;var e=Sa();return Jn={Graph:e.Graph,json:Pa(),alg:La(),version:e.version},Jn}var $n,Lo;function Ha(){if(Lo)return $n;Lo=1;class e{constructor(){let i={};i._next=i._prev=i,this._sentinel=i}dequeue(){let i=this._sentinel,s=i._prev;if(s!==i)return t(s),s}enqueue(i){let s=this._sentinel;i._prev&&i._next&&t(i),i._next=s._next,s._next._prev=i,s._next=i,i._prev=s}toString(){let i=[],s=this._sentinel,o=s._prev;for(;o!==s;)i.push(JSON.stringify(o,n)),o=o._prev;return"["+i.join(", ")+"]"}}function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return $n=e,$n}var er,Ho;function Va(){if(Ho)return er;Ho=1;let e=Ie().Graph,t=Ha();er=r;let n=()=>1;function r(u,l){if(u.nodeCount()<=1)return[];let d=o(u,l||n);return i(d.graph,d.buckets,d.zeroIdx).flatMap(g=>u.outEdges(g.v,g.w))}function i(u,l,d){let f=[],g=l[l.length-1],v=l[0],b;for(;u.nodeCount();){for(;b=v.dequeue();)s(u,l,d,b);for(;b=g.dequeue();)s(u,l,d,b);if(u.nodeCount()){for(let w=l.length-2;w>0;--w)if(b=l[w].dequeue(),b){f=f.concat(s(u,l,d,b,!0));break}}}return f}function s(u,l,d,f,g){let v=g?[]:void 0;return u.inEdges(f.v).forEach(b=>{let w=u.edge(b),x=u.node(b.v);g&&v.push({v:b.v,w:b.w}),x.out-=w,a(l,d,x)}),u.outEdges(f.v).forEach(b=>{let w=u.edge(b),x=b.w,y=u.node(x);y.in-=w,a(l,d,y)}),u.removeNode(f.v),v}function o(u,l){let d=new e,f=0,g=0;u.nodes().forEach(w=>{d.setNode(w,{v:w,in:0,out:0})}),u.edges().forEach(w=>{let x=d.edge(w.v,w.w)||0,y=l(w),N=x+y;d.setEdge(w.v,w.w,N),g=Math.max(g,d.node(w.v).out+=y),f=Math.max(f,d.node(w.w).in+=y)});let v=c(g+f+3).map(()=>new t),b=f+1;return d.nodes().forEach(w=>{a(v,b,d.node(w))}),{graph:d,buckets:v,zeroIdx:b}}function a(u,l,d){d.out?d.in?u[d.out-d.in+l].enqueue(d):u[u.length-1].enqueue(d):u[0].enqueue(d)}function c(u){const l=[];for(let d=0;d<u;d++)l.push(d);return l}return er}var tr,Vo;function me(){if(Vo)return tr;Vo=1;let e=Ie().Graph;tr={addBorderNode:l,addDummyNode:t,applyWithChunking:g,asNonCompoundGraph:r,buildLayerMatrix:a,intersectRect:o,mapValues:P,maxRank:v,normalizeRanks:c,notime:x,partition:b,pick:T,predecessorWeights:s,range:_,removeEmptyRanks:u,simplify:n,successorWeights:i,time:w,uniqueId:N,zipObject:M};function t(E,C,A,z){for(var m=z;E.hasNode(m);)m=N(z);return A.dummy=C,E.setNode(m,A),m}function n(E){let C=new e().setGraph(E.graph());return E.nodes().forEach(A=>C.setNode(A,E.node(A))),E.edges().forEach(A=>{let z=C.edge(A.v,A.w)||{weight:0,minlen:1},m=E.edge(A);C.setEdge(A.v,A.w,{weight:z.weight+m.weight,minlen:Math.max(z.minlen,m.minlen)})}),C}function r(E){let C=new e({multigraph:E.isMultigraph()}).setGraph(E.graph());return E.nodes().forEach(A=>{E.children(A).length||C.setNode(A,E.node(A))}),E.edges().forEach(A=>{C.setEdge(A,E.edge(A))}),C}function i(E){let C=E.nodes().map(A=>{let z={};return E.outEdges(A).forEach(m=>{z[m.w]=(z[m.w]||0)+E.edge(m).weight}),z});return M(E.nodes(),C)}function s(E){let C=E.nodes().map(A=>{let z={};return E.inEdges(A).forEach(m=>{z[m.v]=(z[m.v]||0)+E.edge(m).weight}),z});return M(E.nodes(),C)}function o(E,C){let A=E.x,z=E.y,m=C.x-A,S=C.y-z,p=E.width/2,I=E.height/2;if(!m&&!S)throw new Error("Not possible to find intersection inside of the rectangle");let O,H;return Math.abs(S)*p>Math.abs(m)*I?(S<0&&(I=-I),O=I*m/S,H=I):(m<0&&(p=-p),O=p,H=p*S/m),{x:A+O,y:z+H}}function a(E){let C=_(v(E)+1).map(()=>[]);return E.nodes().forEach(A=>{let z=E.node(A),m=z.rank;m!==void 0&&(C[m][z.order]=A)}),C}function c(E){let C=E.nodes().map(z=>{let m=E.node(z).rank;return m===void 0?Number.MAX_VALUE:m}),A=g(Math.min,C);E.nodes().forEach(z=>{let m=E.node(z);Object.hasOwn(m,"rank")&&(m.rank-=A)})}function u(E){let C=E.nodes().map(p=>E.node(p).rank),A=g(Math.min,C),z=[];E.nodes().forEach(p=>{let I=E.node(p).rank-A;z[I]||(z[I]=[]),z[I].push(p)});let m=0,S=E.graph().nodeRankFactor;Array.from(z).forEach((p,I)=>{p===void 0&&I%S!==0?--m:p!==void 0&&m&&p.forEach(O=>E.node(O).rank+=m)})}function l(E,C,A,z){let m={width:0,height:0};return arguments.length>=4&&(m.rank=A,m.order=z),t(E,"border",m,C)}function d(E,C=f){const A=[];for(let z=0;z<E.length;z+=C){const m=E.slice(z,z+C);A.push(m)}return A}const f=65535;function g(E,C){if(C.length>f){const A=d(C);return E.apply(null,A.map(z=>E.apply(null,z)))}else return E.apply(null,C)}function v(E){const A=E.nodes().map(z=>{let m=E.node(z).rank;return m===void 0?Number.MIN_VALUE:m});return g(Math.max,A)}function b(E,C){let A={lhs:[],rhs:[]};return E.forEach(z=>{C(z)?A.lhs.push(z):A.rhs.push(z)}),A}function w(E,C){let A=Date.now();try{return C()}finally{console.log(E+" time: "+(Date.now()-A)+"ms")}}function x(E,C){return C()}let y=0;function N(E){var C=++y;return E+(""+C)}function _(E,C,A=1){C==null&&(C=E,E=0);let z=S=>S<C;A<0&&(z=S=>C<S);const m=[];for(let S=E;z(S);S+=A)m.push(S);return m}function T(E,C){const A={};for(const z of C)E[z]!==void 0&&(A[z]=E[z]);return A}function P(E,C){let A=C;return typeof C=="string"&&(A=z=>z[C]),Object.entries(E).reduce((z,[m,S])=>(z[m]=A(S,m),z),{})}function M(E,C){return E.reduce((A,z,m)=>(A[z]=C[m],A),{})}return tr}var nr,qo;function qa(){if(qo)return nr;qo=1;let e=Va(),t=me().uniqueId;nr={run:n,undo:i};function n(s){(s.graph().acyclicer==="greedy"?e(s,a(s)):r(s)).forEach(c=>{let u=s.edge(c);s.removeEdge(c),u.forwardName=c.name,u.reversed=!0,s.setEdge(c.w,c.v,u,t("rev"))});function a(c){return u=>c.edge(u).weight}}function r(s){let o=[],a={},c={};function u(l){Object.hasOwn(c,l)||(c[l]=!0,a[l]=!0,s.outEdges(l).forEach(d=>{Object.hasOwn(a,d.w)?o.push(d):u(d.w)}),delete a[l])}return s.nodes().forEach(u),o}function i(s){s.edges().forEach(o=>{let a=s.edge(o);if(a.reversed){s.removeEdge(o);let c=a.forwardName;delete a.reversed,delete a.forwardName,s.setEdge(o.w,o.v,a,c)}})}return nr}var rr,Bo;function Ba(){if(Bo)return rr;Bo=1;let e=me();rr={run:t,undo:r};function t(i){i.graph().dummyChains=[],i.edges().forEach(s=>n(i,s))}function n(i,s){let o=s.v,a=i.node(o).rank,c=s.w,u=i.node(c).rank,l=s.name,d=i.edge(s),f=d.labelRank;if(u===a+1)return;i.removeEdge(s);let g,v,b;for(b=0,++a;a<u;++b,++a)d.points=[],v={width:0,height:0,edgeLabel:d,edgeObj:s,rank:a},g=e.addDummyNode(i,"edge",v,"_d"),a===f&&(v.width=d.width,v.height=d.height,v.dummy="edge-label",v.labelpos=d.labelpos),i.setEdge(o,g,{weight:d.weight},l),b===0&&i.graph().dummyChains.push(g),o=g;i.setEdge(o,c,{weight:d.weight},l)}function r(i){i.graph().dummyChains.forEach(s=>{let o=i.node(s),a=o.edgeLabel,c;for(i.setEdge(o.edgeObj,a);o.dummy;)c=i.successors(s)[0],i.removeNode(s),a.points.push({x:o.x,y:o.y}),o.dummy==="edge-label"&&(a.x=o.x,a.y=o.y,a.width=o.width,a.height=o.height),s=c,o=i.node(s)})}return rr}var or,Fo;function cn(){if(Fo)return or;Fo=1;const{applyWithChunking:e}=me();or={longestPath:t,slack:n};function t(r){var i={};function s(o){var a=r.node(o);if(Object.hasOwn(i,o))return a.rank;i[o]=!0;let c=r.outEdges(o).map(l=>l==null?Number.POSITIVE_INFINITY:s(l.w)-r.edge(l).minlen);var u=e(Math.min,c);return u===Number.POSITIVE_INFINITY&&(u=0),a.rank=u}r.sources().forEach(s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return or}var ir,Ko;function is(){if(Ko)return ir;Ko=1;var e=Ie().Graph,t=cn().slack;ir=n;function n(o){var a=new e({directed:!1}),c=o.nodes()[0],u=o.nodeCount();a.setNode(c,{});for(var l,d;r(a,o)<u;)l=i(a,o),d=a.hasNode(l.v)?t(o,l):-t(o,l),s(a,o,d);return a}function r(o,a){function c(u){a.nodeEdges(u).forEach(l=>{var d=l.v,f=u===d?l.w:d;!o.hasNode(f)&&!t(a,l)&&(o.setNode(f,{}),o.setEdge(u,f,{}),c(f))})}return o.nodes().forEach(c),o.nodeCount()}function i(o,a){return a.edges().reduce((u,l)=>{let d=Number.POSITIVE_INFINITY;return o.hasNode(l.v)!==o.hasNode(l.w)&&(d=t(a,l)),d<u[0]?[d,l]:u},[Number.POSITIVE_INFINITY,null])[1]}function s(o,a,c){o.nodes().forEach(u=>a.node(u).rank+=c)}return ir}var sr,Yo;function Fa(){if(Yo)return sr;Yo=1;var e=is(),t=cn().slack,n=cn().longestPath,r=Ie().alg.preorder,i=Ie().alg.postorder,s=me().simplify;sr=o,o.initLowLimValues=l,o.initCutValues=a,o.calcCutValue=u,o.leaveEdge=f,o.enterEdge=g,o.exchangeEdges=v;function o(y){y=s(y),n(y);var N=e(y);l(N),a(N,y);for(var _,T;_=f(N);)T=g(N,y,_),v(N,y,_,T)}function a(y,N){var _=i(y,y.nodes());_=_.slice(0,_.length-1),_.forEach(T=>c(y,N,T))}function c(y,N,_){var T=y.node(_),P=T.parent;y.edge(_,P).cutvalue=u(y,N,_)}function u(y,N,_){var T=y.node(_),P=T.parent,M=!0,E=N.edge(_,P),C=0;return E||(M=!1,E=N.edge(P,_)),C=E.weight,N.nodeEdges(_).forEach(A=>{var z=A.v===_,m=z?A.w:A.v;if(m!==P){var S=z===M,p=N.edge(A).weight;if(C+=S?p:-p,w(y,_,m)){var I=y.edge(_,m).cutvalue;C+=S?-I:I}}}),C}function l(y,N){arguments.length<2&&(N=y.nodes()[0]),d(y,{},1,N)}function d(y,N,_,T,P){var M=_,E=y.node(T);return N[T]=!0,y.neighbors(T).forEach(C=>{Object.hasOwn(N,C)||(_=d(y,N,_,C,T))}),E.low=M,E.lim=_++,P?E.parent=P:delete E.parent,_}function f(y){return y.edges().find(N=>y.edge(N).cutvalue<0)}function g(y,N,_){var T=_.v,P=_.w;N.hasEdge(T,P)||(T=_.w,P=_.v);var M=y.node(T),E=y.node(P),C=M,A=!1;M.lim>E.lim&&(C=E,A=!0);var z=N.edges().filter(m=>A===x(y,y.node(m.v),C)&&A!==x(y,y.node(m.w),C));return z.reduce((m,S)=>t(N,S)<t(N,m)?S:m)}function v(y,N,_,T){var P=_.v,M=_.w;y.removeEdge(P,M),y.setEdge(T.v,T.w,{}),l(y),a(y,N),b(y,N)}function b(y,N){var _=y.nodes().find(P=>!N.node(P).parent),T=r(y,_);T=T.slice(1),T.forEach(P=>{var M=y.node(P).parent,E=N.edge(P,M),C=!1;E||(E=N.edge(M,P),C=!0),N.node(P).rank=N.node(M).rank+(C?E.minlen:-E.minlen)})}function w(y,N,_){return y.hasEdge(N,_)}function x(y,N,_){return _.low<=N.lim&&N.lim<=_.lim}return sr}var ar,Go;function Ka(){if(Go)return ar;Go=1;var e=cn(),t=e.longestPath,n=is(),r=Fa();ar=i;function i(c){var u=c.graph().ranker;if(u instanceof Function)return u(c);switch(c.graph().ranker){case"network-simplex":a(c);break;case"tight-tree":o(c);break;case"longest-path":s(c);break;case"none":break;default:a(c)}}var s=t;function o(c){t(c),n(c)}function a(c){r(c)}return ar}var lr,jo;function Ya(){if(jo)return lr;jo=1,lr=e;function e(r){let i=n(r);r.graph().dummyChains.forEach(s=>{let o=r.node(s),a=o.edgeObj,c=t(r,i,a.v,a.w),u=c.path,l=c.lca,d=0,f=u[d],g=!0;for(;s!==a.w;){if(o=r.node(s),g){for(;(f=u[d])!==l&&r.node(f).maxRank<o.rank;)d++;f===l&&(g=!1)}if(!g){for(;d<u.length-1&&r.node(f=u[d+1]).minRank<=o.rank;)d++;f=u[d]}r.setParent(s,f),s=r.successors(s)[0]}})}function t(r,i,s,o){let a=[],c=[],u=Math.min(i[s].low,i[o].low),l=Math.max(i[s].lim,i[o].lim),d,f;d=s;do d=r.parent(d),a.push(d);while(d&&(i[d].low>u||l>i[d].lim));for(f=d,d=o;(d=r.parent(d))!==f;)c.push(d);return{path:a.concat(c.reverse()),lca:f}}function n(r){let i={},s=0;function o(a){let c=s;r.children(a).forEach(o),i[a]={low:c,lim:s++}}return r.children().forEach(o),i}return lr}var cr,Wo;function Ga(){if(Wo)return cr;Wo=1;let e=me();cr={run:t,cleanup:s};function t(o){let a=e.addDummyNode(o,"root",{},"_root"),c=r(o),u=Object.values(c),l=e.applyWithChunking(Math.max,u)-1,d=2*l+1;o.graph().nestingRoot=a,o.edges().forEach(g=>o.edge(g).minlen*=d);let f=i(o)+1;o.children().forEach(g=>n(o,a,d,f,l,c,g)),o.graph().nodeRankFactor=d}function n(o,a,c,u,l,d,f){let g=o.children(f);if(!g.length){f!==a&&o.setEdge(a,f,{weight:0,minlen:c});return}let v=e.addBorderNode(o,"_bt"),b=e.addBorderNode(o,"_bb"),w=o.node(f);o.setParent(v,f),w.borderTop=v,o.setParent(b,f),w.borderBottom=b,g.forEach(x=>{n(o,a,c,u,l,d,x);let y=o.node(x),N=y.borderTop?y.borderTop:x,_=y.borderBottom?y.borderBottom:x,T=y.borderTop?u:2*u,P=N!==_?1:l-d[f]+1;o.setEdge(v,N,{weight:T,minlen:P,nestingEdge:!0}),o.setEdge(_,b,{weight:T,minlen:P,nestingEdge:!0})}),o.parent(f)||o.setEdge(a,v,{weight:0,minlen:l+d[f]})}function r(o){var a={};function c(u,l){var d=o.children(u);d&&d.length&&d.forEach(f=>c(f,l+1)),a[u]=l}return o.children().forEach(u=>c(u,1)),a}function i(o){return o.edges().reduce((a,c)=>a+o.edge(c).weight,0)}function s(o){var a=o.graph();o.removeNode(a.nestingRoot),delete a.nestingRoot,o.edges().forEach(c=>{var u=o.edge(c);u.nestingEdge&&o.removeEdge(c)})}return cr}var ur,Xo;function ja(){if(Xo)return ur;Xo=1;let e=me();ur=t;function t(r){function i(s){let o=r.children(s),a=r.node(s);if(o.length&&o.forEach(i),Object.hasOwn(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(let c=a.minRank,u=a.maxRank+1;c<u;++c)n(r,"borderLeft","_bl",s,a,c),n(r,"borderRight","_br",s,a,c)}}r.children().forEach(i)}function n(r,i,s,o,a,c){let u={width:0,height:0,rank:c,borderType:i},l=a[i][c-1],d=e.addDummyNode(r,"border",u,s);a[i][c]=d,r.setParent(d,o),l&&r.setEdge(l,d,{weight:1})}return ur}var dr,Zo;function Wa(){if(Zo)return dr;Zo=1,dr={adjust:e,undo:t};function e(c){let u=c.graph().rankdir.toLowerCase();(u==="lr"||u==="rl")&&n(c)}function t(c){let u=c.graph().rankdir.toLowerCase();(u==="bt"||u==="rl")&&i(c),(u==="lr"||u==="rl")&&(o(c),n(c))}function n(c){c.nodes().forEach(u=>r(c.node(u))),c.edges().forEach(u=>r(c.edge(u)))}function r(c){let u=c.width;c.width=c.height,c.height=u}function i(c){c.nodes().forEach(u=>s(c.node(u))),c.edges().forEach(u=>{let l=c.edge(u);l.points.forEach(s),Object.hasOwn(l,"y")&&s(l)})}function s(c){c.y=-c.y}function o(c){c.nodes().forEach(u=>a(c.node(u))),c.edges().forEach(u=>{let l=c.edge(u);l.points.forEach(a),Object.hasOwn(l,"x")&&a(l)})}function a(c){let u=c.x;c.x=c.y,c.y=u}return dr}var fr,Uo;function Xa(){if(Uo)return fr;Uo=1;let e=me();fr=t;function t(n){let r={},i=n.nodes().filter(l=>!n.children(l).length),s=i.map(l=>n.node(l).rank),o=e.applyWithChunking(Math.max,s),a=e.range(o+1).map(()=>[]);function c(l){if(r[l])return;r[l]=!0;let d=n.node(l);a[d.rank].push(l),n.successors(l).forEach(c)}return i.sort((l,d)=>n.node(l).rank-n.node(d).rank).forEach(c),a}return fr}var hr,Qo;function Za(){if(Qo)return hr;Qo=1;let e=me().zipObject;hr=t;function t(r,i){let s=0;for(let o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){let o=e(s,s.map((f,g)=>g)),a=i.flatMap(f=>r.outEdges(f).map(g=>({pos:o[g.w],weight:r.edge(g).weight})).sort((g,v)=>g.pos-v.pos)),c=1;for(;c<s.length;)c<<=1;let u=2*c-1;c-=1;let l=new Array(u).fill(0),d=0;return a.forEach(f=>{let g=f.pos+c;l[g]+=f.weight;let v=0;for(;g>0;)g%2&&(v+=l[g+1]),g=g-1>>1,l[g]+=f.weight;d+=f.weight*v}),d}return hr}var gr,Jo;function Ua(){if(Jo)return gr;Jo=1,gr=e;function e(t,n=[]){return n.map(r=>{let i=t.inEdges(r);if(i.length){let s=i.reduce((o,a)=>{let c=t.edge(a),u=t.node(a.v);return{sum:o.sum+c.weight*u.order,weight:o.weight+c.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}return gr}var mr,$o;function Qa(){if($o)return mr;$o=1;let e=me();mr=t;function t(i,s){let o={};i.forEach((c,u)=>{let l=o[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:u};c.barycenter!==void 0&&(l.barycenter=c.barycenter,l.weight=c.weight)}),s.edges().forEach(c=>{let u=o[c.v],l=o[c.w];u!==void 0&&l!==void 0&&(l.indegree++,u.out.push(o[c.w]))});let a=Object.values(o).filter(c=>!c.indegree);return n(a)}function n(i){let s=[];function o(c){return u=>{u.merged||(u.barycenter===void 0||c.barycenter===void 0||u.barycenter>=c.barycenter)&&r(c,u)}}function a(c){return u=>{u.in.push(c),--u.indegree===0&&i.push(u)}}for(;i.length;){let c=i.pop();s.push(c),c.in.reverse().forEach(o(c)),c.out.forEach(a(c))}return s.filter(c=>!c.merged).map(c=>e.pick(c,["vs","i","barycenter","weight"]))}function r(i,s){let o=0,a=0;i.weight&&(o+=i.barycenter*i.weight,a+=i.weight),s.weight&&(o+=s.barycenter*s.weight,a+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/a,i.weight=a,i.i=Math.min(s.i,i.i),s.merged=!0}return mr}var pr,ei;function Ja(){if(ei)return pr;ei=1;let e=me();pr=t;function t(i,s){let o=e.partition(i,v=>Object.hasOwn(v,"barycenter")),a=o.lhs,c=o.rhs.sort((v,b)=>b.i-v.i),u=[],l=0,d=0,f=0;a.sort(r(!!s)),f=n(u,c,f),a.forEach(v=>{f+=v.vs.length,u.push(v.vs),l+=v.barycenter*v.weight,d+=v.weight,f=n(u,c,f)});let g={vs:u.flat(!0)};return d&&(g.barycenter=l/d,g.weight=d),g}function n(i,s,o){let a;for(;s.length&&(a=s[s.length-1]).i<=o;)s.pop(),i.push(a.vs),o++;return o}function r(i){return(s,o)=>s.barycenter<o.barycenter?-1:s.barycenter>o.barycenter?1:i?o.i-s.i:s.i-o.i}return pr}var vr,ti;function $a(){if(ti)return vr;ti=1;let e=Ua(),t=Qa(),n=Ja();vr=r;function r(o,a,c,u){let l=o.children(a),d=o.node(a),f=d?d.borderLeft:void 0,g=d?d.borderRight:void 0,v={};f&&(l=l.filter(y=>y!==f&&y!==g));let b=e(o,l);b.forEach(y=>{if(o.children(y.v).length){let N=r(o,y.v,c,u);v[y.v]=N,Object.hasOwn(N,"barycenter")&&s(y,N)}});let w=t(b,c);i(w,v);let x=n(w,u);if(f&&(x.vs=[f,x.vs,g].flat(!0),o.predecessors(f).length)){let y=o.node(o.predecessors(f)[0]),N=o.node(o.predecessors(g)[0]);Object.hasOwn(x,"barycenter")||(x.barycenter=0,x.weight=0),x.barycenter=(x.barycenter*x.weight+y.order+N.order)/(x.weight+2),x.weight+=2}return x}function i(o,a){o.forEach(c=>{c.vs=c.vs.flatMap(u=>a[u]?a[u].vs:u)})}function s(o,a){o.barycenter!==void 0?(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight):(o.barycenter=a.barycenter,o.weight=a.weight)}return vr}var yr,ni;function el(){if(ni)return yr;ni=1;let e=Ie().Graph,t=me();yr=n;function n(i,s,o){let a=r(i),c=new e({compound:!0}).setGraph({root:a}).setDefaultNodeLabel(u=>i.node(u));return i.nodes().forEach(u=>{let l=i.node(u),d=i.parent(u);(l.rank===s||l.minRank<=s&&s<=l.maxRank)&&(c.setNode(u),c.setParent(u,d||a),i[o](u).forEach(f=>{let g=f.v===u?f.w:f.v,v=c.edge(g,u),b=v!==void 0?v.weight:0;c.setEdge(g,u,{weight:i.edge(f).weight+b})}),Object.hasOwn(l,"minRank")&&c.setNode(u,{borderLeft:l.borderLeft[s],borderRight:l.borderRight[s]}))}),c}function r(i){for(var s;i.hasNode(s=t.uniqueId("_root")););return s}return yr}var wr,ri;function tl(){if(ri)return wr;ri=1,wr=e;function e(t,n,r){let i={},s;r.forEach(o=>{let a=t.parent(o),c,u;for(;a;){if(c=t.parent(a),c?(u=i[c],i[c]=a):(u=s,s=a),u&&u!==a){n.setEdge(u,a);return}a=c}})}return wr}var br,oi;function nl(){if(oi)return br;oi=1;let e=Xa(),t=Za(),n=$a(),r=el(),i=tl(),s=Ie().Graph,o=me();br=a;function a(d,f){if(f&&typeof f.customOrder=="function"){f.customOrder(d,a);return}let g=o.maxRank(d),v=c(d,o.range(1,g+1),"inEdges"),b=c(d,o.range(g-1,-1,-1),"outEdges"),w=e(d);if(l(d,w),f&&f.disableOptimalOrderHeuristic)return;let x=Number.POSITIVE_INFINITY,y;for(let N=0,_=0;_<4;++N,++_){u(N%2?v:b,N%4>=2),w=o.buildLayerMatrix(d);let T=t(d,w);T<x&&(_=0,y=Object.assign({},w),x=T)}l(d,y)}function c(d,f,g){return f.map(function(v){return r(d,v,g)})}function u(d,f){let g=new s;d.forEach(function(v){let b=v.graph().root,w=n(v,b,g,f);w.vs.forEach((x,y)=>v.node(x).order=y),i(v,g,w.vs)})}function l(d,f){Object.values(f).forEach(g=>g.forEach((v,b)=>d.node(v).order=b))}return br}var xr,ii;function rl(){if(ii)return xr;ii=1;let e=Ie().Graph,t=me();xr={positionX:g,findType1Conflicts:n,findType2Conflicts:r,addConflict:s,hasConflict:o,verticalAlignment:a,horizontalCompaction:c,alignCoordinates:d,findSmallestWidthAlignment:l,balance:f};function n(w,x){let y={};function N(_,T){let P=0,M=0,E=_.length,C=T[T.length-1];return T.forEach((A,z)=>{let m=i(w,A),S=m?w.node(m).order:E;(m||A===C)&&(T.slice(M,z+1).forEach(p=>{w.predecessors(p).forEach(I=>{let O=w.node(I),H=O.order;(H<P||S<H)&&!(O.dummy&&w.node(p).dummy)&&s(y,I,p)})}),M=z+1,P=S)}),T}return x.length&&x.reduce(N),y}function r(w,x){let y={};function N(T,P,M,E,C){let A;t.range(P,M).forEach(z=>{A=T[z],w.node(A).dummy&&w.predecessors(A).forEach(m=>{let S=w.node(m);S.dummy&&(S.order<E||S.order>C)&&s(y,m,A)})})}function _(T,P){let M=-1,E,C=0;return P.forEach((A,z)=>{if(w.node(A).dummy==="border"){let m=w.predecessors(A);m.length&&(E=w.node(m[0]).order,N(P,C,z,M,E),C=z,M=E)}N(P,C,P.length,E,T.length)}),P}return x.length&&x.reduce(_),y}function i(w,x){if(w.node(x).dummy)return w.predecessors(x).find(y=>w.node(y).dummy)}function s(w,x,y){if(x>y){let _=x;x=y,y=_}let N=w[x];N||(w[x]=N={}),N[y]=!0}function o(w,x,y){if(x>y){let N=x;x=y,y=N}return!!w[x]&&Object.hasOwn(w[x],y)}function a(w,x,y,N){let _={},T={},P={};return x.forEach(M=>{M.forEach((E,C)=>{_[E]=E,T[E]=E,P[E]=C})}),x.forEach(M=>{let E=-1;M.forEach(C=>{let A=N(C);if(A.length){A=A.sort((m,S)=>P[m]-P[S]);let z=(A.length-1)/2;for(let m=Math.floor(z),S=Math.ceil(z);m<=S;++m){let p=A[m];T[C]===C&&E<P[p]&&!o(y,C,p)&&(T[p]=C,T[C]=_[C]=_[p],E=P[p])}}})}),{root:_,align:T}}function c(w,x,y,N,_){let T={},P=u(w,x,y,_),M=_?"borderLeft":"borderRight";function E(z,m){let S=P.nodes(),p=S.pop(),I={};for(;p;)I[p]?z(p):(I[p]=!0,S.push(p),S=S.concat(m(p))),p=S.pop()}function C(z){T[z]=P.inEdges(z).reduce((m,S)=>Math.max(m,T[S.v]+P.edge(S)),0)}function A(z){let m=P.outEdges(z).reduce((p,I)=>Math.min(p,T[I.w]-P.edge(I)),Number.POSITIVE_INFINITY),S=w.node(z);m!==Number.POSITIVE_INFINITY&&S.borderType!==M&&(T[z]=Math.max(T[z],m))}return E(C,P.predecessors.bind(P)),E(A,P.successors.bind(P)),Object.keys(N).forEach(z=>T[z]=T[y[z]]),T}function u(w,x,y,N){let _=new e,T=w.graph(),P=v(T.nodesep,T.edgesep,N);return x.forEach(M=>{let E;M.forEach(C=>{let A=y[C];if(_.setNode(A),E){var z=y[E],m=_.edge(z,A);_.setEdge(z,A,Math.max(P(w,C,E),m||0))}E=C})}),_}function l(w,x){return Object.values(x).reduce((y,N)=>{let _=Number.NEGATIVE_INFINITY,T=Number.POSITIVE_INFINITY;Object.entries(N).forEach(([M,E])=>{let C=b(w,M)/2;_=Math.max(E+C,_),T=Math.min(E-C,T)});const P=_-T;return P<y[0]&&(y=[P,N]),y},[Number.POSITIVE_INFINITY,null])[1]}function d(w,x){let y=Object.values(x),N=t.applyWithChunking(Math.min,y),_=t.applyWithChunking(Math.max,y);["u","d"].forEach(T=>{["l","r"].forEach(P=>{let M=T+P,E=w[M];if(E===x)return;let C=Object.values(E),A=N-t.applyWithChunking(Math.min,C);P!=="l"&&(A=_-t.applyWithChunking(Math.max,C)),A&&(w[M]=t.mapValues(E,z=>z+A))})})}function f(w,x){return t.mapValues(w.ul,(y,N)=>{if(x)return w[x.toLowerCase()][N];{let _=Object.values(w).map(T=>T[N]).sort((T,P)=>T-P);return(_[1]+_[2])/2}})}function g(w){let x=t.buildLayerMatrix(w),y=Object.assign(n(w,x),r(w,x)),N={},_;["u","d"].forEach(P=>{_=P==="u"?x:Object.values(x).reverse(),["l","r"].forEach(M=>{M==="r"&&(_=_.map(z=>Object.values(z).reverse()));let E=(P==="u"?w.predecessors:w.successors).bind(w),C=a(w,_,y,E),A=c(w,_,C.root,C.align,M==="r");M==="r"&&(A=t.mapValues(A,z=>-z)),N[P+M]=A})});let T=l(w,N);return d(N,T),f(N,w.graph().align)}function v(w,x,y){return(N,_,T)=>{let P=N.node(_),M=N.node(T),E=0,C;if(E+=P.width/2,Object.hasOwn(P,"labelpos"))switch(P.labelpos.toLowerCase()){case"l":C=-P.width/2;break;case"r":C=P.width/2;break}if(C&&(E+=y?C:-C),C=0,E+=(P.dummy?x:w)/2,E+=(M.dummy?x:w)/2,E+=M.width/2,Object.hasOwn(M,"labelpos"))switch(M.labelpos.toLowerCase()){case"l":C=M.width/2;break;case"r":C=-M.width/2;break}return C&&(E+=y?C:-C),C=0,E}}function b(w,x){return w.node(x).width}return xr}var _r,si;function ol(){if(si)return _r;si=1;let e=me(),t=rl().positionX;_r=n;function n(i){i=e.asNonCompoundGraph(i),r(i),Object.entries(t(i)).forEach(([s,o])=>i.node(s).x=o)}function r(i){let s=e.buildLayerMatrix(i),o=i.graph().ranksep,a=0;s.forEach(c=>{const u=c.reduce((l,d)=>{const f=i.node(d).height;return l>f?l:f},0);c.forEach(l=>i.node(l).y=a+u/2),a+=u+o})}return _r}var Er,ai;function il(){if(ai)return Er;ai=1;let e=qa(),t=Ba(),n=Ka(),r=me().normalizeRanks,i=Ya(),s=me().removeEmptyRanks,o=Ga(),a=ja(),c=Wa(),u=nl(),l=ol(),d=me(),f=Ie().Graph;Er=g;function g(D,R){let L=R&&R.debugTiming?d.time:d.notime;L("layout",()=>{let V=L("  buildLayoutGraph",()=>E(D));L("  runLayout",()=>v(V,L,R)),L("  updateInputGraph",()=>b(D,V))})}function v(D,R,L){R("    makeSpaceForEdgeLabels",()=>C(D)),R("    removeSelfEdges",()=>B(D)),R("    acyclic",()=>e.run(D)),R("    nestingGraph.run",()=>o.run(D)),R("    rank",()=>n(d.asNonCompoundGraph(D))),R("    injectEdgeLabelProxies",()=>A(D)),R("    removeEmptyRanks",()=>s(D)),R("    nestingGraph.cleanup",()=>o.cleanup(D)),R("    normalizeRanks",()=>r(D)),R("    assignRankMinMax",()=>z(D)),R("    removeEdgeLabelProxies",()=>m(D)),R("    normalize.run",()=>t.run(D)),R("    parentDummyChains",()=>i(D)),R("    addBorderSegments",()=>a(D)),R("    order",()=>u(D,L)),R("    insertSelfEdges",()=>q(D)),R("    adjustCoordinateSystem",()=>c.adjust(D)),R("    position",()=>l(D)),R("    positionSelfEdges",()=>F(D)),R("    removeBorderNodes",()=>H(D)),R("    normalize.undo",()=>t.undo(D)),R("    fixupEdgeLabelCoords",()=>I(D)),R("    undoCoordinateSystem",()=>c.undo(D)),R("    translateGraph",()=>S(D)),R("    assignNodeIntersects",()=>p(D)),R("    reversePoints",()=>O(D)),R("    acyclic.undo",()=>e.undo(D))}function b(D,R){D.nodes().forEach(L=>{let V=D.node(L),K=R.node(L);V&&(V.x=K.x,V.y=K.y,V.rank=K.rank,R.children(L).length&&(V.width=K.width,V.height=K.height))}),D.edges().forEach(L=>{let V=D.edge(L),K=R.edge(L);V.points=K.points,Object.hasOwn(K,"x")&&(V.x=K.x,V.y=K.y)}),D.graph().width=R.graph().width,D.graph().height=R.graph().height}let w=["nodesep","edgesep","ranksep","marginx","marginy"],x={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},y=["acyclicer","ranker","rankdir","align"],N=["width","height","rank"],_={width:0,height:0},T=["minlen","weight","width","height","labeloffset"],P={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},M=["labelpos"];function E(D){let R=new f({multigraph:!0,compound:!0}),L=Z(D.graph());return R.setGraph(Object.assign({},x,G(L,w),d.pick(L,y))),D.nodes().forEach(V=>{let K=Z(D.node(V));const j=G(K,N);Object.keys(_).forEach(Q=>{j[Q]===void 0&&(j[Q]=_[Q])}),R.setNode(V,j),R.setParent(V,D.parent(V))}),D.edges().forEach(V=>{let K=Z(D.edge(V));R.setEdge(V,Object.assign({},P,G(K,T),d.pick(K,M)))}),R}function C(D){let R=D.graph();R.ranksep/=2,D.edges().forEach(L=>{let V=D.edge(L);V.minlen*=2,V.labelpos.toLowerCase()!=="c"&&(R.rankdir==="TB"||R.rankdir==="BT"?V.width+=V.labeloffset:V.height+=V.labeloffset)})}function A(D){D.edges().forEach(R=>{let L=D.edge(R);if(L.width&&L.height){let V=D.node(R.v),j={rank:(D.node(R.w).rank-V.rank)/2+V.rank,e:R};d.addDummyNode(D,"edge-proxy",j,"_ep")}})}function z(D){let R=0;D.nodes().forEach(L=>{let V=D.node(L);V.borderTop&&(V.minRank=D.node(V.borderTop).rank,V.maxRank=D.node(V.borderBottom).rank,R=Math.max(R,V.maxRank))}),D.graph().maxRank=R}function m(D){D.nodes().forEach(R=>{let L=D.node(R);L.dummy==="edge-proxy"&&(D.edge(L.e).labelRank=L.rank,D.removeNode(R))})}function S(D){let R=Number.POSITIVE_INFINITY,L=0,V=Number.POSITIVE_INFINITY,K=0,j=D.graph(),Q=j.marginx||0,le=j.marginy||0;function ae(oe){let te=oe.x,ge=oe.y,qe=oe.width,Ge=oe.height;R=Math.min(R,te-qe/2),L=Math.max(L,te+qe/2),V=Math.min(V,ge-Ge/2),K=Math.max(K,ge+Ge/2)}D.nodes().forEach(oe=>ae(D.node(oe))),D.edges().forEach(oe=>{let te=D.edge(oe);Object.hasOwn(te,"x")&&ae(te)}),R-=Q,V-=le,D.nodes().forEach(oe=>{let te=D.node(oe);te.x-=R,te.y-=V}),D.edges().forEach(oe=>{let te=D.edge(oe);te.points.forEach(ge=>{ge.x-=R,ge.y-=V}),Object.hasOwn(te,"x")&&(te.x-=R),Object.hasOwn(te,"y")&&(te.y-=V)}),j.width=L-R+Q,j.height=K-V+le}function p(D){D.edges().forEach(R=>{let L=D.edge(R),V=D.node(R.v),K=D.node(R.w),j,Q;L.points?(j=L.points[0],Q=L.points[L.points.length-1]):(L.points=[],j=K,Q=V),L.points.unshift(d.intersectRect(V,j)),L.points.push(d.intersectRect(K,Q))})}function I(D){D.edges().forEach(R=>{let L=D.edge(R);if(Object.hasOwn(L,"x"))switch((L.labelpos==="l"||L.labelpos==="r")&&(L.width-=L.labeloffset),L.labelpos){case"l":L.x-=L.width/2+L.labeloffset;break;case"r":L.x+=L.width/2+L.labeloffset;break}})}function O(D){D.edges().forEach(R=>{let L=D.edge(R);L.reversed&&L.points.reverse()})}function H(D){D.nodes().forEach(R=>{if(D.children(R).length){let L=D.node(R),V=D.node(L.borderTop),K=D.node(L.borderBottom),j=D.node(L.borderLeft[L.borderLeft.length-1]),Q=D.node(L.borderRight[L.borderRight.length-1]);L.width=Math.abs(Q.x-j.x),L.height=Math.abs(K.y-V.y),L.x=j.x+L.width/2,L.y=V.y+L.height/2}}),D.nodes().forEach(R=>{D.node(R).dummy==="border"&&D.removeNode(R)})}function B(D){D.edges().forEach(R=>{if(R.v===R.w){var L=D.node(R.v);L.selfEdges||(L.selfEdges=[]),L.selfEdges.push({e:R,label:D.edge(R)}),D.removeEdge(R)}})}function q(D){var R=d.buildLayerMatrix(D);R.forEach(L=>{var V=0;L.forEach((K,j)=>{var Q=D.node(K);Q.order=j+V,(Q.selfEdges||[]).forEach(le=>{d.addDummyNode(D,"selfedge",{width:le.label.width,height:le.label.height,rank:Q.rank,order:j+ ++V,e:le.e,label:le.label},"_se")}),delete Q.selfEdges})})}function F(D){D.nodes().forEach(R=>{var L=D.node(R);if(L.dummy==="selfedge"){var V=D.node(L.e.v),K=V.x+V.width/2,j=V.y,Q=L.x-K,le=V.height/2;D.setEdge(L.e,L.label),D.removeNode(R),L.label.points=[{x:K+2*Q/3,y:j-le},{x:K+5*Q/6,y:j-le},{x:K+Q,y:j},{x:K+5*Q/6,y:j+le},{x:K+2*Q/3,y:j+le}],L.label.x=L.x,L.label.y=L.y}})}function G(D,R){return d.mapValues(d.pick(D,R),Number)}function Z(D){var R={};return D&&Object.entries(D).forEach(([L,V])=>{typeof L=="string"&&(L=L.toLowerCase()),R[L]=V}),R}return Er}var kr,li;function sl(){if(li)return kr;li=1;let e=me(),t=Ie().Graph;kr={debugOrdering:n};function n(r){let i=e.buildLayerMatrix(r),s=new t({compound:!0,multigraph:!0}).setGraph({});return r.nodes().forEach(o=>{s.setNode(o,{label:o}),s.setParent(o,"layer"+r.node(o).rank)}),r.edges().forEach(o=>s.setEdge(o.v,o.w,{},o.name)),i.forEach((o,a)=>{let c="layer"+a;s.setNode(c,{rank:"same"}),o.reduce((u,l)=>(s.setEdge(u,l,{style:"invis"}),l))}),s}return kr}var Cr,ci;function al(){return ci||(ci=1,Cr="1.1.5"),Cr}var Nr,ui;function ll(){return ui||(ui=1,Nr={graphlib:Ie(),layout:il(),debug:sl(),util:{time:me().time,notime:me().notime},version:al()}),Nr}var cl=ll();const di=ba(cl);var ul={value:()=>{}};function kn(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new tn(n)}function tn(e){this._=e}function dl(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}tn.prototype=kn.prototype={constructor:tn,on:function(e,t){var n=this._,r=dl(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=fl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=fi(n[i],e.name,t);else if(t==null)for(i in n)n[i]=fi(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new tn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function fl(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function fi(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ul,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var zr="http://www.w3.org/1999/xhtml";const hi={svg:"http://www.w3.org/2000/svg",xhtml:zr,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Cn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),hi.hasOwnProperty(t)?{space:hi[t],local:e}:e}function hl(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===zr&&t.documentElement.namespaceURI===zr?t.createElement(e):t.createElementNS(n,e)}}function gl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ss(e){var t=Cn(e);return(t.local?gl:hl)(t)}function ml(){}function eo(e){return e==null?ml:function(){return this.querySelector(e)}}function pl(e){typeof e!="function"&&(e=eo(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),c,u,l=0;l<o;++l)(c=s[l])&&(u=e.call(c,c.__data__,l,s))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ke(r,this._parents)}function vl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function yl(){return[]}function as(e){return e==null?yl:function(){return this.querySelectorAll(e)}}function wl(e){return function(){return vl(e.apply(this,arguments))}}function bl(e){typeof e=="function"?e=wl(e):e=as(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&(r.push(e.call(c,c.__data__,u,o)),i.push(c));return new ke(r,i)}function ls(e){return function(){return this.matches(e)}}function cs(e){return function(t){return t.matches(e)}}var xl=Array.prototype.find;function _l(e){return function(){return xl.call(this.children,e)}}function El(){return this.firstElementChild}function kl(e){return this.select(e==null?El:_l(typeof e=="function"?e:cs(e)))}var Cl=Array.prototype.filter;function Nl(){return Array.from(this.children)}function Sl(e){return function(){return Cl.call(this.children,e)}}function Pl(e){return this.selectAll(e==null?Nl:Sl(typeof e=="function"?e:cs(e)))}function Ol(e){typeof e!="function"&&(e=ls(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new ke(r,this._parents)}function us(e){return new Array(e.length)}function Ml(){return new ke(this._enter||this._groups.map(us),this._parents)}function un(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}un.prototype={constructor:un,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Il(e){return function(){return e}}function Dl(e,t,n,r,i,s){for(var o=0,a,c=t.length,u=s.length;o<u;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new un(e,s[o]);for(;o<c;++o)(a=t[o])&&(i[o]=a)}function Tl(e,t,n,r,i,s,o){var a,c,u=new Map,l=t.length,d=s.length,f=new Array(l),g;for(a=0;a<l;++a)(c=t[a])&&(f[a]=g=o.call(c,c.__data__,a,t)+"",u.has(g)?i[a]=c:u.set(g,c));for(a=0;a<d;++a)g=o.call(e,s[a],a,s)+"",(c=u.get(g))?(r[a]=c,c.__data__=s[a],u.delete(g)):n[a]=new un(e,s[a]);for(a=0;a<l;++a)(c=t[a])&&u.get(f[a])===c&&(i[a]=c)}function Al(e){return e.__data__}function Rl(e,t){if(!arguments.length)return Array.from(this,Al);var n=t?Tl:Dl,r=this._parents,i=this._groups;typeof e!="function"&&(e=Il(e));for(var s=i.length,o=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var l=r[u],d=i[u],f=d.length,g=zl(e.call(l,l&&l.__data__,u,r)),v=g.length,b=a[u]=new Array(v),w=o[u]=new Array(v),x=c[u]=new Array(f);n(l,d,b,w,x,g,t);for(var y=0,N=0,_,T;y<v;++y)if(_=b[y]){for(y>=N&&(N=y+1);!(T=w[N])&&++N<v;);_._next=T||null}}return o=new ke(o,r),o._enter=a,o._exit=c,o}function zl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ll(){return new ke(this._exit||this._groups.map(us),this._parents)}function Hl(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Vl(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),c=0;c<o;++c)for(var u=n[c],l=r[c],d=u.length,f=a[c]=new Array(d),g,v=0;v<d;++v)(g=u[v]||l[v])&&(f[v]=g);for(;c<i;++c)a[c]=n[c];return new ke(a,this._parents)}function ql(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Bl(e){e||(e=Fl);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,c=i[s]=new Array(a),u,l=0;l<a;++l)(u=o[l])&&(c[l]=u);c.sort(t)}return new ke(i,this._parents).order()}function Fl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Kl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Yl(){return Array.from(this)}function Gl(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function jl(){let e=0;for(const t of this)++e;return e}function Wl(){return!this.node()}function Xl(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function Zl(e){return function(){this.removeAttribute(e)}}function Ul(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ql(e,t){return function(){this.setAttribute(e,t)}}function Jl(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function $l(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ec(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function tc(e,t){var n=Cn(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Ul:Zl:typeof t=="function"?n.local?ec:$l:n.local?Jl:Ql)(n,t))}function ds(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function nc(e){return function(){this.style.removeProperty(e)}}function rc(e,t,n){return function(){this.style.setProperty(e,t,n)}}function oc(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function ic(e,t,n){return arguments.length>1?this.each((t==null?nc:typeof t=="function"?oc:rc)(e,t,n??"")):vt(this.node(),e)}function vt(e,t){return e.style.getPropertyValue(t)||ds(e).getComputedStyle(e,null).getPropertyValue(t)}function sc(e){return function(){delete this[e]}}function ac(e,t){return function(){this[e]=t}}function lc(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function cc(e,t){return arguments.length>1?this.each((t==null?sc:typeof t=="function"?lc:ac)(e,t)):this.node()[e]}function fs(e){return e.trim().split(/^|\s+/)}function to(e){return e.classList||new hs(e)}function hs(e){this._node=e,this._names=fs(e.getAttribute("class")||"")}hs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function gs(e,t){for(var n=to(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ms(e,t){for(var n=to(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uc(e){return function(){gs(this,e)}}function dc(e){return function(){ms(this,e)}}function fc(e,t){return function(){(t.apply(this,arguments)?gs:ms)(this,e)}}function hc(e,t){var n=fs(e+"");if(arguments.length<2){for(var r=to(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?fc:t?uc:dc)(n,t))}function gc(){this.textContent=""}function mc(e){return function(){this.textContent=e}}function pc(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function vc(e){return arguments.length?this.each(e==null?gc:(typeof e=="function"?pc:mc)(e)):this.node().textContent}function yc(){this.innerHTML=""}function wc(e){return function(){this.innerHTML=e}}function bc(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function xc(e){return arguments.length?this.each(e==null?yc:(typeof e=="function"?bc:wc)(e)):this.node().innerHTML}function _c(){this.nextSibling&&this.parentNode.appendChild(this)}function Ec(){return this.each(_c)}function kc(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Cc(){return this.each(kc)}function Nc(e){var t=typeof e=="function"?e:ss(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Sc(){return null}function Pc(e,t){var n=typeof e=="function"?e:ss(e),r=t==null?Sc:typeof t=="function"?t:eo(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Oc(){var e=this.parentNode;e&&e.removeChild(this)}function Mc(){return this.each(Oc)}function Ic(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Dc(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tc(e){return this.select(e?Dc:Ic)}function Ac(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rc(e){return function(t){e.call(this,t,this.__data__)}}function zc(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Lc(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Hc(e,t,n){return function(){var r=this.__on,i,s=Rc(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Vc(e,t,n){var r=zc(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(i=0,l=a[c];i<s;++i)if((o=r[i]).type===l.type&&o.name===l.name)return l.value}return}for(a=t?Hc:Lc,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function ps(e,t,n){var r=ds(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function qc(e,t){return function(){return ps(this,e,t)}}function Bc(e,t){return function(){return ps(this,e,t.apply(this,arguments))}}function Fc(e,t){return this.each((typeof t=="function"?Bc:qc)(e,t))}function*Kc(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var vs=[null];function ke(e,t){this._groups=e,this._parents=t}function Ft(){return new ke([[document.documentElement]],vs)}function Yc(){return this}ke.prototype=Ft.prototype={constructor:ke,select:pl,selectAll:bl,selectChild:kl,selectChildren:Pl,filter:Ol,data:Rl,enter:Ml,exit:Ll,join:Hl,merge:Vl,selection:Yc,order:ql,sort:Bl,call:Kl,nodes:Yl,node:Gl,size:jl,empty:Wl,each:Xl,attr:tc,style:ic,property:cc,classed:hc,text:vc,html:xc,raise:Ec,lower:Cc,append:Nc,insert:Pc,remove:Mc,clone:Tc,datum:Ac,on:Vc,dispatch:Fc,[Symbol.iterator]:Kc};function Pe(e){return typeof e=="string"?new ke([[document.querySelector(e)]],[document.documentElement]):new ke([[e]],vs)}function Gc(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ae(e,t){if(e=Gc(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const jc={passive:!1},Tt={capture:!0,passive:!1};function Sr(e){e.stopImmediatePropagation()}function ht(e){e.preventDefault(),e.stopImmediatePropagation()}function ys(e){var t=e.document.documentElement,n=Pe(e).on("dragstart.drag",ht,Tt);"onselectstart"in t?n.on("selectstart.drag",ht,Tt):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function ws(e,t){var n=e.document.documentElement,r=Pe(e).on("dragstart.drag",null);t&&(r.on("click.drag",ht,Tt),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Wt=e=>()=>e;function Lr(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Lr.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Wc(e){return!e.ctrlKey&&!e.button}function Xc(){return this.parentNode}function Zc(e,t){return t??{x:e.x,y:e.y}}function Uc(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qc(){var e=Wc,t=Xc,n=Zc,r=Uc,i={},s=kn("start","drag","end"),o=0,a,c,u,l,d=0;function f(_){_.on("mousedown.drag",g).filter(r).on("touchstart.drag",w).on("touchmove.drag",x,jc).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(_,T){if(!(l||!e.call(this,_,T))){var P=N(this,t.call(this,_,T),_,T,"mouse");P&&(Pe(_.view).on("mousemove.drag",v,Tt).on("mouseup.drag",b,Tt),ys(_.view),Sr(_),u=!1,a=_.clientX,c=_.clientY,P("start",_))}}function v(_){if(ht(_),!u){var T=_.clientX-a,P=_.clientY-c;u=T*T+P*P>d}i.mouse("drag",_)}function b(_){Pe(_.view).on("mousemove.drag mouseup.drag",null),ws(_.view,u),ht(_),i.mouse("end",_)}function w(_,T){if(e.call(this,_,T)){var P=_.changedTouches,M=t.call(this,_,T),E=P.length,C,A;for(C=0;C<E;++C)(A=N(this,M,_,T,P[C].identifier,P[C]))&&(Sr(_),A("start",_,P[C]))}}function x(_){var T=_.changedTouches,P=T.length,M,E;for(M=0;M<P;++M)(E=i[T[M].identifier])&&(ht(_),E("drag",_,T[M]))}function y(_){var T=_.changedTouches,P=T.length,M,E;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),M=0;M<P;++M)(E=i[T[M].identifier])&&(Sr(_),E("end",_,T[M]))}function N(_,T,P,M,E,C){var A=s.copy(),z=Ae(C||P,T),m,S,p;if((p=n.call(_,new Lr("beforestart",{sourceEvent:P,target:f,identifier:E,active:o,x:z[0],y:z[1],dx:0,dy:0,dispatch:A}),M))!=null)return m=p.x-z[0]||0,S=p.y-z[1]||0,function I(O,H,B){var q=z,F;switch(O){case"start":i[E]=I,F=o++;break;case"end":delete i[E],--o;case"drag":z=Ae(B||H,T),F=o;break}A.call(O,_,new Lr(O,{sourceEvent:H,subject:p,target:f,identifier:E,active:F,x:z[0]+m,y:z[1]+S,dx:z[0]-q[0],dy:z[1]-q[1],dispatch:A}),M)}}return f.filter=function(_){return arguments.length?(e=typeof _=="function"?_:Wt(!!_),f):e},f.container=function(_){return arguments.length?(t=typeof _=="function"?_:Wt(_),f):t},f.subject=function(_){return arguments.length?(n=typeof _=="function"?_:Wt(_),f):n},f.touchable=function(_){return arguments.length?(r=typeof _=="function"?_:Wt(!!_),f):r},f.on=function(){var _=s.on.apply(s,arguments);return _===s?f:_},f.clickDistance=function(_){return arguments.length?(d=(_=+_)*_,f):Math.sqrt(d)},f}function no(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function bs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Kt(){}var At=.7,dn=1/At,gt="\\s*([+-]?\\d+)\\s*",Rt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ze="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Jc=/^#([0-9a-f]{3,8})$/,$c=new RegExp(`^rgb\\(${gt},${gt},${gt}\\)$`),eu=new RegExp(`^rgb\\(${ze},${ze},${ze}\\)$`),tu=new RegExp(`^rgba\\(${gt},${gt},${gt},${Rt}\\)$`),nu=new RegExp(`^rgba\\(${ze},${ze},${ze},${Rt}\\)$`),ru=new RegExp(`^hsl\\(${Rt},${ze},${ze}\\)$`),ou=new RegExp(`^hsla\\(${Rt},${ze},${ze},${Rt}\\)$`),gi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};no(Kt,tt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:mi,formatHex:mi,formatHex8:iu,formatHsl:su,formatRgb:pi,toString:pi});function mi(){return this.rgb().formatHex()}function iu(){return this.rgb().formatHex8()}function su(){return xs(this).formatHsl()}function pi(){return this.rgb().formatRgb()}function tt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Jc.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?vi(t):n===3?new _e(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Xt(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Xt(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$c.exec(e))?new _e(t[1],t[2],t[3],1):(t=eu.exec(e))?new _e(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=tu.exec(e))?Xt(t[1],t[2],t[3],t[4]):(t=nu.exec(e))?Xt(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ru.exec(e))?bi(t[1],t[2]/100,t[3]/100,1):(t=ou.exec(e))?bi(t[1],t[2]/100,t[3]/100,t[4]):gi.hasOwnProperty(e)?vi(gi[e]):e==="transparent"?new _e(NaN,NaN,NaN,0):null}function vi(e){return new _e(e>>16&255,e>>8&255,e&255,1)}function Xt(e,t,n,r){return r<=0&&(e=t=n=NaN),new _e(e,t,n,r)}function au(e){return e instanceof Kt||(e=tt(e)),e?(e=e.rgb(),new _e(e.r,e.g,e.b,e.opacity)):new _e}function Hr(e,t,n,r){return arguments.length===1?au(e):new _e(e,t,n,r??1)}function _e(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}no(_e,Hr,bs(Kt,{brighter(e){return e=e==null?dn:Math.pow(dn,e),new _e(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new _e(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _e($e(this.r),$e(this.g),$e(this.b),fn(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yi,formatHex:yi,formatHex8:lu,formatRgb:wi,toString:wi}));function yi(){return`#${Je(this.r)}${Je(this.g)}${Je(this.b)}`}function lu(){return`#${Je(this.r)}${Je(this.g)}${Je(this.b)}${Je((isNaN(this.opacity)?1:this.opacity)*255)}`}function wi(){const e=fn(this.opacity);return`${e===1?"rgb(":"rgba("}${$e(this.r)}, ${$e(this.g)}, ${$e(this.b)}${e===1?")":`, ${e})`}`}function fn(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $e(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Je(e){return e=$e(e),(e<16?"0":"")+e.toString(16)}function bi(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Oe(e,t,n,r)}function xs(e){if(e instanceof Oe)return new Oe(e.h,e.s,e.l,e.opacity);if(e instanceof Kt||(e=tt(e)),!e)return new Oe;if(e instanceof Oe)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,c=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=c<.5?s+i:2-s-i,o*=60):a=c>0&&c<1?0:o,new Oe(o,a,c,e.opacity)}function cu(e,t,n,r){return arguments.length===1?xs(e):new Oe(e,t,n,r??1)}function Oe(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}no(Oe,cu,bs(Kt,{brighter(e){return e=e==null?dn:Math.pow(dn,e),new Oe(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?At:Math.pow(At,e),new Oe(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new _e(Pr(e>=240?e-240:e+120,i,r),Pr(e,i,r),Pr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Oe(xi(this.h),Zt(this.s),Zt(this.l),fn(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=fn(this.opacity);return`${e===1?"hsl(":"hsla("}${xi(this.h)}, ${Zt(this.s)*100}%, ${Zt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function xi(e){return e=(e||0)%360,e<0?e+360:e}function Zt(e){return Math.max(0,Math.min(1,e||0))}function Pr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ro=e=>()=>e;function uu(e,t){return function(n){return e+n*t}}function du(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function fu(e){return(e=+e)==1?_s:function(t,n){return n-t?du(t,n,e):ro(isNaN(t)?n:t)}}function _s(e,t){var n=t-e;return n?uu(e,n):ro(isNaN(e)?t:e)}const hn=(function e(t){var n=fu(t);function r(i,s){var o=n((i=Hr(i)).r,(s=Hr(s)).r),a=n(i.g,s.g),c=n(i.b,s.b),u=_s(i.opacity,s.opacity);return function(l){return i.r=o(l),i.g=a(l),i.b=c(l),i.opacity=u(l),i+""}}return r.gamma=e,r})(1);function hu(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function gu(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function mu(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=It(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function pu(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Re(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vu(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=It(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Vr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Or=new RegExp(Vr.source,"g");function yu(e){return function(){return e}}function wu(e){return function(t){return e(t)+""}}function Es(e,t){var n=Vr.lastIndex=Or.lastIndex=0,r,i,s,o=-1,a=[],c=[];for(e=e+"",t=t+"";(r=Vr.exec(e))&&(i=Or.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,c.push({i:o,x:Re(r,i)})),n=Or.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?c[0]?wu(c[0].x):yu(t):(t=c.length,function(u){for(var l=0,d;l<t;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}function It(e,t){var n=typeof t,r;return t==null||n==="boolean"?ro(t):(n==="number"?Re:n==="string"?(r=tt(t))?(t=r,hn):Es:t instanceof tt?hn:t instanceof Date?pu:gu(t)?hu:Array.isArray(t)?mu:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?vu:Re)(e,t)}var _i=180/Math.PI,qr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ks(e,t,n,r,i,s){var o,a,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,c/=a),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*_i,skewX:Math.atan(c)*_i,scaleX:o,scaleY:a}}var Ut;function bu(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?qr:ks(t.a,t.b,t.c,t.d,t.e,t.f)}function xu(e){return e==null||(Ut||(Ut=document.createElementNS("http://www.w3.org/2000/svg","g")),Ut.setAttribute("transform",e),!(e=Ut.transform.baseVal.consolidate()))?qr:(e=e.matrix,ks(e.a,e.b,e.c,e.d,e.e,e.f))}function Cs(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,l,d,f,g,v){if(u!==d||l!==f){var b=g.push("translate(",null,t,null,n);v.push({i:b-4,x:Re(u,d)},{i:b-2,x:Re(l,f)})}else(d||f)&&g.push("translate("+d+t+f+n)}function o(u,l,d,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Re(u,l)})):l&&d.push(i(d)+"rotate("+l+r)}function a(u,l,d,f){u!==l?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Re(u,l)}):l&&d.push(i(d)+"skewX("+l+r)}function c(u,l,d,f,g,v){if(u!==d||l!==f){var b=g.push(i(g)+"scale(",null,",",null,")");v.push({i:b-4,x:Re(u,d)},{i:b-2,x:Re(l,f)})}else(d!==1||f!==1)&&g.push(i(g)+"scale("+d+","+f+")")}return function(u,l){var d=[],f=[];return u=e(u),l=e(l),s(u.translateX,u.translateY,l.translateX,l.translateY,d,f),o(u.rotate,l.rotate,d,f),a(u.skewX,l.skewX,d,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,f),u=l=null,function(g){for(var v=-1,b=f.length,w;++v<b;)d[(w=f[v]).i]=w.x(g);return d.join("")}}}var _u=Cs(bu,"px, ","px)","deg)"),Eu=Cs(xu,", ",")",")"),ku=1e-12;function Ei(e){return((e=Math.exp(e))+1/e)/2}function Cu(e){return((e=Math.exp(e))-1/e)/2}function Nu(e){return((e=Math.exp(2*e))-1)/(e+1)}const nn=(function e(t,n,r){function i(s,o){var a=s[0],c=s[1],u=s[2],l=o[0],d=o[1],f=o[2],g=l-a,v=d-c,b=g*g+v*v,w,x;if(b<ku)x=Math.log(f/u)/t,w=function(M){return[a+M*g,c+M*v,u*Math.exp(t*M*x)]};else{var y=Math.sqrt(b),N=(f*f-u*u+r*b)/(2*u*n*y),_=(f*f-u*u-r*b)/(2*f*n*y),T=Math.log(Math.sqrt(N*N+1)-N),P=Math.log(Math.sqrt(_*_+1)-_);x=(P-T)/t,w=function(M){var E=M*x,C=Ei(T),A=u/(n*y)*(C*Nu(t*E+T)-Cu(T));return[a+A*g,c+A*v,u*C/Ei(t*E+T)]}}return w.duration=x*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,c=a*a;return e(o,a,c)},i})(Math.SQRT2,2,4);var yt=0,Ot=0,St=0,Ns=1e3,gn,Mt,mn=0,nt=0,Nn=0,zt=typeof performance=="object"&&performance.now?performance:Date,Ss=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oo(){return nt||(Ss(Su),nt=zt.now()+Nn)}function Su(){nt=0}function pn(){this._call=this._time=this._next=null}pn.prototype=Ps.prototype={constructor:pn,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oo():+n)+(t==null?0:+t),!this._next&&Mt!==this&&(Mt?Mt._next=this:gn=this,Mt=this),this._call=e,this._time=n,Br()},stop:function(){this._call&&(this._call=null,this._time=1/0,Br())}};function Ps(e,t,n){var r=new pn;return r.restart(e,t,n),r}function Pu(){oo(),++yt;for(var e=gn,t;e;)(t=nt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--yt}function ki(){nt=(mn=zt.now())+Nn,yt=Ot=0;try{Pu()}finally{yt=0,Mu(),nt=0}}function Ou(){var e=zt.now(),t=e-mn;t>Ns&&(Nn-=t,mn=e)}function Mu(){for(var e,t=gn,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:gn=n);Mt=e,Br(r)}function Br(e){if(!yt){Ot&&(Ot=clearTimeout(Ot));var t=e-nt;t>24?(e<1/0&&(Ot=setTimeout(ki,e-zt.now()-Nn)),St&&(St=clearInterval(St))):(St||(mn=zt.now(),St=setInterval(Ou,Ns)),yt=1,Ss(ki))}}function Ci(e,t,n){var r=new pn;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Iu=kn("start","end","cancel","interrupt"),Du=[],Os=0,Ni=1,Fr=2,rn=3,Si=4,Kr=5,on=6;function Sn(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Tu(e,n,{name:t,index:r,group:i,on:Iu,tween:Du,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Os})}function io(e,t){var n=De(e,t);if(n.state>Os)throw new Error("too late; already scheduled");return n}function Ve(e,t){var n=De(e,t);if(n.state>rn)throw new Error("too late; already running");return n}function De(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Tu(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Ps(s,0,n.time);function s(u){n.state=Ni,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var l,d,f,g;if(n.state!==Ni)return c();for(l in r)if(g=r[l],g.name===n.name){if(g.state===rn)return Ci(o);g.state===Si?(g.state=on,g.timer.stop(),g.on.call("interrupt",e,e.__data__,g.index,g.group),delete r[l]):+l<t&&(g.state=on,g.timer.stop(),g.on.call("cancel",e,e.__data__,g.index,g.group),delete r[l])}if(Ci(function(){n.state===rn&&(n.state=Si,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Fr,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fr){for(n.state=rn,i=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(g=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=g);i.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Kr,1),d=-1,f=i.length;++d<f;)i[d].call(e,l);n.state===Kr&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=on,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function sn(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Fr&&r.state<Kr,r.state=on,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Au(e){return this.each(function(){sn(this,e)})}function Ru(e,t){var n,r;return function(){var i=Ve(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function zu(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ve(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},c=0,u=i.length;c<u;++c)if(i[c].name===t){i[c]=a;break}c===u&&i.push(a)}s.tween=i}}function Lu(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=De(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Ru:zu)(n,e,t))}function so(e,t,n){var r=e._id;return e.each(function(){var i=Ve(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return De(i,r).value[t]}}function Ms(e,t){var n;return(typeof t=="number"?Re:t instanceof tt?hn:(n=tt(t))?(t=n,hn):Es)(e,t)}function Hu(e){return function(){this.removeAttribute(e)}}function Vu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qu(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Bu(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Fu(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Ku(e,t,n){var r,i,s;return function(){var o,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=a+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a)))}}function Yu(e,t){var n=Cn(e),r=n==="transform"?Eu:Ms;return this.attrTween(e,typeof t=="function"?(n.local?Ku:Fu)(n,r,so(this,"attr."+e,t)):t==null?(n.local?Vu:Hu)(n):(n.local?Bu:qu)(n,r,t))}function Gu(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ju(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wu(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&ju(e,s)),n}return i._value=t,i}function Xu(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Gu(e,s)),n}return i._value=t,i}function Zu(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Cn(e);return this.tween(n,(r.local?Wu:Xu)(r,t))}function Uu(e,t){return function(){io(this,e).delay=+t.apply(this,arguments)}}function Qu(e,t){return t=+t,function(){io(this,e).delay=t}}function Ju(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Uu:Qu)(t,e)):De(this.node(),t).delay}function $u(e,t){return function(){Ve(this,e).duration=+t.apply(this,arguments)}}function ed(e,t){return t=+t,function(){Ve(this,e).duration=t}}function td(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$u:ed)(t,e)):De(this.node(),t).duration}function nd(e,t){if(typeof t!="function")throw new Error;return function(){Ve(this,e).ease=t}}function rd(e){var t=this._id;return arguments.length?this.each(nd(t,e)):De(this.node(),t).ease}function od(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Ve(this,e).ease=n}}function id(e){if(typeof e!="function")throw new Error;return this.each(od(this._id,e))}function sd(e){typeof e!="function"&&(e=ls(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],c,u=0;u<o;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Ye(r,this._parents,this._name,this._id)}function ad(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var c=t[a],u=n[a],l=c.length,d=o[a]=new Array(l),f,g=0;g<l;++g)(f=c[g]||u[g])&&(d[g]=f);for(;a<r;++a)o[a]=t[a];return new Ye(o,this._parents,this._name,this._id)}function ld(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function cd(e,t,n){var r,i,s=ld(t)?io:Ve;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function ud(e,t){var n=this._id;return arguments.length<2?De(this.node(),n).on.on(e):this.each(cd(n,e,t))}function dd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function fd(){return this.on("end.remove",dd(this._id))}function hd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=eo(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],c=a.length,u=s[o]=new Array(c),l,d,f=0;f<c;++f)(l=a[f])&&(d=e.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),u[f]=d,Sn(u[f],t,n,f,u,De(l,n)));return new Ye(s,this._parents,t,n)}function gd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=as(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var c=r[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var f=e.call(l,l.__data__,d,c),g,v=De(l,n),b=0,w=f.length;b<w;++b)(g=f[b])&&Sn(g,t,n,b,f,v);s.push(f),o.push(l)}return new Ye(s,o,t,n)}var md=Ft.prototype.constructor;function pd(){return new md(this._groups,this._parents)}function vd(e,t){var n,r,i;return function(){var s=vt(this,e),o=(this.style.removeProperty(e),vt(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function Is(e){return function(){this.style.removeProperty(e)}}function yd(e,t,n){var r,i=n+"",s;return function(){var o=vt(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function wd(e,t,n){var r,i,s;return function(){var o=vt(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),vt(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,a))}}function bd(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var c=Ve(this,e),u=c.on,l=c.value[s]==null?a||(a=Is(t)):void 0;(u!==n||i!==l)&&(r=(n=u).copy()).on(o,i=l),c.on=r}}function xd(e,t,n){var r=(e+="")=="transform"?_u:Ms;return t==null?this.styleTween(e,vd(e,r)).on("end.style."+e,Is(e)):typeof t=="function"?this.styleTween(e,wd(e,r,so(this,"style."+e,t))).each(bd(this._id,e)):this.styleTween(e,yd(e,r,t),n).on("end.style."+e,null)}function _d(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ed(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&_d(e,o,n)),r}return s._value=t,s}function kd(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Ed(e,t,n??""))}function Cd(e){return function(){this.textContent=e}}function Nd(e){return function(){var t=e(this);this.textContent=t??""}}function Sd(e){return this.tween("text",typeof e=="function"?Nd(so(this,"text",e)):Cd(e==null?"":e+""))}function Pd(e){return function(t){this.textContent=e.call(this,t)}}function Od(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Pd(i)),t}return r._value=e,r}function Md(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Od(e))}function Id(){for(var e=this._name,t=this._id,n=Ds(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)if(c=o[u]){var l=De(c,t);Sn(c,e,n,u,o,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Ye(r,this._parents,e,n)}function Dd(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var u=Ve(this,r),l=u.on;l!==e&&(t=(e=l).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),i===0&&s()})}var Td=0;function Ye(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ds(){return++Td}var Be=Ft.prototype;Ye.prototype={constructor:Ye,select:hd,selectAll:gd,selectChild:Be.selectChild,selectChildren:Be.selectChildren,filter:sd,merge:ad,selection:pd,transition:Id,call:Be.call,nodes:Be.nodes,node:Be.node,size:Be.size,empty:Be.empty,each:Be.each,on:ud,attr:Yu,attrTween:Zu,style:xd,styleTween:kd,text:Sd,textTween:Md,remove:fd,tween:Lu,delay:Ju,duration:td,ease:rd,easeVarying:id,end:Dd,[Symbol.iterator]:Be[Symbol.iterator]};function Ad(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Rd={time:null,delay:0,duration:250,ease:Ad};function zd(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ld(e){var t,n;e instanceof Ye?(t=e._id,e=e._name):(t=Ds(),(n=Rd).time=oo(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,c,u=0;u<a;++u)(c=o[u])&&Sn(c,e,t,u,o,n||zd(c,t));return new Ye(r,this._parents,e,t)}Ft.prototype.interrupt=Au;Ft.prototype.transition=Ld;const Qt=e=>()=>e;function Hd(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Fe(e,t,n){this.k=e,this.x=t,this.y=n}Fe.prototype={constructor:Fe,scale:function(e){return e===1?this:new Fe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Fe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pn=new Fe(1,0,0);Ts.prototype=Fe.prototype;function Ts(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pn;return e.__zoom}function Mr(e){e.stopImmediatePropagation()}function Pt(e){e.preventDefault(),e.stopImmediatePropagation()}function Vd(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function qd(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Pi(){return this.__zoom||Pn}function Bd(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Fd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kd(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function Yd(){var e=Vd,t=qd,n=Kd,r=Bd,i=Fd,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],a=250,c=nn,u=kn("start","zoom","end"),l,d,f,g=500,v=150,b=0,w=10;function x(p){p.property("__zoom",Pi).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",A).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",m).on("touchend.zoom touchcancel.zoom",S).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}x.transform=function(p,I,O,H){var B=p.selection?p.selection():p;B.property("__zoom",Pi),p!==B?T(p,I,O,H):B.interrupt().each(function(){P(this,arguments).event(H).start().zoom(null,typeof I=="function"?I.apply(this,arguments):I).end()})},x.scaleBy=function(p,I,O,H){x.scaleTo(p,function(){var B=this.__zoom.k,q=typeof I=="function"?I.apply(this,arguments):I;return B*q},O,H)},x.scaleTo=function(p,I,O,H){x.transform(p,function(){var B=t.apply(this,arguments),q=this.__zoom,F=O==null?_(B):typeof O=="function"?O.apply(this,arguments):O,G=q.invert(F),Z=typeof I=="function"?I.apply(this,arguments):I;return n(N(y(q,Z),F,G),B,o)},O,H)},x.translateBy=function(p,I,O,H){x.transform(p,function(){return n(this.__zoom.translate(typeof I=="function"?I.apply(this,arguments):I,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),o)},null,H)},x.translateTo=function(p,I,O,H,B){x.transform(p,function(){var q=t.apply(this,arguments),F=this.__zoom,G=H==null?_(q):typeof H=="function"?H.apply(this,arguments):H;return n(Pn.translate(G[0],G[1]).scale(F.k).translate(typeof I=="function"?-I.apply(this,arguments):-I,typeof O=="function"?-O.apply(this,arguments):-O),q,o)},H,B)};function y(p,I){return I=Math.max(s[0],Math.min(s[1],I)),I===p.k?p:new Fe(I,p.x,p.y)}function N(p,I,O){var H=I[0]-O[0]*p.k,B=I[1]-O[1]*p.k;return H===p.x&&B===p.y?p:new Fe(p.k,H,B)}function _(p){return[(+p[0][0]+ +p[1][0])/2,(+p[0][1]+ +p[1][1])/2]}function T(p,I,O,H){p.on("start.zoom",function(){P(this,arguments).event(H).start()}).on("interrupt.zoom end.zoom",function(){P(this,arguments).event(H).end()}).tween("zoom",function(){var B=this,q=arguments,F=P(B,q).event(H),G=t.apply(B,q),Z=O==null?_(G):typeof O=="function"?O.apply(B,q):O,D=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),R=B.__zoom,L=typeof I=="function"?I.apply(B,q):I,V=c(R.invert(Z).concat(D/R.k),L.invert(Z).concat(D/L.k));return function(K){if(K===1)K=L;else{var j=V(K),Q=D/j[2];K=new Fe(Q,Z[0]-j[0]*Q,Z[1]-j[1]*Q)}F.zoom(null,K)}})}function P(p,I,O){return!O&&p.__zooming||new M(p,I)}function M(p,I){this.that=p,this.args=I,this.active=0,this.sourceEvent=null,this.extent=t.apply(p,I),this.taps=0}M.prototype={event:function(p){return p&&(this.sourceEvent=p),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(p,I){return this.mouse&&p!=="mouse"&&(this.mouse[1]=I.invert(this.mouse[0])),this.touch0&&p!=="touch"&&(this.touch0[1]=I.invert(this.touch0[0])),this.touch1&&p!=="touch"&&(this.touch1[1]=I.invert(this.touch1[0])),this.that.__zoom=I,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(p){var I=Pe(this.that).datum();u.call(p,this.that,new Hd(p,{sourceEvent:this.sourceEvent,target:x,transform:this.that.__zoom,dispatch:u}),I)}};function E(p,...I){if(!e.apply(this,arguments))return;var O=P(this,I).event(p),H=this.__zoom,B=Math.max(s[0],Math.min(s[1],H.k*Math.pow(2,r.apply(this,arguments)))),q=Ae(p);if(O.wheel)(O.mouse[0][0]!==q[0]||O.mouse[0][1]!==q[1])&&(O.mouse[1]=H.invert(O.mouse[0]=q)),clearTimeout(O.wheel);else{if(H.k===B)return;O.mouse=[q,H.invert(q)],sn(this),O.start()}Pt(p),O.wheel=setTimeout(F,v),O.zoom("mouse",n(N(y(H,B),O.mouse[0],O.mouse[1]),O.extent,o));function F(){O.wheel=null,O.end()}}function C(p,...I){if(f||!e.apply(this,arguments))return;var O=p.currentTarget,H=P(this,I,!0).event(p),B=Pe(p.view).on("mousemove.zoom",Z,!0).on("mouseup.zoom",D,!0),q=Ae(p,O),F=p.clientX,G=p.clientY;ys(p.view),Mr(p),H.mouse=[q,this.__zoom.invert(q)],sn(this),H.start();function Z(R){if(Pt(R),!H.moved){var L=R.clientX-F,V=R.clientY-G;H.moved=L*L+V*V>b}H.event(R).zoom("mouse",n(N(H.that.__zoom,H.mouse[0]=Ae(R,O),H.mouse[1]),H.extent,o))}function D(R){B.on("mousemove.zoom mouseup.zoom",null),ws(R.view,H.moved),Pt(R),H.event(R).end()}}function A(p,...I){if(e.apply(this,arguments)){var O=this.__zoom,H=Ae(p.changedTouches?p.changedTouches[0]:p,this),B=O.invert(H),q=O.k*(p.shiftKey?.5:2),F=n(N(y(O,q),H,B),t.apply(this,I),o);Pt(p),a>0?Pe(this).transition().duration(a).call(T,F,H,p):Pe(this).call(x.transform,F,H,p)}}function z(p,...I){if(e.apply(this,arguments)){var O=p.touches,H=O.length,B=P(this,I,p.changedTouches.length===H).event(p),q,F,G,Z;for(Mr(p),F=0;F<H;++F)G=O[F],Z=Ae(G,this),Z=[Z,this.__zoom.invert(Z),G.identifier],B.touch0?!B.touch1&&B.touch0[2]!==Z[2]&&(B.touch1=Z,B.taps=0):(B.touch0=Z,q=!0,B.taps=1+!!l);l&&(l=clearTimeout(l)),q&&(B.taps<2&&(d=Z[0],l=setTimeout(function(){l=null},g)),sn(this),B.start())}}function m(p,...I){if(this.__zooming){var O=P(this,I).event(p),H=p.changedTouches,B=H.length,q,F,G,Z;for(Pt(p),q=0;q<B;++q)F=H[q],G=Ae(F,this),O.touch0&&O.touch0[2]===F.identifier?O.touch0[0]=G:O.touch1&&O.touch1[2]===F.identifier&&(O.touch1[0]=G);if(F=O.that.__zoom,O.touch1){var D=O.touch0[0],R=O.touch0[1],L=O.touch1[0],V=O.touch1[1],K=(K=L[0]-D[0])*K+(K=L[1]-D[1])*K,j=(j=V[0]-R[0])*j+(j=V[1]-R[1])*j;F=y(F,Math.sqrt(K/j)),G=[(D[0]+L[0])/2,(D[1]+L[1])/2],Z=[(R[0]+V[0])/2,(R[1]+V[1])/2]}else if(O.touch0)G=O.touch0[0],Z=O.touch0[1];else return;O.zoom("touch",n(N(F,G,Z),O.extent,o))}}function S(p,...I){if(this.__zooming){var O=P(this,I).event(p),H=p.changedTouches,B=H.length,q,F;for(Mr(p),f&&clearTimeout(f),f=setTimeout(function(){f=null},g),q=0;q<B;++q)F=H[q],O.touch0&&O.touch0[2]===F.identifier?delete O.touch0:O.touch1&&O.touch1[2]===F.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(F=Ae(F,this),Math.hypot(d[0]-F[0],d[1]-F[1])<w)){var G=Pe(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return x.wheelDelta=function(p){return arguments.length?(r=typeof p=="function"?p:Qt(+p),x):r},x.filter=function(p){return arguments.length?(e=typeof p=="function"?p:Qt(!!p),x):e},x.touchable=function(p){return arguments.length?(i=typeof p=="function"?p:Qt(!!p),x):i},x.extent=function(p){return arguments.length?(t=typeof p=="function"?p:Qt([[+p[0][0],+p[0][1]],[+p[1][0],+p[1][1]]]),x):t},x.scaleExtent=function(p){return arguments.length?(s[0]=+p[0],s[1]=+p[1],x):[s[0],s[1]]},x.translateExtent=function(p){return arguments.length?(o[0][0]=+p[0][0],o[1][0]=+p[1][0],o[0][1]=+p[0][1],o[1][1]=+p[1][1],x):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},x.constrain=function(p){return arguments.length?(n=p,x):n},x.duration=function(p){return arguments.length?(a=+p,x):a},x.interpolate=function(p){return arguments.length?(c=p,x):c},x.on=function(){var p=u.on.apply(u,arguments);return p===u?x:p},x.clickDistance=function(p){return arguments.length?(b=(p=+p)*p,x):Math.sqrt(b)},x.tapDistance=function(p){return arguments.length?(w=+p,x):w},x}const Lt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Yr=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],As=["Enter"," ","Escape"],Gd={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var wt;(function(e){e.Strict="strict",e.Loose="loose"})(wt||(wt={}));var mt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(mt||(mt={}));var vn;(function(e){e.Partial="partial",e.Full="full"})(vn||(vn={}));const Gr={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var We;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(We||(We={}));var bt;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(bt||(bt={}));var $;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})($||($={}));const Oi={[$.Left]:$.Right,[$.Right]:$.Left,[$.Top]:$.Bottom,[$.Bottom]:$.Top};function jd(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0}function Mi(e,t,n){if(!n)return;const r=[];e.forEach((i,s)=>{t?.has(s)||r.push(i)}),r.length&&n(r)}function Wd(e){return e===null?null:e?"valid":"invalid"}const Rs=e=>"id"in e&&"source"in e&&"target"in e,Xd=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),ao=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Yt=(e,t=[0,0])=>{const{width:n,height:r}=st(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},Zd=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):ao(i)?i:t.nodeLookup.get(i.id));const a=o?yn(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return Mn(r,a)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return In(n)},On=(e,t={})=>{let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0},r=!1;return e.forEach(i=>{(t.filter===void 0||t.filter(i))&&(n=Mn(n,yn(i)),r=!0)}),r?In(n):{x:0,y:0,width:0,height:0}},lo=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const a={...jt(t,[n,r,i]),width:t.width/i,height:t.height/i},c=[];for(const u of e.values()){const{measured:l,selectable:d=!0,hidden:f=!1}=u;if(o&&!d||f)continue;const g=l.width??u.width??u.initialWidth??null,v=l.height??u.height??u.initialHeight??null,b=Ht(a,_t(u)),w=(g??0)*(v??0),x=s&&b>0;(!u.internals.handleBounds||x||b>=w||u.dragging)&&c.push(u)}return c},Ud=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Qd(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Jd({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const a=Qd(e,o),c=On(a),u=co(c,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(u,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function zs({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),a=o.parentId?n.get(o.parentId):void 0,{x:c,y:u}=a?a.internals.positionAbsolute:{x:0,y:0},l=o.origin??r;let d=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!a)s?.("005",Lt.error005());else{const g=a.measured.width,v=a.measured.height;g&&v&&(d=[[c,u],[c+g,u+v]])}else a&&Et(o.extent)&&(d=[[o.extent[0][0]+c,o.extent[0][1]+u],[o.extent[1][0]+c,o.extent[1][1]+u]]);const f=Et(d)?rt(t,d,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",Lt.error015()),{position:{x:f.x-c+(o.measured.width??0)*l[0],y:f.y-u+(o.measured.height??0)*l[1]},positionAbsolute:f}}async function $d({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(f=>f.id)),o=[];for(const f of n){if(f.deletable===!1)continue;const g=s.has(f.id),v=!g&&f.parentId&&o.find(b=>b.id===f.parentId);(g||v)&&o.push(f)}const a=new Set(t.map(f=>f.id)),c=r.filter(f=>f.deletable!==!1),l=Ud(o,c);for(const f of c)a.has(f.id)&&!l.find(v=>v.id===f.id)&&l.push(f);if(!i)return{edges:l,nodes:o};const d=await i({nodes:o,edges:l});return typeof d=="boolean"?d?{edges:l,nodes:o}:{edges:[],nodes:[]}:d}const xt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),rt=(e={x:0,y:0},t,n)=>({x:xt(e.x,t[0][0],t[1][0]-(n?.width??0)),y:xt(e.y,t[0][1],t[1][1]-(n?.height??0))});function Ls(e,t,n){const{width:r,height:i}=st(n),{x:s,y:o}=n.internals.positionAbsolute;return rt(e,[[s,o],[s+r,o+i]],t)}const Ii=(e,t,n)=>e<t?xt(Math.abs(e-t),1,t)/t:e>n?-xt(Math.abs(e-n),1,t)/t:0,Hs=(e,t,n=15,r=40)=>{const i=Ii(e.x,r,t.width-r)*n,s=Ii(e.y,r,t.height-r)*n;return[i,s]},Mn=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),jr=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),In=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),_t=(e,t=[0,0])=>{const{x:n,y:r}=ao(e)?e.internals.positionAbsolute:Yt(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},yn=(e,t=[0,0])=>{const{x:n,y:r}=ao(e)?e.internals.positionAbsolute:Yt(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},ef=(e,t)=>In(Mn(jr(e),jr(t))),Ht=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},Di=e=>Ke(e.width)&&Ke(e.height)&&Ke(e.x)&&Ke(e.y),Ke=e=>!isNaN(e)&&isFinite(e),tf=(e,t)=>{},Gt=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),jt=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const a={x:(e-n)/i,y:(t-r)/i};return s?Gt(a,o):a},wn=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function ut(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function nf(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=ut(e,n),i=ut(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=ut(e.top??e.y??0,n),i=ut(e.bottom??e.y??0,n),s=ut(e.left??e.x??0,t),o=ut(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function rf(e,t,n,r,i,s){const{x:o,y:a}=wn(e,[t,n,r]),{x:c,y:u}=wn({x:e.x+e.width,y:e.y+e.height},[t,n,r]),l=i-c,d=s-u;return{left:Math.floor(o),top:Math.floor(a),right:Math.floor(l),bottom:Math.floor(d)}}const co=(e,t,n,r,i,s)=>{const o=nf(s,t,n),a=(t-o.x)/e.width,c=(n-o.y)/e.height,u=Math.min(a,c),l=xt(u,r,i),d=e.x+e.width/2,f=e.y+e.height/2,g=t/2-d*l,v=n/2-f*l,b=rf(e,g,v,l,t,n),w={left:Math.min(b.left-o.left,0),top:Math.min(b.top-o.top,0),right:Math.min(b.right-o.right,0),bottom:Math.min(b.bottom-o.bottom,0)};return{x:g-w.left+w.right,y:v-w.top+w.bottom,zoom:l}},bn=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Et(e){return e!=null&&e!=="parent"}function st(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function of(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function sf(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const a=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*a[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*a[1]}return s}function af(e){return{...Gd,...e||{}}}function Ir(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Me(e),a=jt({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:c,y:u}=n?Gt(a,t):a;return{xSnapped:c,ySnapped:u,...a}}const Vs=e=>({width:e.offsetWidth,height:e.offsetHeight}),qs=e=>e?.getRootNode?.()||window?.document,lf=["INPUT","SELECT","TEXTAREA"];function Bs(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:lf.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Fs=e=>"clientX"in e,Me=(e,t)=>{const n=Fs(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},Ti=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const a=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Vs(o)}})};function cf({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:a}){const c=e*.125+i*.375+o*.375+n*.125,u=t*.125+s*.375+a*.375+r*.125,l=Math.abs(c-e),d=Math.abs(u-t);return[c,u,l,d]}function Jt(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function Ai({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case $.Left:return[t-Jt(t-r,s),n];case $.Right:return[t+Jt(r-t,s),n];case $.Top:return[t,n-Jt(n-i,s)];case $.Bottom:return[t,n+Jt(i-n,s)]}}function Ks({sourceX:e,sourceY:t,sourcePosition:n=$.Bottom,targetX:r,targetY:i,targetPosition:s=$.Top,curvature:o=.25}){const[a,c]=Ai({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[u,l]=Ai({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[d,f,g,v]=cf({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${e},${t} C${a},${c} ${u},${l} ${r},${i}`,d,f,g,v]}function Ys({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,a=r<t?r+o:r-o;return[s,a,i,o]}function uf({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId||i&&e.selected?e.internals.z:0,t.parentId||i&&t.selected?t.internals.z:0);return s+o}function df({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=Mn(yn(e),yn(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Ht(o,In(s))>0}const ff=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,hf=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),gf=(e,t)=>{if(!e.source||!e.target)return t;let n;return Rs(e)?n={...e}:n={...e,id:ff(e)},hf(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Gs({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,a]=Ys({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,a]}const Ri={[$.Left]:{x:-1,y:0},[$.Right]:{x:1,y:0},[$.Top]:{x:0,y:-1},[$.Bottom]:{x:0,y:1}},mf=({source:e,sourcePosition:t=$.Bottom,target:n})=>t===$.Left||t===$.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},zi=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function pf({source:e,sourcePosition:t=$.Bottom,target:n,targetPosition:r=$.Top,center:i,offset:s,stepPosition:o}){const a=Ri[t],c=Ri[r],u={x:e.x+a.x*s,y:e.y+a.y*s},l={x:n.x+c.x*s,y:n.y+c.y*s},d=mf({source:u,sourcePosition:t,target:l}),f=d.x!==0?"x":"y",g=d[f];let v=[],b,w;const x={x:0,y:0},y={x:0,y:0},[,,N,_]=Ys({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[f]*c[f]===-1){f==="x"?(b=i.x??u.x+(l.x-u.x)*o,w=i.y??(u.y+l.y)/2):(b=i.x??(u.x+l.x)/2,w=i.y??u.y+(l.y-u.y)*o);const P=[{x:b,y:u.y},{x:b,y:l.y}],M=[{x:u.x,y:w},{x:l.x,y:w}];a[f]===g?v=f==="x"?P:M:v=f==="x"?M:P}else{const P=[{x:u.x,y:l.y}],M=[{x:l.x,y:u.y}];if(f==="x"?v=a.x===g?M:P:v=a.y===g?P:M,t===r){const m=Math.abs(e[f]-n[f]);if(m<=s){const S=Math.min(s-1,s-m);a[f]===g?x[f]=(u[f]>e[f]?-1:1)*S:y[f]=(l[f]>n[f]?-1:1)*S}}if(t!==r){const m=f==="x"?"y":"x",S=a[f]===c[m],p=u[m]>l[m],I=u[m]<l[m];(a[f]===1&&(!S&&p||S&&I)||a[f]!==1&&(!S&&I||S&&p))&&(v=f==="x"?P:M)}const E={x:u.x+x.x,y:u.y+x.y},C={x:l.x+y.x,y:l.y+y.y},A=Math.max(Math.abs(E.x-v[0].x),Math.abs(C.x-v[0].x)),z=Math.max(Math.abs(E.y-v[0].y),Math.abs(C.y-v[0].y));A>=z?(b=(E.x+C.x)/2,w=v[0].y):(b=v[0].x,w=(E.y+C.y)/2)}return[[e,{x:u.x+x.x,y:u.y+x.y},...v,{x:l.x+y.x,y:l.y+y.y},n],b,w,N,_]}function vf(e,t,n,r){const i=Math.min(zi(e,t)/2,zi(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const u=e.x<n.x?-1:1,l=e.y<n.y?1:-1;return`L ${s+i*u},${o}Q ${s},${o} ${s},${o+i*l}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*a},${o}`}function uo({sourceX:e,sourceY:t,sourcePosition:n=$.Bottom,targetX:r,targetY:i,targetPosition:s=$.Top,borderRadius:o=5,centerX:a,centerY:c,offset:u=20,stepPosition:l=.5}){const[d,f,g,v,b]=pf({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:a,y:c},offset:u,stepPosition:l});return[d.reduce((x,y,N)=>{let _="";return N>0&&N<d.length-1?_=vf(d[N-1],y,d[N+1],o):_=`${N===0?"M":"L"}${y.x} ${y.y}`,x+=_,x},""),f,g,v,b]}function Li(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function yf(e){const{sourceNode:t,targetNode:n}=e;if(!Li(t)||!Li(n))return null;const r=t.internals.handleBounds||Hi(t.handles),i=n.internals.handleBounds||Hi(n.handles),s=Vi(r?.source??[],e.sourceHandle),o=Vi(e.connectionMode===wt.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",Lt.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const a=s?.position||$.Bottom,c=o?.position||$.Top,u=Vt(t,s,a),l=Vt(n,o,c);return{sourceX:u.x,sourceY:u.y,targetX:l.x,targetY:l.y,sourcePosition:a,targetPosition:c}}function Hi(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Vt(e,t,n=$.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:a}=t??st(e);if(r)return{x:i+o/2,y:s+a/2};switch(t?.position??n){case $.Top:return{x:i+o/2,y:s};case $.Right:return{x:i+o,y:s+a/2};case $.Bottom:return{x:i+o/2,y:s+a};case $.Left:return{x:i,y:s+a/2}}}function Vi(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Wr(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function wf(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,a)=>([a.markerStart||r,a.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const u=Wr(c,t);s.has(u)||(o.push({id:u,color:c.color||n,...c}),s.add(u))}}),o),[]).sort((o,a)=>o.id.localeCompare(a.id))}const js=1e3,bf=10,fo={nodeOrigin:[0,0],nodeExtent:Yr,elevateNodesOnSelect:!0,defaults:{}},xf={...fo,checkEquality:!0};function ho(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function _f(e,t,n){const r=ho(fo,n);for(const i of e.values())if(i.parentId)go(i,e,t,r);else{const s=Yt(i,r.nodeOrigin),o=Et(i.extent)?i.extent:r.nodeExtent,a=rt(s,o,st(i));i.internals.positionAbsolute=a}}function Ef(e,t){if(!e.handles)return e.measured?t?.internals.handleBounds:void 0;const n=[],r=[];for(const i of e.handles){const s={id:i.id,width:i.width??1,height:i.height??1,nodeId:e.id,x:i.x,y:i.y,position:i.position,type:i.type};i.type==="source"?n.push(s):i.type==="target"&&r.push(s)}return{source:n,target:r}}function kf(e,t,n,r){const i=ho(xf,r);let s={i:-1},o=e.length>0;const a=new Map(t),c=i?.elevateNodesOnSelect?js:0;t.clear(),n.clear();for(const u of e){let l=a.get(u.id);if(i.checkEquality&&u===l?.internals.userNode)t.set(u.id,l);else{const d=Yt(u,i.nodeOrigin),f=Et(u.extent)?u.extent:i.nodeExtent,g=rt(d,f,st(u));l={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:Ef(u,l),z:Ws(u,c),userNode:u}},t.set(u.id,l)}(l.measured===void 0||l.measured.width===void 0||l.measured.height===void 0)&&!l.hidden&&(o=!1),u.parentId&&go(l,t,n,r,s)}return o}function Cf(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function go(e,t,n,r,i){const{elevateNodesOnSelect:s,nodeOrigin:o,nodeExtent:a}=ho(fo,r),c=e.parentId,u=t.get(c);if(!u){console.warn(`Parent node ${c} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Cf(e,n),i&&!u.parentId&&u.internals.rootParentIndex===void 0&&(u.internals.rootParentIndex=++i.i,u.internals.z=u.internals.z+i.i*bf),i&&u.internals.rootParentIndex!==void 0&&(i.i=u.internals.rootParentIndex);const l=s?js:0,{x:d,y:f,z:g}=Nf(e,u,o,a,l),{positionAbsolute:v}=e.internals,b=d!==v.x||f!==v.y;(b||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:b?{x:d,y:f}:v,z:g}})}function Ws(e,t){return(Ke(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function Nf(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,a=st(e),c=Yt(e,n),u=Et(e.extent)?rt(c,e.extent,a):c;let l=rt({x:s+u.x,y:o+u.y},r,a);e.extent==="parent"&&(l=Ls(l,a,t));const d=Ws(e,i),f=t.internals.z??0;return{x:l.x,y:l.y,z:f>=d?f+1:d}}function Sf(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const a=t.get(o.parentId);if(!a)continue;const c=s.get(o.parentId)?.expandedRect??_t(a),u=ef(c,o.rect);s.set(o.parentId,{expandedRect:u,parent:a})}return s.size>0&&s.forEach(({expandedRect:o,parent:a},c)=>{const u=a.internals.positionAbsolute,l=st(a),d=a.origin??r,f=o.x<u.x?Math.round(Math.abs(u.x-o.x)):0,g=o.y<u.y?Math.round(Math.abs(u.y-o.y)):0,v=Math.max(l.width,Math.round(o.width)),b=Math.max(l.height,Math.round(o.height)),w=(v-l.width)*d[0],x=(b-l.height)*d[1];(f>0||g>0||w||x)&&(i.push({id:c,type:"position",position:{x:a.position.x-f+w,y:a.position.y-g+x}}),n.get(c)?.forEach(y=>{e.some(N=>N.id===y.id)||i.push({id:y.id,type:"position",position:{x:y.position.x+f,y:y.position.y+g}})})),(l.width<o.width||l.height<o.height||f||g)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:v+(f?d[0]*f-w:0),height:b+(g?d[1]*g-x:0)}})}),i}function Pf(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let a=!1;if(!o)return{changes:[],updatedInternals:a};const c=[],u=window.getComputedStyle(o),{m22:l}=new window.DOMMatrixReadOnly(u.transform),d=[];for(const f of e.values()){const g=t.get(f.id);if(!g)continue;if(g.hidden){t.set(g.id,{...g,internals:{...g.internals,handleBounds:void 0}}),a=!0;continue}const v=Vs(f.nodeElement),b=g.measured.width!==v.width||g.measured.height!==v.height;if(!!(v.width&&v.height&&(b||!g.internals.handleBounds||f.force))){const x=f.nodeElement.getBoundingClientRect(),y=Et(g.extent)?g.extent:s;let{positionAbsolute:N}=g.internals;g.parentId&&g.extent==="parent"?N=Ls(N,v,t.get(g.parentId)):y&&(N=rt(N,y,v));const _={...g,measured:v,internals:{...g.internals,positionAbsolute:N,handleBounds:{source:Ti("source",f.nodeElement,x,l,g.id),target:Ti("target",f.nodeElement,x,l,g.id)}}};t.set(g.id,_),g.parentId&&go(_,t,n,{nodeOrigin:i}),a=!0,b&&(c.push({id:g.id,type:"dimensions",dimensions:v}),g.expandParent&&g.parentId&&d.push({id:g.id,parentId:g.parentId,rect:_t(_,i)}))}}if(d.length>0){const f=Sf(d,t,n,i);c.push(...f)}return{changes:c,updatedInternals:a}}async function Of({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),a=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(a)}function qi(e,t,n,r,i,s){let o=i;const a=r.get(o)||new Map;r.set(o,a.set(n,t)),o=`${i}-${e}`;const c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),s){o=`${i}-${e}-${s}`;const u=r.get(o)||new Map;r.set(o,u.set(n,t))}}function Mf(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:a=null}=r,c={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:a},u=`${i}-${o}--${s}-${a}`,l=`${s}-${a}--${i}-${o}`;qi("source",c,l,e,i,o),qi("target",c,u,e,s,a),t.set(r.id,r)}}function Xs(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Xs(n,t):!1}function Bi(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function If(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Xs(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const a=e.get(s);a&&i.set(s,{id:s,position:a.position||{x:0,y:0},distance:{x:n.x-a.internals.positionAbsolute.x,y:n.y-a.internals.positionAbsolute.y},extent:a.extent,parentId:a.parentId,origin:a.origin,expandParent:a.expandParent,internals:{positionAbsolute:a.internals.positionAbsolute||{x:0,y:0}},measured:{width:a.measured.width??0,height:a.measured.height??0}})}return i}function Dr({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,a]of t){const c=n.get(o)?.internals.userNode;c&&i.push({...c,position:a.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function Df({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Gt(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Tf({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,a=new Map,c=!1,u={x:0,y:0},l=null,d=!1,f=null,g=!1,v=!1,b=null;function w({noDragClassName:y,handleSelector:N,domNode:_,isSelectable:T,nodeId:P,nodeClickDistance:M=0}){f=Pe(_);function E({x:m,y:S}){const{nodeLookup:p,nodeExtent:I,snapGrid:O,snapToGrid:H,nodeOrigin:B,onNodeDrag:q,onSelectionDrag:F,onError:G,updateNodePositions:Z}=t();s={x:m,y:S};let D=!1;const R=a.size>1,L=R&&I?jr(On(a)):null,V=R&&H?Df({dragItems:a,snapGrid:O,x:m,y:S}):null;for(const[K,j]of a){if(!p.has(K))continue;let Q={x:m-j.distance.x,y:S-j.distance.y};H&&(Q=V?{x:Math.round(Q.x+V.x),y:Math.round(Q.y+V.y)}:Gt(Q,O));let le=null;if(R&&I&&!j.extent&&L){const{positionAbsolute:te}=j.internals,ge=te.x-L.x+I[0][0],qe=te.x+j.measured.width-L.x2+I[1][0],Ge=te.y-L.y+I[0][1],lt=te.y+j.measured.height-L.y2+I[1][1];le=[[ge,Ge],[qe,lt]]}const{position:ae,positionAbsolute:oe}=zs({nodeId:K,nextPosition:Q,nodeLookup:p,nodeExtent:le||I,nodeOrigin:B,onError:G});D=D||j.position.x!==ae.x||j.position.y!==ae.y,j.position=ae,j.internals.positionAbsolute=oe}if(v=v||D,!!D&&(Z(a,!0),b&&(r||q||!P&&F))){const[K,j]=Dr({nodeId:P,dragItems:a,nodeLookup:p});r?.(b,a,K,j),q?.(b,K,j),P||F?.(b,j)}}async function C(){if(!l)return;const{transform:m,panBy:S,autoPanSpeed:p,autoPanOnNodeDrag:I}=t();if(!I){c=!1,cancelAnimationFrame(o);return}const[O,H]=Hs(u,l,p);(O!==0||H!==0)&&(s.x=(s.x??0)-O/m[2],s.y=(s.y??0)-H/m[2],await S({x:O,y:H})&&E(s)),o=requestAnimationFrame(C)}function A(m){const{nodeLookup:S,multiSelectionActive:p,nodesDraggable:I,transform:O,snapGrid:H,snapToGrid:B,selectNodesOnDrag:q,onNodeDragStart:F,onSelectionDragStart:G,unselectNodesAndEdges:Z}=t();d=!0,(!q||!T)&&!p&&P&&(S.get(P)?.selected||Z()),T&&q&&P&&e?.(P);const D=Ir(m.sourceEvent,{transform:O,snapGrid:H,snapToGrid:B,containerBounds:l});if(s=D,a=If(S,I,D,P),a.size>0&&(n||F||!P&&G)){const[R,L]=Dr({nodeId:P,dragItems:a,nodeLookup:S});n?.(m.sourceEvent,a,R,L),F?.(m.sourceEvent,R,L),P||G?.(m.sourceEvent,L)}}const z=Qc().clickDistance(M).on("start",m=>{const{domNode:S,nodeDragThreshold:p,transform:I,snapGrid:O,snapToGrid:H}=t();l=S?.getBoundingClientRect()||null,g=!1,v=!1,b=m.sourceEvent,p===0&&A(m),s=Ir(m.sourceEvent,{transform:I,snapGrid:O,snapToGrid:H,containerBounds:l}),u=Me(m.sourceEvent,l)}).on("drag",m=>{const{autoPanOnNodeDrag:S,transform:p,snapGrid:I,snapToGrid:O,nodeDragThreshold:H,nodeLookup:B}=t(),q=Ir(m.sourceEvent,{transform:p,snapGrid:I,snapToGrid:O,containerBounds:l});if(b=m.sourceEvent,(m.sourceEvent.type==="touchmove"&&m.sourceEvent.touches.length>1||P&&!B.has(P))&&(g=!0),!g){if(!c&&S&&d&&(c=!0,C()),!d){const F=Me(m.sourceEvent,l),G=F.x-u.x,Z=F.y-u.y;Math.sqrt(G*G+Z*Z)>H&&A(m)}(s.x!==q.xSnapped||s.y!==q.ySnapped)&&a&&d&&(u=Me(m.sourceEvent,l),E(q))}}).on("end",m=>{if(!(!d||g)&&(c=!1,d=!1,cancelAnimationFrame(o),a.size>0)){const{nodeLookup:S,updateNodePositions:p,onNodeDragStop:I,onSelectionDragStop:O}=t();if(v&&(p(a,!1),v=!1),i||I||!P&&O){const[H,B]=Dr({nodeId:P,dragItems:a,nodeLookup:S,dragging:!1});i?.(m.sourceEvent,a,H,B),I?.(m.sourceEvent,H,B),P||O?.(m.sourceEvent,B)}}}).filter(m=>{const S=m.target;return!m.button&&(!y||!Bi(S,`.${y}`,_))&&(!N||Bi(S,N,_))});f.call(z)}function x(){f?.on(".drag",null)}return{update:w,destroy:x}}function Af(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Ht(i,_t(s))>0&&r.push(s);return r}const Rf=250;function zf(e,t,n,r){let i=[],s=1/0;const o=Af(e,n,t+Rf);for(const a of o){const c=[...a.internals.handleBounds?.source??[],...a.internals.handleBounds?.target??[]];for(const u of c){if(r.nodeId===u.nodeId&&r.type===u.type&&r.id===u.id)continue;const{x:l,y:d}=Vt(a,u,u.position,!0),f=Math.sqrt(Math.pow(l-e.x,2)+Math.pow(d-e.y,2));f>t||(f<s?(i=[{...u,x:l,y:d}],s=f):f===s&&i.push({...u,x:l,y:d}))}}if(!i.length)return null;if(i.length>1){const a=r.type==="source"?"target":"source";return i.find(c=>c.type===a)??i[0]}return i[0]}function Zs(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const a=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],c=(n?a?.find(u=>u.id===n):a?.[0])??null;return c&&s?{...c,...Vt(o,c,c.position,!0)}:c}function Us(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function Lf(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Qs=()=>!0;function Hf(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:a,nodeLookup:c,lib:u,autoPanOnConnect:l,flowId:d,panBy:f,cancelConnection:g,onConnectStart:v,onConnect:b,onConnectEnd:w,isValidConnection:x=Qs,onReconnectEnd:y,updateConnection:N,getTransform:_,getFromHandle:T,autoPanSpeed:P,dragThreshold:M=1,handleDomNode:E}){const C=qs(e.target);let A=0,z;const{x:m,y:S}=Me(e),p=Us(s,E),I=a?.getBoundingClientRect();let O=!1;if(!I||!p)return;const H=Zs(i,p,r,c,t);if(!H)return;let B=Me(e,I),q=!1,F=null,G=!1,Z=null;function D(){if(!l||!I)return;const[ae,oe]=Hs(B,I,P);f({x:ae,y:oe}),A=requestAnimationFrame(D)}const R={...H,nodeId:i,type:p,position:H.position},L=c.get(i);let K={inProgress:!0,isValid:null,from:Vt(L,R,$.Left,!0),fromHandle:R,fromPosition:R.position,fromNode:L,to:B,toHandle:null,toPosition:Oi[R.position],toNode:null};function j(){O=!0,N(K),v?.(e,{nodeId:i,handleId:r,handleType:p})}M===0&&j();function Q(ae){if(!O){const{x:qe,y:Ge}=Me(ae),lt=qe-m,ce=Ge-S;if(!(lt*lt+ce*ce>M*M))return;j()}if(!T()||!R){le(ae);return}const oe=_();B=Me(ae,I),z=zf(jt(B,oe,!1,[1,1]),n,c,R),q||(D(),q=!0);const te=Js(ae,{handle:z,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:x,doc:C,lib:u,flowId:d,nodeLookup:c});Z=te.handleDomNode,F=te.connection,G=Lf(!!z,te.isValid);const ge={...K,isValid:G,to:te.toHandle&&G?wn({x:te.toHandle.x,y:te.toHandle.y},oe):B,toHandle:te.toHandle,toPosition:G&&te.toHandle?te.toHandle.position:Oi[R.position],toNode:te.toHandle?c.get(te.toHandle.nodeId):null};G&&z&&K.toHandle&&ge.toHandle&&K.toHandle.type===ge.toHandle.type&&K.toHandle.nodeId===ge.toHandle.nodeId&&K.toHandle.id===ge.toHandle.id&&K.to.x===ge.to.x&&K.to.y===ge.to.y||(N(ge),K=ge)}function le(ae){if(!("touches"in ae&&ae.touches.length>0)){if(O){(z||Z)&&F&&G&&b?.(F);const{inProgress:oe,...te}=K,ge={...te,toPosition:K.toHandle?K.toPosition:null};w?.(ae,ge),s&&y?.(ae,ge)}g(),cancelAnimationFrame(A),q=!1,G=!1,F=null,Z=null,C.removeEventListener("mousemove",Q),C.removeEventListener("mouseup",le),C.removeEventListener("touchmove",Q),C.removeEventListener("touchend",le)}}C.addEventListener("mousemove",Q),C.addEventListener("mouseup",le),C.addEventListener("touchmove",Q),C.addEventListener("touchend",le)}function Js(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:a,flowId:c,isValidConnection:u=Qs,nodeLookup:l}){const d=s==="target",f=t?o.querySelector(`.${a}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:v}=Me(e),b=o.elementFromPoint(g,v),w=b?.classList.contains(`${a}-flow__handle`)?b:f,x={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const y=Us(void 0,w),N=w.getAttribute("data-nodeid"),_=w.getAttribute("data-handleid"),T=w.classList.contains("connectable"),P=w.classList.contains("connectableend");if(!N||!y)return x;const M={source:d?N:r,sourceHandle:d?_:i,target:d?r:N,targetHandle:d?i:_};x.connection=M;const C=T&&P&&(n===wt.Strict?d&&y==="source"||!d&&y==="target":N!==r||_!==i);x.isValid=C&&u(M),x.toHandle=Zs(N,y,_,l,n,!0)}return x}const Fi={onPointerDown:Hf,isValid:Js},Dn=e=>({x:e.x,y:e.y,zoom:e.k}),Tr=({x:e,y:t,zoom:n})=>Pn.translate(e,t).scale(n),ft=(e,t)=>e.target.closest(`.${t}`),$s=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Vf=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Ar=(e,t=0,n=Vf,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},ea=e=>{const t=e.ctrlKey&&bn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function qf({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:a,onPanZoom:c,onPanZoomEnd:u}){return l=>{if(ft(l,t))return l.ctrlKey&&l.preventDefault(),!1;l.preventDefault(),l.stopImmediatePropagation();const d=n.property("__zoom").k||1;if(l.ctrlKey&&o){const w=Ae(l),x=ea(l),y=d*Math.pow(2,x);r.scaleTo(n,y,w,l);return}const f=l.deltaMode===1?20:1;let g=i===mt.Vertical?0:l.deltaX*f,v=i===mt.Horizontal?0:l.deltaY*f;!bn()&&l.shiftKey&&i!==mt.Vertical&&(g=l.deltaY*f,v=0),r.translateBy(n,-(g/d)*s,-(v/d)*s,{internal:!0});const b=Dn(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling?(c?.(l,b),e.panScrollTimeout=setTimeout(()=>{u?.(l,b),e.isPanScrolling=!1},150)):(e.isPanScrolling=!0,a?.(l,b))}}function Bf({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,a=ft(r,e);if(r.ctrlKey&&s&&a&&r.preventDefault(),o||a)return null;r.preventDefault(),n.call(this,r,i)}}function Ff({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Dn(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Kf({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&$s(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Dn(s.transform))}}function Yf({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&$s(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i)){const a=Dn(o.transform);e.prevViewport=a,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,a)},n?150:0)}}}function Gf({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:a,noPanClassName:c,lib:u,connectionInProgress:l}){return d=>{const f=e||t,g=n&&d.ctrlKey,v=d.type==="wheel";if(d.button===1&&d.type==="mousedown"&&(ft(d,`${u}-flow__node`)||ft(d,`${u}-flow__edge`)))return!0;if(!r&&!f&&!i&&!s&&!n||o||l&&!v||ft(d,a)&&v||ft(d,c)&&(!v||i&&v&&!e)||!n&&d.ctrlKey&&v)return!1;if(!n&&d.type==="touchstart"&&d.touches?.length>1)return d.preventDefault(),!1;if(!f&&!i&&!g&&v||!r&&(d.type==="mousedown"||d.type==="touchstart")||Array.isArray(r)&&!r.includes(d.button)&&d.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||v)&&b}}function jf({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:a,onPanZoomEnd:c,onDraggingChange:u}){const l={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},d=e.getBoundingClientRect(),f=Yd().clickDistance(!Ke(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),g=Pe(e).call(f);N({x:s.x,y:s.y,zoom:xt(s.zoom,t,n)},[[0,0],[d.width,d.height]],i);const v=g.on("wheel.zoom"),b=g.on("dblclick.zoom");f.wheelDelta(ea);function w(m,S){return g?new Promise(p=>{f?.interpolate(S?.interpolate==="linear"?It:nn).transform(Ar(g,S?.duration,S?.ease,()=>p(!0)),m)}):Promise.resolve(!1)}function x({noWheelClassName:m,noPanClassName:S,onPaneContextMenu:p,userSelectionActive:I,panOnScroll:O,panOnDrag:H,panOnScrollMode:B,panOnScrollSpeed:q,preventScrolling:F,zoomOnPinch:G,zoomOnScroll:Z,zoomOnDoubleClick:D,zoomActivationKeyPressed:R,lib:L,onTransformChange:V,connectionInProgress:K}){I&&!l.isZoomingOrPanning&&y();const Q=O&&!R&&!I?qf({zoomPanValues:l,noWheelClassName:m,d3Selection:g,d3Zoom:f,panOnScrollMode:B,panOnScrollSpeed:q,zoomOnPinch:G,onPanZoomStart:a,onPanZoom:o,onPanZoomEnd:c}):Bf({noWheelClassName:m,preventScrolling:F,d3ZoomHandler:v});if(g.on("wheel.zoom",Q,{passive:!1}),!I){const ae=Ff({zoomPanValues:l,onDraggingChange:u,onPanZoomStart:a});f.on("start",ae);const oe=Kf({zoomPanValues:l,panOnDrag:H,onPaneContextMenu:!!p,onPanZoom:o,onTransformChange:V});f.on("zoom",oe);const te=Yf({zoomPanValues:l,panOnDrag:H,panOnScroll:O,onPaneContextMenu:p,onPanZoomEnd:c,onDraggingChange:u});f.on("end",te)}const le=Gf({zoomActivationKeyPressed:R,panOnDrag:H,zoomOnScroll:Z,panOnScroll:O,zoomOnDoubleClick:D,zoomOnPinch:G,userSelectionActive:I,noPanClassName:S,noWheelClassName:m,lib:L,connectionInProgress:K});f.filter(le),D?g.on("dblclick.zoom",b):g.on("dblclick.zoom",null)}function y(){f.on("zoom",null)}async function N(m,S,p){const I=Tr(m),O=f?.constrain()(I,S,p);return O&&await w(O),new Promise(H=>H(O))}async function _(m,S){const p=Tr(m);return await w(p,S),new Promise(I=>I(p))}function T(m){if(g){const S=Tr(m),p=g.property("__zoom");(p.k!==m.zoom||p.x!==m.x||p.y!==m.y)&&f?.transform(g,S,null,{sync:!0})}}function P(){const m=g?Ts(g.node()):{x:0,y:0,k:1};return{x:m.x,y:m.y,zoom:m.k}}function M(m,S){return g?new Promise(p=>{f?.interpolate(S?.interpolate==="linear"?It:nn).scaleTo(Ar(g,S?.duration,S?.ease,()=>p(!0)),m)}):Promise.resolve(!1)}function E(m,S){return g?new Promise(p=>{f?.interpolate(S?.interpolate==="linear"?It:nn).scaleBy(Ar(g,S?.duration,S?.ease,()=>p(!0)),m)}):Promise.resolve(!1)}function C(m){f?.scaleExtent(m)}function A(m){f?.translateExtent(m)}function z(m){const S=!Ke(m)||m<0?0:m;f?.clickDistance(S)}return{update:x,destroy:y,setViewport:_,setViewportConstrained:N,getViewport:P,scaleTo:M,scaleBy:E,setScaleExtent:C,setTranslateExtent:A,syncViewport:T,setClickDistance:z}}var Ki;(function(e){e.Line="line",e.Handle="handle"})(Ki||(Ki={}));var Wf=se("<div><!></div>");function ot(e,t){ne(t,!0);let n=W(t,"id",3,null),r=W(t,"type",3,"source"),i=W(t,"position",19,()=>$.Top),s=W(t,"isConnectableStart",3,!0),o=W(t,"isConnectableEnd",3,!0),a=it(t,["$$slots","$$events","$$legacy","id","type","position","style","class","isConnectable","isConnectableStart","isConnectableEnd","isValidConnection","onconnect","ondisconnect","children"]);const c=Dt("svelteflow__node_id"),u=Dt("svelteflow__node_connectable");let l=k(()=>r()==="target"),d=k(()=>t.isConnectable!==void 0?t.isConnectable:u.value),f=at(),g=k(()=>f.ariaLabelConfig),v=null;pa(()=>{if(t.onconnect||t.ondisconnect){f.edges;let m=f.connectionLookup.get(`${c}-${r()}${n()?`-${n()}`:""}`);if(v&&!jd(m,v)){const S=m??new Map;Mi(v,S,t.ondisconnect),Mi(S,v,t.onconnect)}v=new Map(m)}});let b=k(()=>{if(!f.connection.inProgress)return[!1,!1,!1,!1,null];const{fromHandle:m,toHandle:S,isValid:p}=f.connection,I=m&&m.nodeId===c&&m.type===r()&&m.id===n(),O=S&&S.nodeId===c&&S.type===r()&&S.id===n(),H=f.connectionMode===wt.Strict?m?.type!==r():c!==m?.nodeId||n()!==m?.id;return[!0,I,O,H,O&&p]}),w=k(()=>qt(h(b),5)),x=k(()=>h(w)[0]),y=k(()=>h(w)[1]),N=k(()=>h(w)[2]),_=k(()=>h(w)[3]),T=k(()=>h(w)[4]);function P(m){const S=f.onbeforeconnect?f.onbeforeconnect(m):m;S&&(f.addEdge(S),f.onconnect?.(m))}function M(m){const S=Fs(m);m.currentTarget&&(S&&m.button===0||!S)&&Fi.onPointerDown(m,{handleId:n(),nodeId:c,isTarget:h(l),connectionRadius:f.connectionRadius,domNode:f.domNode,nodeLookup:f.nodeLookup,connectionMode:f.connectionMode,lib:"svelte",autoPanOnConnect:f.autoPanOnConnect,autoPanSpeed:f.autoPanSpeed,flowId:f.flowId,isValidConnection:t.isValidConnection??f.isValidConnection,updateConnection:f.updateConnection,cancelConnection:f.cancelConnection,panBy:f.panBy,onConnect:P,onConnectStart:(p,I)=>{f.onconnectstart?.(p,{nodeId:I.nodeId,handleId:I.handleId,handleType:I.handleType})},onConnectEnd:(p,I)=>{f.onconnectend?.(p,I)},getTransform:()=>[f.viewport.x,f.viewport.y,f.viewport.zoom],getFromHandle:()=>f.connection.fromHandle,dragThreshold:f.connectionDragThreshold,handleDomNode:m.currentTarget})}function E(m){if(!c||!f.clickConnectStartHandle&&!s())return;if(!f.clickConnectStartHandle){f.onclickconnectstart?.(m,{nodeId:c,handleId:n(),handleType:r()}),f.clickConnectStartHandle={nodeId:c,type:r(),id:n()};return}const S=qs(m.target),p=t.isValidConnection??f.isValidConnection,{connectionMode:I,clickConnectStartHandle:O,flowId:H,nodeLookup:B}=f,{connection:q,isValid:F}=Fi.isValid(m,{handle:{nodeId:c,id:n(),type:r()},connectionMode:I,fromNodeId:O.nodeId,fromHandleId:O.id??null,fromType:O.type,isValidConnection:p,flowId:H,doc:S,lib:"svelte",nodeLookup:B});F&&q&&P(q);const G=structuredClone($i(f.connection));delete G.inProgress,G.toPosition=G.toHandle?G.toHandle.position:null,f.onclickconnectend?.(m,G),f.clickConnectStartHandle=null}var C=Wf(),A=()=>{};Ze(C,m=>({"data-handleid":n(),"data-nodeid":c,"data-handlepos":i(),"data-id":`${f.flowId??""}-${c??""}-${n()??"null"??""}-${r()??""}`,class:["svelte-flow__handle",`svelte-flow__handle-${i()}`,f.noDragClass,f.noPanClass,i(),t.class],onmousedown:M,ontouchstart:M,onclick:f.clickConnect?E:void 0,onkeypress:A,style:t.style,role:"button","aria-label":h(g)["handle.ariaLabel"],tabindex:"-1",...a,[Ur]:m}),[()=>({valid:h(T),connectingto:h(N),connectingfrom:h(y),source:!h(l),target:h(l),connectablestart:s(),connectableend:o(),connectable:h(d),connectionindicator:h(d)&&(!h(x)||h(_))&&(h(x)||f.clickConnectStartHandle?o():s())})]);var z=J(C);Se(z,()=>t.children??kt),U(C),X(e,C),re()}var Xf=se("<!> <!>",1);function ta(e,t){ne(t,!0);let n=W(t,"targetPosition",19,()=>$.Top),r=W(t,"sourcePosition",19,()=>$.Bottom);var i=Xf(),s=ue(i);ot(s,{type:"target",get position(){return n()}});var o=ee(s),a=ee(o);ot(a,{type:"source",get position(){return r()}}),de(()=>ve(o,` ${t.data?.label??""} `)),X(e,i),re()}var Zf=se(" <!>",1);function Uf(e,t){ne(t,!0);let n=W(t,"data",19,()=>({label:"Node"})),r=W(t,"sourcePosition",19,()=>$.Bottom);pt();var i=Zf(),s=ue(i),o=ee(s);ot(o,{type:"source",get position(){return r()}}),de(()=>ve(s,`${n()?.label??""} `)),X(e,i),re()}var Qf=se(" <!>",1);function Jf(e,t){ne(t,!0);let n=W(t,"data",19,()=>({label:"Node"})),r=W(t,"targetPosition",19,()=>$.Top);pt();var i=Qf(),s=ue(i),o=ee(s);ot(o,{type:"target",get position(){return r()}}),de(()=>ve(s,`${n()?.label??""} `)),X(e,i),re()}function $f(e,t){}function Rr(e,t,n){if(!n||!t)return;const r=n==="root"?t:t.querySelector(`.svelte-flow__${n}`);r&&r.appendChild(e)}function eh(e,t){const n=k(at),r=k(()=>h(n).domNode);let i;return h(r)?Rr(e,h(r),t):i=Qi(()=>{et(()=>{Rr(e,h(r),t),i?.()})}),{async update(s){Rr(e,h(r),s)},destroy(){e.parentNode&&e.parentNode.removeChild(e),i?.()}}}function th(){let e=fe(typeof window>"u");if(h(e)){const t=Qi(()=>{et(()=>{Y(e,!1),t?.()})})}return{get value(){return h(e)}}}const Yi=e=>Xd(e),nh=e=>Rs(e);function He(e){return e===void 0?void 0:`${e}px`}const xn={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var rh=se("<div><!></div>");function oh(e,t){ne(t,!0);let n=W(t,"x",3,0),r=W(t,"y",3,0),i=W(t,"selectEdgeOnClick",3,!1),s=W(t,"transparent",3,!1),o=it(t,["$$slots","$$events","$$legacy","x","y","width","height","selectEdgeOnClick","transparent","class","children"]);const a=at(),c=Dt("svelteflow__edge_id");let u=k(()=>a.visible.edges.get(c)?.zIndex);var l=rh(),d=()=>{i()&&c&&a.handleEdgeSelection(c)};Ze(l,g=>({class:["svelte-flow__edge-label",{transparent:s()},t.class],tabindex:"-1",onclick:d,...o,[_n]:g}),[()=>({display:th().value?"none":void 0,cursor:i()?"pointer":void 0,transform:`translate(-50%, -50%) translate(${n()??""}px,${r()??""}px)`,"pointer-events":"all",width:He(t.width),height:He(t.height),"z-index":h(u)})],void 0,"svelte-1wi9q07");var f=J(l);Se(f,()=>t.children??kt),U(l),xe(l,(g,v)=>eh?.(g,v),()=>"edge-labels"),X(e,l),re()}var ih=pe("<path></path>"),sh=pe('<path fill="none"></path><!><!>',1);function Tn(e,t){let n=W(t,"interactionWidth",3,20),r=it(t,["$$slots","$$events","$$legacy","id","path","label","labelX","labelY","labelStyle","markerStart","markerEnd","style","interactionWidth","class"]);var i=sh(),s=ue(i),o=ee(s);{var a=l=>{var d=ih();Ze(d,()=>({d:t.path,"stroke-opacity":0,"stroke-width":n(),fill:"none",class:"svelte-flow__edge-interaction",...r})),X(l,d)};he(o,l=>{n()>0&&l(a)})}var c=ee(o);{var u=l=>{oh(l,{get x(){return t.labelX},get y(){return t.labelY},get style(){return t.labelStyle},selectEdgeOnClick:!0,children:(d,f)=>{pt();var g=va();de(()=>ve(g,t.label)),X(d,g)},$$slots:{default:!0}})};he(c,l=>{t.label&&l(u)})}de(()=>{ie(s,"id",t.id),ie(s,"d",t.path),Ue(s,0,Ct(["svelte-flow__edge-path",t.class])),ie(s,"marker-start",t.markerStart),ie(s,"marker-end",t.markerEnd),Le(s,t.style)}),X(e,i)}function na(e,t){ne(t,!0);let n=k(()=>Ks({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,curvature:t.pathOptions?.curvature})),r=k(()=>qt(h(n),3)),i=k(()=>h(r)[0]),s=k(()=>h(r)[1]),o=k(()=>h(r)[2]);Tn(e,{get id(){return t.id},get path(){return h(i)},get labelX(){return h(s)},get labelY(){return h(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),re()}function ah(e,t){ne(t,!0);let n=k(()=>uo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition})),r=k(()=>qt(h(n),3)),i=k(()=>h(r)[0]),s=k(()=>h(r)[1]),o=k(()=>h(r)[2]);Tn(e,{get path(){return h(i)},get labelX(){return h(s)},get labelY(){return h(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),re()}function lh(e,t){ne(t,!0);let n=k(()=>Gs({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY})),r=k(()=>qt(h(n),3)),i=k(()=>h(r)[0]),s=k(()=>h(r)[1]),o=k(()=>h(r)[2]);Tn(e,{get path(){return h(i)},get labelX(){return h(s)},get labelY(){return h(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),re()}function ch(e,t){ne(t,!0);let n=k(()=>uo({sourceX:t.sourceX,sourceY:t.sourceY,targetX:t.targetX,targetY:t.targetY,sourcePosition:t.sourcePosition,targetPosition:t.targetPosition,borderRadius:0})),r=k(()=>qt(h(n),3)),i=k(()=>h(r)[0]),s=k(()=>h(r)[1]),o=k(()=>h(r)[2]);Tn(e,{get path(){return h(i)},get labelX(){return h(s)},get labelY(){return h(o)},get label(){return t.label},get labelStyle(){return t.labelStyle},get markerStart(){return t.markerStart},get markerEnd(){return t.markerEnd},get interactionWidth(){return t.interactionWidth},get style(){return t.style}}),re()}function uh(e,t,n,r){const i=new Map;return lo(e,{x:0,y:0,width:n,height:r},t,!0).forEach(s=>{i.set(s.id,s)}),i}function Gi(e){const{edges:t,defaultEdgeOptions:n,nodeLookup:r,previousEdges:i,connectionMode:s,onerror:o,onlyRenderVisible:a,elevateEdgesOnSelect:c}=e,u=new Map;for(const l of t){const d=r.get(l.source),f=r.get(l.target);if(!d||!f)continue;if(a){const{visibleNodes:b,transform:w,width:x,height:y}=e;if(df({sourceNode:d,targetNode:f,width:x,height:y,transform:w}))b.set(d.id,d),b.set(f.id,f);else continue}const g=i.get(l.id);if(g&&l===g.edge&&d==g.sourceNode&&f==g.targetNode){u.set(l.id,g);continue}const v=yf({id:l.id,sourceNode:d,targetNode:f,sourceHandle:l.sourceHandle||null,targetHandle:l.targetHandle||null,connectionMode:s,onError:o});v&&u.set(l.id,{...n,...l,...v,zIndex:uf({selected:l.selected,zIndex:l.zIndex??n.zIndex,sourceNode:d,targetNode:f,elevateOnSelect:c}),sourceNode:d,targetNode:f,edge:l})}return u}const ra={input:Uf,output:Jf,default:ta,group:$f},oa={straight:lh,smoothstep:ah,default:na,step:ch};function dh(e,t,n,r,i,s){if(t&&!n&&r&&i){const o=On(s,{filter:a=>!!((a.width||a.initialWidth)&&(a.height||a.initialHeight))});return co(o,r,i,.5,2,.1)}else return n??{x:0,y:0,zoom:1}}function fh(e){class t{#e=k(()=>e.props.id??"1");get flowId(){return h(this.#e)}set flowId(r){Y(this.#e,r)}#t=fe(null);get domNode(){return h(this.#t)}set domNode(r){Y(this.#t,r)}#n=fe(null);get panZoom(){return h(this.#n)}set panZoom(r){Y(this.#n,r)}#r=fe(e.width??0);get width(){return h(this.#r)}set width(r){Y(this.#r,r)}#o=fe(e.height??0);get height(){return h(this.#o)}set height(r){Y(this.#o,r)}#i=k(()=>{const r=kf(e.nodes,this.nodeLookup,this.parentLookup,{nodeExtent:this.nodeExtent,nodeOrigin:this.nodeOrigin,elevateNodesOnSelect:e.props.elevateNodesOnSelect??!0,checkEquality:!0});return this.fitViewQueued&&r&&(this.fitViewOptions?.duration?this.resolveFitView():queueMicrotask(()=>{this.resolveFitView()})),r});get nodesInitialized(){return h(this.#i)}set nodesInitialized(r){Y(this.#i,r)}#s=k(()=>this.panZoom!==null);get viewportInitialized(){return h(this.#s)}set viewportInitialized(r){Y(this.#s,r)}#a=k(()=>(Mf(this.connectionLookup,this.edgeLookup,e.edges),e.edges));get _edges(){return h(this.#a)}set _edges(r){Y(this.#a,r)}get nodes(){return this.nodesInitialized,e.nodes}set nodes(r){e.nodes=r}get edges(){return this._edges}set edges(r){e.edges=r}_prevSelectedNodes=[];_prevSelectedNodeIds=new Set;#l=k(()=>{const r=this._prevSelectedNodeIds.size,i=new Set,s=this.nodes.filter(o=>(o.selected&&(i.add(o.id),this._prevSelectedNodeIds.delete(o.id)),o.selected));return(r!==i.size||this._prevSelectedNodeIds.size>0)&&(this._prevSelectedNodes=s),this._prevSelectedNodeIds=i,this._prevSelectedNodes});get selectedNodes(){return h(this.#l)}set selectedNodes(r){Y(this.#l,r)}_prevSelectedEdges=[];_prevSelectedEdgeIds=new Set;#c=k(()=>{const r=this._prevSelectedEdgeIds.size,i=new Set,s=this.edges.filter(o=>(o.selected&&(i.add(o.id),this._prevSelectedEdgeIds.delete(o.id)),o.selected));return(r!==i.size||this._prevSelectedEdgeIds.size>0)&&(this._prevSelectedEdges=s),this._prevSelectedEdgeIds=i,this._prevSelectedEdges});get selectedEdges(){return h(this.#c)}set selectedEdges(r){Y(this.#c,r)}selectionChangeHandlers=new Map;nodeLookup=new Map;parentLookup=new Map;connectionLookup=new Map;edgeLookup=new Map;_prevVisibleEdges=new Map;#u=k(()=>{const{nodes:r,_edges:i,_prevVisibleEdges:s,nodeLookup:o,connectionMode:a,onerror:c,onlyRenderVisibleElements:u,defaultEdgeOptions:l}=this;let d,f;const g={edges:i,defaultEdgeOptions:l,previousEdges:s,nodeLookup:o,connectionMode:a,elevateEdgesOnSelect:e.props.elevateEdgesOnSelect??!0,onerror:c};if(u){const{viewport:v,width:b,height:w}=this,x=[v.x,v.y,v.zoom];d=uh(o,x,b,w),f=Gi({...g,onlyRenderVisible:!0,visibleNodes:d,transform:x,width:b,height:w})}else d=this.nodeLookup,f=Gi(g);return{nodes:d,edges:f}});get visible(){return h(this.#u)}set visible(r){Y(this.#u,r)}#d=k(()=>e.props.nodesDraggable??!0);get nodesDraggable(){return h(this.#d)}set nodesDraggable(r){Y(this.#d,r)}#f=k(()=>e.props.nodesConnectable??!0);get nodesConnectable(){return h(this.#f)}set nodesConnectable(r){Y(this.#f,r)}#h=k(()=>e.props.elementsSelectable??!0);get elementsSelectable(){return h(this.#h)}set elementsSelectable(r){Y(this.#h,r)}#g=k(()=>e.props.nodesFocusable??!0);get nodesFocusable(){return h(this.#g)}set nodesFocusable(r){Y(this.#g,r)}#m=k(()=>e.props.edgesFocusable??!0);get edgesFocusable(){return h(this.#m)}set edgesFocusable(r){Y(this.#m,r)}#p=k(()=>e.props.disableKeyboardA11y??!1);get disableKeyboardA11y(){return h(this.#p)}set disableKeyboardA11y(r){Y(this.#p,r)}#v=k(()=>e.props.minZoom??.5);get minZoom(){return h(this.#v)}set minZoom(r){Y(this.#v,r)}#y=k(()=>e.props.maxZoom??2);get maxZoom(){return h(this.#y)}set maxZoom(r){Y(this.#y,r)}#w=k(()=>e.props.nodeOrigin??[0,0]);get nodeOrigin(){return h(this.#w)}set nodeOrigin(r){Y(this.#w,r)}#b=k(()=>e.props.nodeExtent??Yr);get nodeExtent(){return h(this.#b)}set nodeExtent(r){Y(this.#b,r)}#x=k(()=>e.props.translateExtent??Yr);get translateExtent(){return h(this.#x)}set translateExtent(r){Y(this.#x,r)}#_=k(()=>e.props.defaultEdgeOptions??{});get defaultEdgeOptions(){return h(this.#_)}set defaultEdgeOptions(r){Y(this.#_,r)}#E=k(()=>e.props.nodeDragThreshold??1);get nodeDragThreshold(){return h(this.#E)}set nodeDragThreshold(r){Y(this.#E,r)}#k=k(()=>e.props.autoPanOnNodeDrag??!0);get autoPanOnNodeDrag(){return h(this.#k)}set autoPanOnNodeDrag(r){Y(this.#k,r)}#C=k(()=>e.props.autoPanOnConnect??!0);get autoPanOnConnect(){return h(this.#C)}set autoPanOnConnect(r){Y(this.#C,r)}#N=k(()=>e.props.autoPanOnNodeFocus??!0);get autoPanOnNodeFocus(){return h(this.#N)}set autoPanOnNodeFocus(r){Y(this.#N,r)}#S=k(()=>e.props.autoPanSpeed??15);get autoPanSpeed(){return h(this.#S)}set autoPanSpeed(r){Y(this.#S,r)}#P=k(()=>e.props.connectionDragThreshold??1);get connectionDragThreshold(){return h(this.#P)}set connectionDragThreshold(r){Y(this.#P,r)}fitViewQueued=e.props.fitView??!1;fitViewOptions=e.props.fitViewOptions;fitViewResolver=null;#O=k(()=>e.props.snapGrid??null);get snapGrid(){return h(this.#O)}set snapGrid(r){Y(this.#O,r)}#M=fe(!1);get dragging(){return h(this.#M)}set dragging(r){Y(this.#M,r)}#I=fe(null);get selectionRect(){return h(this.#I)}set selectionRect(r){Y(this.#I,r)}#D=fe(!1);get selectionKeyPressed(){return h(this.#D)}set selectionKeyPressed(r){Y(this.#D,r)}#T=fe(!1);get multiselectionKeyPressed(){return h(this.#T)}set multiselectionKeyPressed(r){Y(this.#T,r)}#A=fe(!1);get deleteKeyPressed(){return h(this.#A)}set deleteKeyPressed(r){Y(this.#A,r)}#R=fe(!1);get panActivationKeyPressed(){return h(this.#R)}set panActivationKeyPressed(r){Y(this.#R,r)}#z=fe(!1);get zoomActivationKeyPressed(){return h(this.#z)}set zoomActivationKeyPressed(r){Y(this.#z,r)}#L=fe(null);get selectionRectMode(){return h(this.#L)}set selectionRectMode(r){Y(this.#L,r)}#H=fe("");get ariaLiveMessage(){return h(this.#H)}set ariaLiveMessage(r){Y(this.#H,r)}#V=k(()=>e.props.selectionMode??vn.Partial);get selectionMode(){return h(this.#V)}set selectionMode(r){Y(this.#V,r)}#q=k(()=>({...ra,...e.props.nodeTypes}));get nodeTypes(){return h(this.#q)}set nodeTypes(r){Y(this.#q,r)}#B=k(()=>({...oa,...e.props.edgeTypes}));get edgeTypes(){return h(this.#B)}set edgeTypes(r){Y(this.#B,r)}#F=k(()=>e.props.noPanClass??"nopan");get noPanClass(){return h(this.#F)}set noPanClass(r){Y(this.#F,r)}#K=k(()=>e.props.noDragClass??"nodrag");get noDragClass(){return h(this.#K)}set noDragClass(r){Y(this.#K,r)}#Y=k(()=>e.props.noWheelClass??"nowheel");get noWheelClass(){return h(this.#Y)}set noWheelClass(r){Y(this.#Y,r)}#G=k(()=>af(e.props.ariaLabelConfig));get ariaLabelConfig(){return h(this.#G)}set ariaLabelConfig(r){Y(this.#G,r)}#j=fe(dh(this.nodesInitialized,e.props.fitView,e.props.initialViewport,this.width,this.height,this.nodeLookup));get _viewport(){return h(this.#j)}set _viewport(r){Y(this.#j,r)}get viewport(){return e.viewport??this._viewport}set viewport(r){e.viewport&&(e.viewport=r),this._viewport=r}#W=fe(Gr);get _connection(){return h(this.#W)}set _connection(r){Y(this.#W,r)}#X=k(()=>this._connection.inProgress?{...this._connection,to:jt(this._connection.to,[this.viewport.x,this.viewport.y,this.viewport.zoom])}:this._connection);get connection(){return h(this.#X)}set connection(r){Y(this.#X,r)}#Z=k(()=>e.props.connectionMode??wt.Strict);get connectionMode(){return h(this.#Z)}set connectionMode(r){Y(this.#Z,r)}#U=k(()=>e.props.connectionRadius??20);get connectionRadius(){return h(this.#U)}set connectionRadius(r){Y(this.#U,r)}#Q=k(()=>e.props.isValidConnection??(()=>!0));get isValidConnection(){return h(this.#Q)}set isValidConnection(r){Y(this.#Q,r)}#J=k(()=>e.props.selectNodesOnDrag??!0);get selectNodesOnDrag(){return h(this.#J)}set selectNodesOnDrag(r){Y(this.#J,r)}#$=k(()=>e.props.defaultMarkerColor===void 0?"#b1b1b7":e.props.defaultMarkerColor);get defaultMarkerColor(){return h(this.#$)}set defaultMarkerColor(r){Y(this.#$,r)}#ee=k(()=>wf(e.edges,{defaultColor:this.defaultMarkerColor,id:this.flowId,defaultMarkerStart:this.defaultEdgeOptions.markerStart,defaultMarkerEnd:this.defaultEdgeOptions.markerEnd}));get markers(){return h(this.#ee)}set markers(r){Y(this.#ee,r)}#te=k(()=>e.props.onlyRenderVisibleElements??!1);get onlyRenderVisibleElements(){return h(this.#te)}set onlyRenderVisibleElements(r){Y(this.#te,r)}#ne=k(()=>e.props.onflowerror??tf);get onerror(){return h(this.#ne)}set onerror(r){Y(this.#ne,r)}#re=k(()=>e.props.ondelete);get ondelete(){return h(this.#re)}set ondelete(r){Y(this.#re,r)}#oe=k(()=>e.props.onbeforedelete);get onbeforedelete(){return h(this.#oe)}set onbeforedelete(r){Y(this.#oe,r)}#ie=k(()=>e.props.onbeforeconnect);get onbeforeconnect(){return h(this.#ie)}set onbeforeconnect(r){Y(this.#ie,r)}#se=k(()=>e.props.onconnect);get onconnect(){return h(this.#se)}set onconnect(r){Y(this.#se,r)}#ae=k(()=>e.props.onconnectstart);get onconnectstart(){return h(this.#ae)}set onconnectstart(r){Y(this.#ae,r)}#le=k(()=>e.props.onconnectend);get onconnectend(){return h(this.#le)}set onconnectend(r){Y(this.#le,r)}#ce=k(()=>e.props.onbeforereconnect);get onbeforereconnect(){return h(this.#ce)}set onbeforereconnect(r){Y(this.#ce,r)}#ue=k(()=>e.props.onreconnect);get onreconnect(){return h(this.#ue)}set onreconnect(r){Y(this.#ue,r)}#de=k(()=>e.props.onreconnectstart);get onreconnectstart(){return h(this.#de)}set onreconnectstart(r){Y(this.#de,r)}#fe=k(()=>e.props.onreconnectend);get onreconnectend(){return h(this.#fe)}set onreconnectend(r){Y(this.#fe,r)}#he=k(()=>e.props.clickConnect??!0);get clickConnect(){return h(this.#he)}set clickConnect(r){Y(this.#he,r)}#ge=k(()=>e.props.onclickconnectstart);get onclickconnectstart(){return h(this.#ge)}set onclickconnectstart(r){Y(this.#ge,r)}#me=k(()=>e.props.onclickconnectend);get onclickconnectend(){return h(this.#me)}set onclickconnectend(r){Y(this.#me,r)}#pe=fe(null);get clickConnectStartHandle(){return h(this.#pe)}set clickConnectStartHandle(r){Y(this.#pe,r)}#ve=k(()=>e.props.onselectiondrag);get onselectiondrag(){return h(this.#ve)}set onselectiondrag(r){Y(this.#ve,r)}#ye=k(()=>e.props.onselectiondragstart);get onselectiondragstart(){return h(this.#ye)}set onselectiondragstart(r){Y(this.#ye,r)}#we=k(()=>e.props.onselectiondragstop);get onselectiondragstop(){return h(this.#we)}set onselectiondragstop(r){Y(this.#we,r)}resolveFitView=async()=>{this.panZoom&&(await Jd({nodes:this.nodeLookup,width:this.width,height:this.height,panZoom:this.panZoom,minZoom:this.minZoom,maxZoom:this.maxZoom},this.fitViewOptions),this.fitViewResolver?.resolve(!0),this.fitViewQueued=!1,this.fitViewOptions=void 0,this.fitViewResolver=null)};_prefersDark=new _a("(prefers-color-scheme: dark)",e.props.colorModeSSR==="dark");#be=k(()=>e.props.colorMode==="system"?this._prefersDark.current?"dark":"light":e.props.colorMode??"light");get colorMode(){return h(this.#be)}set colorMode(r){Y(this.#be,r)}constructor(){}resetStoreValues(){this.dragging=!1,this.selectionRect=null,this.selectionRectMode=null,this.selectionKeyPressed=!1,this.multiselectionKeyPressed=!1,this.deleteKeyPressed=!1,this.panActivationKeyPressed=!1,this.zoomActivationKeyPressed=!1,this._connection=Gr,this.clickConnectStartHandle=null,this.viewport=e.props.initialViewport??{x:0,y:0,zoom:1},this.ariaLiveMessage=""}}return new t}function at(){const e=Dt(Xr);if(!e)throw new Error("To call useStore outside of <SvelteFlow /> you need to wrap your component in a <SvelteFlowProvider />");return e.getStore()}const Xr=Symbol();function hh(e){const t=fh(e);function n(m){t.nodeTypes={...ra,...m}}function r(m){t.edgeTypes={...oa,...m}}function i(m){t.edges=gf(m,t.edges)}const s=(m,S=!1)=>{t.nodes=t.nodes.map(p=>{const I=m.get(p.id);return I?{...p,position:I.position,dragging:S}:p})};function o(m){const{changes:S,updatedInternals:p}=Pf(m,t.nodeLookup,t.parentLookup,t.domNode,t.nodeOrigin);if(!p)return;_f(t.nodeLookup,t.parentLookup,{nodeOrigin:t.nodeOrigin,nodeExtent:t.nodeExtent}),t.fitViewQueued&&t.resolveFitView();const I=new Map;for(const O of S){const H=t.nodeLookup.get(O.id)?.internals.userNode;if(!H)continue;const B={...H};switch(O.type){case"dimensions":{const q={...B.measured,...O.dimensions};O.setAttributes&&(B.width=O.dimensions?.width??B.width,B.height=O.dimensions?.height??B.height),B.measured=q;break}case"position":B.position=O.position??B.position;break}I.set(O.id,B)}t.nodes=t.nodes.map(O=>I.get(O.id)??O)}function a(m){const S=t.fitViewResolver??Promise.withResolvers();return t.fitViewQueued=!0,t.fitViewOptions=m,t.fitViewResolver=S,t.nodes=[...t.nodes],S.promise}async function c(m,S,p){const I=typeof p?.zoom<"u"?p.zoom:t.maxZoom,O=t.panZoom;return O?(await O.setViewport({x:t.width/2-m*I,y:t.height/2-S*I,zoom:I},{duration:p?.duration,ease:p?.ease,interpolate:p?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)}function u(m,S){const p=t.panZoom;return p?p.scaleBy(m,S):Promise.resolve(!1)}function l(m){return u(1.2,m)}function d(m){return u(1/1.2,m)}function f(m){const S=t.panZoom;S&&(S.setScaleExtent([m,t.maxZoom]),t.minZoom=m)}function g(m){const S=t.panZoom;S&&(S.setScaleExtent([t.minZoom,m]),t.maxZoom=m)}function v(m){const S=t.panZoom;S&&(S.setTranslateExtent(m),t.translateExtent=m)}function b(m){t.panZoom?.setClickDistance(m)}function w(m,S=null){let p=!1;const I=m.map(O=>(S?S.has(O.id):!0)&&O.selected?(p=!0,{...O,selected:!1}):O);return[p,I]}function x(m){const S=m?.nodes?new Set(m.nodes.map(q=>q.id)):null,[p,I]=w(t.nodes,S);p&&(t.nodes=I);const O=m?.edges?new Set(m.edges.map(q=>q.id)):null,[H,B]=w(t.edges,O);H&&(t.edges=B)}function y(m){const S=t.multiselectionKeyPressed;t.nodes=t.nodes.map(p=>{const I=m.includes(p.id),O=S&&p.selected||I;return!!p.selected!==O?{...p,selected:O}:p}),S||x({nodes:[]})}function N(m){const S=t.multiselectionKeyPressed;t.edges=t.edges.map(p=>{const I=m.includes(p.id),O=S&&p.selected||I;return!!p.selected!==O?{...p,selected:O}:p}),S||x({edges:[]})}function _(m,S,p){const I=t.nodeLookup.get(m);if(!I){console.warn("012",Lt.error012(m));return}t.selectionRect=null,t.selectionRectMode=null,I.selected?(S||I.selected&&t.multiselectionKeyPressed)&&(x({nodes:[I],edges:[]}),requestAnimationFrame(()=>p?.blur())):y([m])}function T(m){const S=t.edgeLookup.get(m);if(!S){console.warn("012",Lt.error012(m));return}(S.selectable||t.elementsSelectable&&typeof S.selectable>"u")&&(t.selectionRect=null,t.selectionRectMode=null,S.selected?S.selected&&t.multiselectionKeyPressed&&x({nodes:[],edges:[S]}):N([m]))}function P(m,S){const{nodeExtent:p,snapGrid:I,nodeOrigin:O,nodeLookup:H,nodesDraggable:B,onerror:q}=t,F=new Map,G=I?.[0]??5,Z=I?.[1]??5,D=m.x*G*S,R=m.y*Z*S;for(const L of H.values()){if(!(L.selected&&(L.draggable||B&&typeof L.draggable>"u")))continue;let K={x:L.internals.positionAbsolute.x+D,y:L.internals.positionAbsolute.y+R};I&&(K=Gt(K,I));const{position:j,positionAbsolute:Q}=zs({nodeId:L.id,nextPosition:K,nodeLookup:H,nodeExtent:p,nodeOrigin:O,onError:q});L.position=j,L.internals.positionAbsolute=Q,F.set(L.id,L)}s(F)}function M(m){return Of({delta:m,panZoom:t.panZoom,transform:[t.viewport.x,t.viewport.y,t.viewport.zoom],translateExtent:t.translateExtent,width:t.width,height:t.height})}const E=m=>{t._connection={...m}};function C(){t._connection=Gr}function A(){t.resetStoreValues(),x()}return Object.assign(t,{setNodeTypes:n,setEdgeTypes:r,addEdge:i,updateNodePositions:s,updateNodeInternals:o,zoomIn:l,zoomOut:d,fitView:a,setCenter:c,setMinZoom:f,setMaxZoom:g,setTranslateExtent:v,setPaneClickDistance:b,unselectNodesAndEdges:x,addSelectedNodes:y,addSelectedEdges:N,handleNodeSelection:_,handleEdgeSelection:T,moveSelectedNodes:P,panBy:M,updateConnection:E,cancelConnection:C,reset:A})}function gh(e,t){const{minZoom:n,maxZoom:r,initialViewport:i,onPanZoomStart:s,onPanZoom:o,onPanZoomEnd:a,translateExtent:c,paneClickDistance:u,setPanZoomInstance:l,onDraggingChange:d,onTransformChange:f}=t,g=jf({domNode:e,minZoom:n,maxZoom:r,translateExtent:c,viewport:i,paneClickDistance:u,onPanZoom:o,onPanZoomStart:s,onPanZoomEnd:a,onDraggingChange:d}),v=g.getViewport();return(i.x!==v.x||i.y!==v.y||i.zoom!==v.zoom)&&f([v.x,v.y,v.zoom]),l(g),g.update(t),{update(b){g.update(b)}}}var mh=se('<div class="svelte-flow__zoom svelte-flow__container"><!></div>');function ph(e,t){ne(t,!0);let n=W(t,"store",15),r=k(()=>n().panActivationKeyPressed||t.panOnDrag),i=k(()=>n().panActivationKeyPressed||t.panOnScroll);const{viewport:s}=n();let o=!1;et(()=>{!o&&n().viewportInitialized&&(t.oninit?.(),o=!0)});var a=mh(),c=J(a);Se(c,()=>t.children),U(a),xe(a,(u,l)=>gh?.(u,l),()=>({viewport:n().viewport,minZoom:n().minZoom,maxZoom:n().maxZoom,initialViewport:s,onDraggingChange:u=>{n(n().dragging=u,!0)},setPanZoomInstance:u=>{n(n().panZoom=u,!0)},onPanZoomStart:t.onmovestart,onPanZoom:t.onmove,onPanZoomEnd:t.onmoveend,zoomOnScroll:t.zoomOnScroll,zoomOnDoubleClick:t.zoomOnDoubleClick,zoomOnPinch:t.zoomOnPinch,panOnScroll:h(i),panOnDrag:h(r),panOnScrollSpeed:t.panOnScrollSpeed,panOnScrollMode:t.panOnScrollMode,zoomActivationKeyPressed:n().zoomActivationKeyPressed,preventScrolling:typeof t.preventScrolling=="boolean"?t.preventScrolling:!0,noPanClassName:n().noPanClass,noWheelClassName:n().noWheelClass,userSelectionActive:!!n().selectionRect,translateExtent:n().translateExtent,lib:"svelte",paneClickDistance:t.paneClickDistance,onTransformChange:u=>{n(n().viewport={x:u[0],y:u[1],zoom:u[2]},!0)},connectionInProgress:n().connection.inProgress})),X(e,a),re()}function ji(e,t){return n=>{n.target===t&&e?.(n)}}function Wi(e){return t=>{const n=e.has(t.id);return!!t.selected!==n?{...t,selected:n}:t}}function Xi(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var vh=se("<div><!></div>");function yh(e,t){ne(t,!0);let n=W(t,"store",15),r=W(t,"panOnDrag",3,!0),i,s=null,o=new Set,a=new Set,c=k(()=>n().panActivationKeyPressed||r()),u=k(()=>n().selectionKeyPressed||n().selectionRect||t.selectionOnDrag&&h(c)!==!0),l=k(()=>n().elementsSelectable&&(h(u)||n().selectionRectMode==="user")),d=!1;function f(M){if(d||n().connection.inProgress){d=!1;return}t.onpaneclick?.({event:M}),n().unselectNodesAndEdges(),n(n().selectionRectMode=null,!0)}function g(M){s=i?.getBoundingClientRect();const E=M.target!==i&&!!M.target.closest(".nokey"),C=t.selectionOnDrag&&i===M.target||!t.selectionOnDrag||n().selectionKeyPressed;if(!n().elementsSelectable||!h(u)||M.button!==0||!s||E||!C||!M.isPrimary)return;M.stopPropagation(),M.preventDefault(),M.target?.setPointerCapture?.(M.pointerId);const{x:A,y:z}=Me(M,s);n().unselectNodesAndEdges(),n(n().selectionRect={width:0,height:0,startX:A,startY:z,x:A,y:z},!0),t.onselectionstart?.(M)}function v(M){if(!h(u)||!s||!n().selectionRect)return;d=!0;const E=Me(M,s),{startX:C=0,startY:A=0}=n().selectionRect,z={...n().selectionRect,x:E.x<C?E.x:C,y:E.y<A?E.y:A,width:Math.abs(E.x-C),height:Math.abs(E.y-A)},m=o,S=a;o=new Set(lo(n().nodeLookup,z,[n().viewport.x,n().viewport.y,n().viewport.zoom],n().selectionMode===vn.Partial,!0).map(I=>I.id));const p=n().defaultEdgeOptions.selectable??!0;a=new Set;for(const I of o){const O=n().connectionLookup.get(I);if(O)for(const{edgeId:H}of O.values()){const B=n().edgeLookup.get(H);B&&(B.selectable??p)&&a.add(H)}}Xi(m,o)||n(n().nodes=n().nodes.map(Wi(o)),!0),Xi(S,a)||n(n().edges=n().edges.map(Wi(a)),!0),n(n().selectionRectMode="user",!0),n(n().selectionRect=z,!0)}function b(M){M.button===0&&(M.target?.releasePointerCapture?.(M.pointerId),!h(u)&&n().selectionRectMode==="user"&&M.target===i&&f?.(M),n(n().selectionRect=null,!0),o.size>0&&n(n().selectionRectMode="nodes",!0),n().selectionKeyPressed&&(d=!1),t.onselectionend?.(M))}const w=M=>{if(Array.isArray(h(c))&&h(c).includes(2)){M.preventDefault();return}t.onpanecontextmenu?.({event:M})},x=M=>{(t.selectionOnDrag&&i===M.target||!t.selectionOnDrag||n().selectionKeyPressed)&&M.stopPropagation()};var y=vh();let N;var _=k(()=>h(l)?void 0:ji(f,i));y.__click=function(...M){h(_)?.apply(this,M)},y.__pointermove=function(...M){(h(l)?v:void 0)?.apply(this,M)},y.__pointerup=function(...M){(h(l)?b:void 0)?.apply(this,M)};var T=k(()=>ji(w,i));y.__contextmenu=function(...M){h(T)?.apply(this,M)};var P=J(y);Se(P,()=>t.children),U(y),Bt(y,M=>i=M,()=>i),de(M=>N=Ue(y,1,"svelte-flow__pane svelte-flow__container",null,N,M),[()=>({draggable:r()===!0||Array.isArray(r())&&r().includes(0),dragging:n().dragging,selection:h(u)})]),an("pointerdown",y,function(...M){(h(l)?g:void 0)?.apply(this,M)},!0),an("click",y,function(...M){(h(l)?x:void 0)?.apply(this,M)},!0),X(e,y),re()}Ji(["click","pointermove","pointerup","contextmenu"]);var wh=se('<div class="svelte-flow__viewport xyflow__viewport svelte-flow__container"><!></div>');function bh(e,t){ne(t,!0);var n=wh();let r;var i=J(n);Se(i,()=>t.children),U(n),de(s=>r=Le(n,"",r,s),[()=>({transform:`translate(${t.store.viewport.x??""}px, ${t.store.viewport.y??""}px) scale(${t.store.viewport.zoom??""})`})]),X(e,n),re()}function ia(e,t){const{store:n,onDrag:r,onDragStart:i,onDragStop:s,onNodeMouseDown:o}=t,a=Tf({onDrag:r,onDragStart:i,onDragStop:s,onNodeMouseDown:o,getStoreItems:()=>{const{snapGrid:u,viewport:l}=n;return{nodes:n.nodes,nodeLookup:n.nodeLookup,edges:n.edges,nodeExtent:n.nodeExtent,snapGrid:u||[0,0],snapToGrid:!!u,nodeOrigin:n.nodeOrigin,multiSelectionActive:n.multiselectionKeyPressed,domNode:n.domNode,transform:[l.x,l.y,l.zoom],autoPanOnNodeDrag:n.autoPanOnNodeDrag,nodesDraggable:n.nodesDraggable,selectNodesOnDrag:n.selectNodesOnDrag,nodeDragThreshold:n.nodeDragThreshold,unselectNodesAndEdges:n.unselectNodesAndEdges,updateNodePositions:n.updateNodePositions,onSelectionDrag:n.onselectiondrag,onSelectionDragStart:n.onselectiondragstart,onSelectionDragStop:n.onselectiondragstop,panBy:n.panBy}}});function c(u,l){if(l.disabled){a.destroy();return}a.update({domNode:u,noDragClassName:l.noDragClass,handleSelector:l.handleSelector,nodeId:l.nodeId,isSelectable:l.isSelectable,nodeClickDistance:l.nodeClickDistance})}return c(e,t),{update(u){c(e,u)},destroy(){a.destroy()}}}var xh=se('<div aria-live="assertive" aria-atomic="true" class="a11y-live-msg svelte-gvaja3"> </div>'),_h=se('<div class="a11y-hidden svelte-gvaja3"> </div> <div class="a11y-hidden svelte-gvaja3"> </div> <!>',1);function Eh(e,t){ne(t,!0);var n=_h(),r=ue(n),i=J(r,!0);U(r);var s=ee(r,2),o=J(s,!0);U(s);var a=ee(s,2);{var c=u=>{var l=xh(),d=J(l,!0);U(l),de(()=>{ie(l,"id",`${kh}-${t.store.flowId}`),ve(d,t.store.ariaLiveMessage)}),X(u,l)};he(a,u=>{t.store.disableKeyboardA11y||u(c)})}de(()=>{ie(r,"id",`${sa}-${t.store.flowId}`),ve(i,t.store.disableKeyboardA11y?t.store.ariaLabelConfig["node.a11yDescription.default"]:t.store.ariaLabelConfig["node.a11yDescription.keyboardDisabled"]),ie(s,"id",`${aa}-${t.store.flowId}`),ve(o,t.store.ariaLabelConfig["edge.a11yDescription.default"])}),X(e,n),re()}const sa="svelte-flow__node-desc",aa="svelte-flow__edge-desc",kh="svelte-flow__aria-live";var Ch=se("<div><!></div>");function Nh(e,t){ne(t,!0);let n=W(t,"store",15),r=k(()=>we(t.node.data,()=>({}),!0)),i=k(()=>we(t.node.selected,!1)),s=k(()=>t.node.draggable),o=k(()=>t.node.selectable),a=k(()=>we(t.node.deletable,!0)),c=k(()=>t.node.connectable),u=k(()=>t.node.focusable),l=k(()=>we(t.node.hidden,!1)),d=k(()=>we(t.node.dragging,!1)),f=k(()=>we(t.node.style,"")),g=k(()=>t.node.class),v=k(()=>we(t.node.type,"default")),b=k(()=>t.node.parentId),w=k(()=>t.node.sourcePosition),x=k(()=>t.node.targetPosition),y=k(()=>we(t.node.measured,()=>({width:0,height:0}),!0).width),N=k(()=>we(t.node.measured,()=>({width:0,height:0}),!0).height),_=k(()=>t.node.initialWidth),T=k(()=>t.node.initialHeight),P=k(()=>t.node.width),M=k(()=>t.node.height),E=k(()=>t.node.dragHandle),C=k(()=>we(t.node.internals.z,0)),A=k(()=>t.node.internals.positionAbsolute.x),z=k(()=>t.node.internals.positionAbsolute.y),m=k(()=>t.node.internals.userNode),{id:S}=t.node,p=k(()=>h(s)??n().nodesDraggable),I=k(()=>h(o)??n().elementsSelectable),O=k(()=>h(c)??n().nodesConnectable),H=k(()=>of(t.node)),B=k(()=>!!t.node.internals.handleBounds),q=k(()=>h(H)&&h(B)),F=k(()=>h(u)??n().nodesFocusable);function G(ce){return n().parentLookup.has(ce)}let Z=k(()=>G(S)),D=fe(null),R=null,L=h(v),V=h(w),K=h(x),j=k(()=>n().nodeTypes[h(v)]??ta),Q=k(()=>n().ariaLabelConfig);ln("svelteflow__node_connectable",{get value(){return h(O)}}),ln("svelteflow__node_id",S);let ae=k(()=>{const ce=h(y)===void 0?h(P)??h(_):h(P),ye=h(N)===void 0?h(M)??h(T):h(M);if(!(ce===void 0&&ye===void 0&&h(f)===void 0))return`${h(f)};${ce?`width:${He(ce)};`:""}${ye?`height:${He(ye)};`:""}`});et(()=>{(h(v)!==L||h(w)!==V||h(x)!==K)&&h(D)!==null&&requestAnimationFrame(()=>{h(D)!==null&&n().updateNodeInternals(new Map([[S,{id:S,nodeElement:h(D),force:!0}]]))}),L=h(v),V=h(w),K=h(x)}),et(()=>{t.resizeObserver&&(!h(q)||h(D)!==R)&&(R&&t.resizeObserver.unobserve(R),h(D)&&t.resizeObserver.observe(h(D)),R=h(D))}),Zr(()=>{R&&t.resizeObserver?.unobserve(R)});function oe(ce){h(I)&&(!n().selectNodesOnDrag||!h(p)||n().nodeDragThreshold>0)&&n().handleNodeSelection(S),t.onnodeclick?.({node:h(m),event:ce})}function te(ce){if(!(Bs(ce)||n().disableKeyboardA11y))if(As.includes(ce.key)&&h(I)){const ye=ce.key==="Escape";n().handleNodeSelection(S,ye,h(D))}else h(p)&&t.node.selected&&Object.prototype.hasOwnProperty.call(xn,ce.key)&&(ce.preventDefault(),n(n().ariaLiveMessage=h(Q)["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~t.node.internals.positionAbsolute.x,y:~~t.node.internals.positionAbsolute.y}),!0),n().moveSelectedNodes(xn[ce.key],ce.shiftKey?4:1))}const ge=()=>{if(n().disableKeyboardA11y||!n().autoPanOnNodeFocus||!h(D)?.matches(":focus-visible"))return;const{width:ce,height:ye,viewport:ct}=n();lo(new Map([[S,t.node]]),{x:0,y:0,width:ce,height:ye},[ct.x,ct.y,ct.zoom],!0).length>0||n().setCenter(t.node.position.x+(t.node.measured.width??0)/2,t.node.position.y+(t.node.measured.height??0)/2,{zoom:ct.zoom})};var qe=Ne(),Ge=ue(qe);{var lt=ce=>{var ye=Ch();Ze(ye,(be,je)=>({"data-id":S,class:["svelte-flow__node",`svelte-flow__node-${h(v)}`,h(g)],style:h(ae),onclick:oe,onpointerenter:t.onnodepointerenter?Ee=>t.onnodepointerenter({node:h(m),event:Ee}):void 0,onpointerleave:t.onnodepointerleave?Ee=>t.onnodepointerleave({node:h(m),event:Ee}):void 0,onpointermove:t.onnodepointermove?Ee=>t.onnodepointermove({node:h(m),event:Ee}):void 0,oncontextmenu:t.onnodecontextmenu?Ee=>t.onnodecontextmenu({node:h(m),event:Ee}):void 0,onkeydown:h(F)?te:void 0,onfocus:h(F)?ge:void 0,tabIndex:h(F)?0:void 0,role:t.node.ariaRole??(h(F)?"group":void 0),"aria-roledescription":"node","aria-describedby":n().disableKeyboardA11y?void 0:`${sa}-${n().flowId}`,...t.node.domAttributes,[Ur]:be,[_n]:je}),[()=>({dragging:h(d),selected:h(i),draggable:h(p),connectable:h(O),selectable:h(I),nopan:h(p),parent:h(Z)}),()=>({"z-index":h(C),transform:`translate(${h(A)??""}px, ${h(z)??""}px)`,visibility:h(H)?"visible":"hidden"})]);var ct=J(ye);Qr(ct,()=>h(j),(be,je)=>{je(be,{get data(){return h(r)},get id(){return S},get selected(){return h(i)},get selectable(){return h(I)},get deletable(){return h(a)},get sourcePosition(){return h(w)},get targetPosition(){return h(x)},get zIndex(){return h(C)},get dragging(){return h(d)},get draggable(){return h(p)},get dragHandle(){return h(E)},get parentId(){return h(b)},get type(){return h(v)},get isConnectable(){return h(O)},get positionAbsoluteX(){return h(A)},get positionAbsoluteY(){return h(z)},get width(){return h(P)},get height(){return h(M)}})}),U(ye),xe(ye,(be,je)=>ia?.(be,je),()=>({nodeId:S,isSelectable:h(I),disabled:!h(p),handleSelector:h(E),noDragClass:n().noDragClass,nodeClickDistance:t.nodeClickDistance,onNodeMouseDown:n().handleNodeSelection,onDrag:(be,je,Ee,Nt)=>{t.onnodedrag?.({event:be,targetNode:Ee,nodes:Nt})},onDragStart:(be,je,Ee,Nt)=>{t.onnodedragstart?.({event:be,targetNode:Ee,nodes:Nt})},onDragStop:(be,je,Ee,Nt)=>{t.onnodedragstop?.({event:be,targetNode:Ee,nodes:Nt})},store:n()})),Bt(ye,be=>Y(D,be),()=>h(D)),X(ce,ye)};he(Ge,ce=>{h(l)||ce(lt)})}X(e,qe),re()}var Sh=se('<div class="svelte-flow__nodes"></div>');function Ph(e,t){ne(t,!0);let n=W(t,"store",15);const r=typeof ResizeObserver>"u"?null:new ResizeObserver(s=>{const o=new Map;s.forEach(a=>{const c=a.target.getAttribute("data-id");o.set(c,{id:c,nodeElement:a.target,force:!0})}),n().updateNodeInternals(o)});Zr(()=>{r?.disconnect()});var i=Sh();En(i,21,()=>n().visible.nodes.values(),s=>s.id,(s,o)=>{Nh(s,{get node(){return h(o)},get resizeObserver(){return r},get nodeClickDistance(){return t.nodeClickDistance},get onnodeclick(){return t.onnodeclick},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get onnodecontextmenu(){return t.onnodecontextmenu},get store(){return n()},set store(a){n(a)}})}),U(i),X(e,i),re()}var Oh=pe('<svg class="svelte-flow__edge-wrapper"><g><!></g></svg>');function Mh(e,t){ne(t,!0);let n=k(()=>t.edge.source),r=k(()=>t.edge.target),i=k(()=>t.edge.sourceX),s=k(()=>t.edge.sourceY),o=k(()=>t.edge.targetX),a=k(()=>t.edge.targetY),c=k(()=>t.edge.sourcePosition),u=k(()=>t.edge.targetPosition),l=k(()=>we(t.edge.animated,!1)),d=k(()=>we(t.edge.selected,!1)),f=k(()=>t.edge.label),g=k(()=>t.edge.labelStyle),v=k(()=>we(t.edge.data,()=>({}),!0)),b=k(()=>t.edge.style),w=k(()=>t.edge.interactionWidth),x=k(()=>we(t.edge.type,"default")),y=k(()=>t.edge.sourceHandle),N=k(()=>t.edge.targetHandle),_=k(()=>t.edge.markerStart),T=k(()=>t.edge.markerEnd),P=k(()=>t.edge.selectable),M=k(()=>t.edge.focusable),E=k(()=>we(t.edge.deletable,!0)),C=k(()=>t.edge.hidden),A=k(()=>t.edge.zIndex),z=k(()=>t.edge.class),m=k(()=>t.edge.ariaLabel),S=null;const{id:p}=t.edge;ln("svelteflow__edge_id",p);let I=k(()=>h(P)??t.store.elementsSelectable),O=k(()=>h(M)??t.store.edgesFocusable),H=k(()=>t.store.edgeTypes[h(x)]??na),B=k(()=>h(_)?`url('#${Wr(h(_),t.store.flowId)}')`:void 0),q=k(()=>h(T)?`url('#${Wr(h(T),t.store.flowId)}')`:void 0);function F(V){const K=t.store.edgeLookup.get(p);K&&(h(I)&&t.store.handleEdgeSelection(p),t.onedgeclick?.({event:V,edge:K}))}function G(V,K){const j=t.store.edgeLookup.get(p);j&&K({event:V,edge:j})}function Z(V){if(!t.store.disableKeyboardA11y&&As.includes(V.key)&&h(I)){const{unselectNodesAndEdges:K,addSelectedEdges:j}=t.store;V.key==="Escape"?(S?.blur(),K({edges:[t.edge]})):j([p])}}var D=Ne(),R=ue(D);{var L=V=>{var K=Oh();let j;var Q=J(K);Ze(Q,ae=>({class:["svelte-flow__edge",h(z)],"data-id":p,onclick:F,oncontextmenu:t.onedgecontextmenu?oe=>{G(oe,t.onedgecontextmenu)}:void 0,onpointerenter:t.onedgepointerenter?oe=>{G(oe,t.onedgepointerenter)}:void 0,onpointerleave:t.onedgepointerleave?oe=>{G(oe,t.onedgepointerleave)}:void 0,"aria-label":h(m)===null?void 0:h(m)?h(m):`Edge from ${h(n)} to ${h(r)}`,"aria-describedby":h(O)?`${aa}-${t.store.flowId}`:void 0,role:t.edge.ariaRole??(h(O)?"group":"img"),"aria-roledescription":"edge",onkeydown:h(O)?Z:void 0,tabindex:h(O)?0:void 0,...t.edge.domAttributes,[Ur]:ae}),[()=>({animated:h(l),selected:h(d),selectable:h(I)})]);var le=J(Q);Qr(le,()=>h(H),(ae,oe)=>{oe(ae,{get id(){return p},get source(){return h(n)},get target(){return h(r)},get sourceX(){return h(i)},get sourceY(){return h(s)},get targetX(){return h(o)},get targetY(){return h(a)},get sourcePosition(){return h(c)},get targetPosition(){return h(u)},get animated(){return h(l)},get selected(){return h(d)},get label(){return h(f)},get labelStyle(){return h(g)},get data(){return h(v)},get style(){return h(b)},get interactionWidth(){return h(w)},get selectable(){return h(I)},get deletable(){return h(E)},get type(){return h(x)},get sourceHandleId(){return h(y)},get targetHandleId(){return h(N)},get markerStart(){return h(B)},get markerEnd(){return h(q)}})}),U(Q),Bt(Q,ae=>S=ae,()=>S),U(K),de(ae=>j=Le(K,"",j,ae),[()=>({"z-index":h(A)})]),X(V,K)};he(R,V=>{h(C)||V(L)})}X(e,D),re()}var Ih=pe("<defs></defs>");function Dh(e,t){ne(t,!1);const n=at();Ea();var r=Ih();En(r,5,()=>n.markers,i=>i.id,(i,s)=>{zh(i,dt(()=>h(s)))}),U(r),X(e,r),re()}var Th=pe('<polyline class="arrow" fill="none" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4"></polyline>'),Ah=pe('<polyline class="arrowclosed" stroke-linecap="round" stroke-linejoin="round" points="-5,-4 0,0 -5,4 -5,-4"></polyline>'),Rh=pe('<marker class="svelte-flow__arrowhead" viewBox="-10 -10 20 20" refX="0" refY="0"><!></marker>');function zh(e,t){ne(t,!0);let n=W(t,"width",3,12.5),r=W(t,"height",3,12.5),i=W(t,"markerUnits",3,"strokeWidth"),s=W(t,"orient",3,"auto-start-reverse"),o=W(t,"color",3,"none");var a=Rh(),c=J(a);{var u=d=>{var f=Th();let g;de(v=>{ie(f,"stroke-width",t.strokeWidth),g=Le(f,"",g,v)},[()=>({stroke:o()})]),X(d,f)},l=d=>{var f=Ne(),g=ue(f);{var v=b=>{var w=Ah();let x;de(y=>{ie(w,"stroke-width",t.strokeWidth),x=Le(w,"",x,y)},[()=>({stroke:o(),fill:o()})]),X(b,w)};he(g,b=>{t.type===bt.ArrowClosed&&b(v)},!0)}X(d,f)};he(c,d=>{t.type===bt.Arrow?d(u):d(l,!1)})}U(a),de(()=>{ie(a,"id",t.id),ie(a,"markerWidth",`${n()}`),ie(a,"markerHeight",`${r()}`),ie(a,"markerUnits",i()),ie(a,"orient",s())}),X(e,a),re()}var Lh=se('<div class="svelte-flow__edges"><svg class="svelte-flow__marker"><!></svg> <!></div>');function Hh(e,t){ne(t,!0);let n=W(t,"store",15);var r=Lh(),i=J(r),s=J(i);Dh(s,{}),U(i);var o=ee(i,2);En(o,17,()=>n().visible.edges.values(),a=>a.id,(a,c)=>{Mh(a,{get edge(){return h(c)},get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return n()},set store(u){n(u)}})}),U(r),X(e,r),re()}var Vh=se('<div class="svelte-flow__selection svelte-y6l0nj"></div>');function la(e,t){ne(t,!0);let n=W(t,"x",3,0),r=W(t,"y",3,0),i=W(t,"width",3,0),s=W(t,"height",3,0),o=W(t,"isVisible",3,!0);var a=Ne(),c=ue(a);{var u=l=>{var d=Vh();let f;de(g=>f=Le(d,"",f,g),[()=>({width:typeof i()=="string"?i():He(i()),height:typeof s()=="string"?s():He(s()),transform:`translate(${n()}px, ${r()}px)`})]),X(l,d)};he(c,l=>{o()&&l(u)})}X(e,a),re()}function qh(e,t){const n=t.store.nodes.filter(r=>r.selected);t.onselectioncontextmenu?.({nodes:n,event:e})}function Bh(e,t){const n=t.store.nodes.filter(r=>r.selected);t.onselectionclick?.({nodes:n,event:e})}var Fh=se("<div><!></div>");function Kh(e,t){ne(t,!0);let n=fe(void 0);et(()=>{t.store.disableKeyboardA11y||h(n)?.focus({preventScroll:!0})});let r=k(()=>t.store.selectionRectMode==="nodes"?(t.store.nodes,On(t.store.nodeLookup,{filter:c=>!!c.selected})):null);function i(c){Object.prototype.hasOwnProperty.call(xn,c.key)&&(c.preventDefault(),t.store.moveSelectedNodes(xn[c.key],c.shiftKey?4:1))}var s=Ne(),o=ue(s);{var a=c=>{var u=Fh();u.__contextmenu=[qh,t],u.__click=[Bh,t],u.__keydown=function(...f){(t.store.disableKeyboardA11y?void 0:i)?.apply(this,f)};let l;var d=J(u);la(d,{width:"100%",height:"100%",x:0,y:0}),U(u),xe(u,(f,g)=>ia?.(f,g),()=>({disabled:!1,store:t.store,onDrag:(f,g,v,b)=>{t.onnodedrag?.({event:f,targetNode:null,nodes:b})},onDragStart:(f,g,v,b)=>{t.onnodedragstart?.({event:f,targetNode:null,nodes:b})},onDragStop:(f,g,v,b)=>{t.onnodedragstop?.({event:f,targetNode:null,nodes:b})}})),Bt(u,f=>Y(n,f),()=>h(n)),de(f=>{Ue(u,1,Ct(["svelte-flow__selection-wrapper",t.store.noPanClass]),"svelte-13vgx7"),ie(u,"role",t.store.disableKeyboardA11y?void 0:"button"),ie(u,"tabindex",t.store.disableKeyboardA11y?void 0:-1),l=Le(u,"",l,f)},[()=>({width:He(h(r).width),height:He(h(r).height),transform:`translate(${h(r).x??""}px, ${h(r).y??""}px)`})]),X(c,u)};he(o,c=>{t.store.selectionRectMode==="nodes"&&h(r)&&Ke(h(r).x)&&Ke(h(r).y)&&c(a)})}X(e,s),re()}Ji(["contextmenu","click","keydown"]);function Yh(e){switch(e){case"ctrl":return 8;case"shift":return 4;case"alt":return 2;case"meta":return 1}}function Te(e,t){let{enabled:n=!0,trigger:r,type:i="keydown"}=t;function s(a){const c=Array.isArray(r)?r:[r],u=[a.metaKey,a.altKey,a.shiftKey,a.ctrlKey].reduce((l,d,f)=>d?l|1<<f:l,0);for(const l of c){const d={preventDefault:!1,enabled:!0,...l},{modifier:f,key:g,callback:v,preventDefault:b,enabled:w}=d;if(w){if(a.key!==g)continue;if(f===null||f===!1){if(u!==0)continue}else if(f!==void 0&&f?.[0]?.length>0){const y=Array.isArray(f)?f:[f];let N=!1;for(const _ of y)if((Array.isArray(_)?_:[_]).reduce((P,M)=>P|Yh(M),0)===u){N=!0;break}if(!N)continue}b&&a.preventDefault();const x={node:e,trigger:d,originalEvent:a};e.dispatchEvent(new CustomEvent("shortcut",{detail:x})),v?.(x)}}}let o;return n&&(o=mo(e,i,s)),{update:a=>{const{enabled:c=!0,type:u="keydown"}=a;n&&(!c||i!==u)?o?.():!n&&c&&(o=mo(e,u,s)),n=c,i=u,r=a.trigger},destroy:()=>{o?.()}}}function Gh(){const e=k(at),t=s=>{const o=Yi(s)?s:h(e).nodeLookup.get(s.id),a=o.parentId?sf(o.position,o.measured,o.parentId,h(e).nodeLookup,h(e).nodeOrigin):o.position,c={...o,position:a,width:o.measured?.width??o.width,height:o.measured?.height??o.height};return _t(c)};function n(s,o,a={replace:!1}){h(e).nodes=Qe(()=>h(e).nodes).map(c=>{if(c.id===s){const u=typeof o=="function"?o(c):o;return a?.replace&&Yi(u)?u:{...c,...u}}return c})}function r(s,o,a={replace:!1}){h(e).edges=Qe(()=>h(e).edges).map(c=>{if(c.id===s){const u=typeof o=="function"?o(c):o;return a.replace&&nh(u)?u:{...c,...u}}return c})}const i=s=>h(e).nodeLookup.get(s);return{zoomIn:h(e).zoomIn,zoomOut:h(e).zoomOut,getInternalNode:i,getNode:s=>i(s)?.internals.userNode,getNodes:s=>s===void 0?h(e).nodes:Zi(h(e).nodeLookup,s),getEdge:s=>h(e).edgeLookup.get(s),getEdges:s=>s===void 0?h(e).edges:Zi(h(e).edgeLookup,s),setZoom:(s,o)=>{const a=h(e).panZoom;return a?a.scaleTo(s,{duration:o?.duration}):Promise.resolve(!1)},getZoom:()=>h(e).viewport.zoom,setViewport:async(s,o)=>{const a=h(e).viewport;return h(e).panZoom?(await h(e).panZoom.setViewport({x:s.x??a.x,y:s.y??a.y,zoom:s.zoom??a.zoom},o),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>$i(h(e).viewport),setCenter:async(s,o,a)=>h(e).setCenter(s,o,a),fitView:s=>h(e).fitView(s),fitBounds:async(s,o)=>{if(!h(e).panZoom)return Promise.resolve(!1);const a=co(s,h(e).width,h(e).height,h(e).minZoom,h(e).maxZoom,o?.padding??.1);return await h(e).panZoom.setViewport(a,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)},getIntersectingNodes:(s,o=!0,a)=>{const c=Di(s),u=c?s:t(s);return u?(a||h(e).nodes).filter(l=>{const d=h(e).nodeLookup.get(l.id);if(!d||!c&&l.id===s.id)return!1;const f=_t(d),g=Ht(f,u);return o&&g>0||g>=f.width*f.height||g>=u.width*u.height}):[]},isNodeIntersecting:(s,o,a=!0)=>{const u=Di(s)?s:t(s);if(!u)return!1;const l=Ht(u,o);return a&&l>0||l>=o.width*o.height||l>=u.width*u.height},deleteElements:async({nodes:s=[],edges:o=[]})=>{const{nodes:a,edges:c}=await $d({nodesToRemove:s,edgesToRemove:o,nodes:h(e).nodes,edges:h(e).edges,onBeforeDelete:h(e).onbeforedelete});return a&&(h(e).nodes=Qe(()=>h(e).nodes).filter(u=>!a.some(({id:l})=>l===u.id))),c&&(h(e).edges=Qe(()=>h(e).edges).filter(u=>!c.some(({id:l})=>l===u.id))),(a.length>0||c.length>0)&&h(e).ondelete?.({nodes:a,edges:c}),{deletedNodes:a,deletedEdges:c}},screenToFlowPosition:(s,o={snapToGrid:!0})=>{if(!h(e).domNode)return s;const a=o.snapToGrid?h(e).snapGrid:!1,{x:c,y:u,zoom:l}=h(e).viewport,{x:d,y:f}=h(e).domNode.getBoundingClientRect(),g={x:s.x-d,y:s.y-f};return jt(g,[c,u,l],a!==null,a||[1,1])},flowToScreenPosition:s=>{if(!h(e).domNode)return s;const{x:o,y:a,zoom:c}=h(e).viewport,{x:u,y:l}=h(e).domNode.getBoundingClientRect(),d=wn(s,[o,a,c]);return{x:d.x+u,y:d.y+l}},toObject:()=>structuredClone({nodes:[...h(e).nodes],edges:[...h(e).edges],viewport:{...h(e).viewport}}),updateNode:n,updateNodeData:(s,o,a)=>{const c=h(e).nodeLookup.get(s)?.internals.userNode;if(!c)return;const u=typeof o=="function"?o(c):o;n(s,l=>({...l,data:a?.replace?u:{...l.data,...u}}))},updateEdge:r,getNodesBounds:s=>Zd(s,{nodeLookup:h(e).nodeLookup,nodeOrigin:h(e).nodeOrigin}),getHandleConnections:({type:s,id:o,nodeId:a})=>Array.from(h(e).connectionLookup.get(`${a}-${s}-${o??null}`)?.values()??[])}}function Zi(e,t){const n=[];for(const r of t){const i=e.get(r);if(i){const s="internals"in i?i.internals?.userNode:i;n.push(s)}}return n}function jh(e,t){ne(t,!0);let n=W(t,"store",15),r=W(t,"selectionKey",3,"Shift"),i=W(t,"multiSelectionKey",19,()=>bn()?"Meta":"Control"),s=W(t,"deleteKey",3,"Backspace"),o=W(t,"panActivationKey",3," "),a=W(t,"zoomActivationKey",19,()=>bn()?"Meta":"Control"),{deleteElements:c}=Gh();function u(b){return b!==null&&typeof b=="object"}function l(b){return u(b)?b.modifier||[]:[]}function d(b){return b==null?"":u(b)?b.key:b}function f(b,w){return(Array.isArray(b)?b:[b]).map(y=>{const N=d(y);return{key:N,modifier:l(y),enabled:N!==null,callback:w}})}function g(){n(n().selectionRect=null,!0),n(n().selectionKeyPressed=!1,!0),n(n().multiselectionKeyPressed=!1,!0),n(n().deleteKeyPressed=!1,!0),n(n().panActivationKeyPressed=!1,!0),n(n().zoomActivationKeyPressed=!1,!0)}function v(){const b=n().nodes.filter(x=>x.selected),w=n().edges.filter(x=>x.selected);c({nodes:b,edges:w})}an("blur",Ce,g),an("contextmenu",Ce,g),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!0,!0)),type:"keydown"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(r(),()=>n(n().selectionKeyPressed=!1,!0)),type:"keyup"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(i(),()=>{n(n().multiselectionKeyPressed=!0,!0)}),type:"keydown"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(i(),()=>n(n().multiselectionKeyPressed=!1,!0)),type:"keyup"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(s(),b=>{!(b.originalEvent.ctrlKey||b.originalEvent.metaKey||b.originalEvent.shiftKey)&&!Bs(b.originalEvent)&&(n(n().deleteKeyPressed=!0,!0),v())}),type:"keydown"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(s(),()=>n(n().deleteKeyPressed=!1,!0)),type:"keyup"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(o(),()=>n(n().panActivationKeyPressed=!0,!0)),type:"keydown"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(o(),()=>n(n().panActivationKeyPressed=!1,!0)),type:"keyup"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!0,!0)),type:"keydown"})),xe(Ce,(b,w)=>Te?.(b,w),()=>({trigger:f(a(),()=>n(n().zoomActivationKeyPressed=!1,!0)),type:"keyup"})),re()}var Wh=pe('<path fill="none" class="svelte-flow__connection-path"></path>'),Xh=pe('<svg class="svelte-flow__connectionline"><g><!></g></svg>');function Zh(e,t){ne(t,!0);let n=k(()=>{if(!t.store.connection.inProgress)return"";const o={sourceX:t.store.connection.from.x,sourceY:t.store.connection.from.y,sourcePosition:t.store.connection.fromPosition,targetX:t.store.connection.to.x,targetY:t.store.connection.to.y,targetPosition:t.store.connection.toPosition};switch(t.type){case We.Bezier:{const[a]=Ks(o);return a}case We.Straight:{const[a]=Gs(o);return a}case We.Step:case We.SmoothStep:{const[a]=uo({...o,borderRadius:t.type===We.Step?0:void 0});return a}}});var r=Ne(),i=ue(r);{var s=o=>{var a=Xh(),c=J(a),u=J(c);{var l=f=>{var g=Ne(),v=ue(g);Qr(v,()=>t.LineComponent,(b,w)=>{w(b,{})}),X(f,g)},d=f=>{var g=Wh();de(()=>{ie(g,"d",h(n)),Le(g,t.style)}),X(f,g)};he(u,f=>{t.LineComponent?f(l):f(d,!1)})}U(c),U(a),de(f=>{ie(a,"width",t.store.width),ie(a,"height",t.store.height),Le(a,t.containerStyle),Ue(c,0,f)},[()=>Ct(["svelte-flow__connection",Wd(t.store.connection.isValid)])]),X(o,a)};he(i,o=>{t.store.connection.inProgress&&o(s)})}X(e,r),re()}var Uh=se("<div><!></div>");function ca(e,t){ne(t,!0);let n=W(t,"position",3,"top-right"),r=it(t,["$$slots","$$events","$$legacy","position","style","class","children"]),i=k(()=>`${n()}`.split("-"));var s=Uh();Ze(s,a=>({class:a,style:t.style,...r}),[()=>["svelte-flow__panel",t.class,...h(i)]]);var o=J(s);Se(o,()=>t.children??kt),U(s),X(e,s),re()}var Qh=se('<a href="https://svelteflow.dev" target="_blank" rel="noopener noreferrer" aria-label="Svelte Flow attribution">Svelte Flow</a>');function Jh(e,t){ne(t,!0);let n=W(t,"position",3,"bottom-right");var r=Ne(),i=ue(r);{var s=o=>{ca(o,{get position(){return n()},class:"svelte-flow__attribution","data-message":"Feel free to remove the attribution or check out how you could support us: https://svelteflow.dev/support-us",children:(a,c)=>{var u=Qh();X(a,u)},$$slots:{default:!0}})};he(i,o=>{t.proOptions?.hideAttribution||o(s)})}X(e,r),re()}var $h=se("<div><!></div>");function eg(e,t){ne(t,!0);let n=W(t,"domNode",15),r=W(t,"clientWidth",15),i=W(t,"clientHeight",15),s=k(()=>t.rest.class),o=k(()=>ya(t.rest,["id","class","nodeTypes","edgeTypes","colorMode","isValidConnection","onmove","onmovestart","onmoveend","onflowerror","ondelete","onbeforedelete","onbeforeconnect","onconnect","onconnectstart","onconnectend","onbeforereconnect","onreconnect","onreconnectstart","onreconnectend","onclickconnectstart","onclickconnectend","oninit","onselectionchange","onselectiondragstart","onselectiondrag","onselectiondragstop","onselectionstart","onselectionend","clickConnect","fitView","fitViewOptions","nodeOrigin","nodeDragThreshold","connectionDragThreshold","minZoom","maxZoom","initialViewport","connectionRadius","connectionMode","selectionMode","selectNodesOnDrag","snapGrid","defaultMarkerColor","translateExtent","nodeExtent","onlyRenderVisibleElements","autoPanOnConnect","autoPanOnNodeDrag","colorModeSSR","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","elementsSelectable","nodesFocusable","edgesFocusable","disableKeyboardA11y","noDragClass","noPanClass","noWheelClass","ariaLabelConfig","autoPanSpeed","panOnScrollSpeed"]));function a(l){l.currentTarget.scrollTo({top:0,left:0,behavior:"auto"}),t.rest.onscroll&&t.rest.onscroll(l)}var c=$h();Ze(c,l=>({class:["svelte-flow","svelte-flow__container",h(s),t.colorMode],"data-testid":"svelte-flow__wrapper",role:"application",onscroll:a,...h(o),[_n]:l}),[()=>({width:He(t.width),height:He(t.height)})],void 0,"svelte-1e4fism");var u=J(c);Se(u,()=>t.children??kt),U(c),Bt(c,l=>n(l),()=>n()),vo(c,"clientHeight",i),vo(c,"clientWidth",r),X(e,c),re()}var tg=se('<div class="svelte-flow__viewport-back svelte-flow__container"></div> <!> <div class="svelte-flow__edge-labels svelte-flow__container"></div> <!> <!> <!> <div class="svelte-flow__viewport-front svelte-flow__container"></div>',1),ng=se("<!> <!>",1),rg=se("<!> <!> <!> <!> <!>",1);function og(e,t){ne(t,!0);let n=W(t,"paneClickDistance",3,1),r=W(t,"nodeClickDistance",3,1),i=W(t,"panOnScrollMode",19,()=>mt.Free),s=W(t,"preventScrolling",3,!0),o=W(t,"zoomOnScroll",3,!0),a=W(t,"zoomOnDoubleClick",3,!0),c=W(t,"zoomOnPinch",3,!0),u=W(t,"panOnScroll",3,!1),l=W(t,"panOnScrollSpeed",3,.5),d=W(t,"panOnDrag",3,!0),f=W(t,"selectionOnDrag",3,!0),g=W(t,"connectionLineType",19,()=>We.Bezier),v=W(t,"nodes",31,()=>po([])),b=W(t,"edges",31,()=>po([])),w=W(t,"viewport",15,void 0),x=it(t,["$$slots","$$events","$$legacy","width","height","proOptions","selectionKey","deleteKey","panActivationKey","multiSelectionKey","zoomActivationKey","paneClickDistance","nodeClickDistance","onmovestart","onmoveend","onmove","oninit","onnodeclick","onnodecontextmenu","onnodedrag","onnodedragstart","onnodedragstop","onnodepointerenter","onnodepointermove","onnodepointerleave","onselectionclick","onselectioncontextmenu","onselectionstart","onselectionend","onedgeclick","onedgecontextmenu","onedgepointerenter","onedgepointerleave","onpaneclick","onpanecontextmenu","panOnScrollMode","preventScrolling","zoomOnScroll","zoomOnDoubleClick","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnDrag","selectionOnDrag","connectionLineComponent","connectionLineStyle","connectionLineContainerStyle","connectionLineType","attributionPosition","children","nodes","edges","viewport"]),y=hh({props:x,width:t.width,height:t.height,get nodes(){return v()},set nodes(_){v(_)},get edges(){return b()},set edges(_){b(_)},get viewport(){return w()},set viewport(_){w(_)}});const N=Dt(Xr);N&&N.setStore&&N.setStore(y),ln(Xr,{provider:!1,getStore(){return y}}),et(()=>{const _={nodes:y.selectedNodes,edges:y.selectedEdges};Qe(()=>t.onselectionchange)?.(_);for(const T of y.selectionChangeHandlers.values())T(_)}),Zr(()=>{y.reset()}),eg(e,{get colorMode(){return y.colorMode},get width(){return t.width},get height(){return t.height},get rest(){return x},get domNode(){return y.domNode},set domNode(_){y.domNode=_},get clientWidth(){return y.width},set clientWidth(_){y.width=_},get clientHeight(){return y.height},set clientHeight(_){y.height=_},children:(_,T)=>{var P=rg(),M=ue(P);jh(M,{get selectionKey(){return t.selectionKey},get deleteKey(){return t.deleteKey},get panActivationKey(){return t.panActivationKey},get multiSelectionKey(){return t.multiSelectionKey},get zoomActivationKey(){return t.zoomActivationKey},get store(){return y},set store(m){y=m}});var E=ee(M,2);ph(E,{get panOnScrollMode(){return i()},get preventScrolling(){return s()},get zoomOnScroll(){return o()},get zoomOnDoubleClick(){return a()},get zoomOnPinch(){return c()},get panOnScroll(){return u()},get panOnScrollSpeed(){return l()},get panOnDrag(){return d()},get paneClickDistance(){return n()},get onmovestart(){return t.onmovestart},get onmove(){return t.onmove},get onmoveend(){return t.onmoveend},get oninit(){return t.oninit},get store(){return y},set store(m){y=m},children:(m,S)=>{yh(m,{get onpaneclick(){return t.onpaneclick},get onpanecontextmenu(){return t.onpanecontextmenu},get onselectionstart(){return t.onselectionstart},get onselectionend(){return t.onselectionend},get panOnDrag(){return d()},get selectionOnDrag(){return f()},get store(){return y},set store(p){y=p},children:(p,I)=>{var O=ng(),H=ue(O);bh(H,{get store(){return y},set store(q){y=q},children:(q,F)=>{var G=tg(),Z=ee(ue(G),2);Hh(Z,{get onedgeclick(){return t.onedgeclick},get onedgecontextmenu(){return t.onedgecontextmenu},get onedgepointerenter(){return t.onedgepointerenter},get onedgepointerleave(){return t.onedgepointerleave},get store(){return y},set store(V){y=V}});var D=ee(Z,4);Zh(D,{get type(){return g()},get LineComponent(){return t.connectionLineComponent},get containerStyle(){return t.connectionLineContainerStyle},get style(){return t.connectionLineStyle},get store(){return y},set store(V){y=V}});var R=ee(D,2);Ph(R,{get nodeClickDistance(){return r()},get onnodeclick(){return t.onnodeclick},get onnodecontextmenu(){return t.onnodecontextmenu},get onnodepointerenter(){return t.onnodepointerenter},get onnodepointermove(){return t.onnodepointermove},get onnodepointerleave(){return t.onnodepointerleave},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return y},set store(V){y=V}});var L=ee(R,2);Kh(L,{get onselectionclick(){return t.onselectionclick},get onselectioncontextmenu(){return t.onselectioncontextmenu},get onnodedrag(){return t.onnodedrag},get onnodedragstart(){return t.onnodedragstart},get onnodedragstop(){return t.onnodedragstop},get store(){return y},set store(V){y=V}}),pt(2),X(q,G)},$$slots:{default:!0}});var B=ee(H,2);{let q=k(()=>!!(y.selectionRect&&y.selectionRectMode==="user")),F=k(()=>y.selectionRect?.width),G=k(()=>y.selectionRect?.height),Z=k(()=>y.selectionRect?.x),D=k(()=>y.selectionRect?.y);la(B,{get isVisible(){return h(q)},get width(){return h(F)},get height(){return h(G)},get x(){return h(Z)},get y(){return h(D)}})}X(p,O)},$$slots:{default:!0}})},$$slots:{default:!0}});var C=ee(E,2);Jh(C,{get proOptions(){return t.proOptions},get position(){return t.attributionPosition}});var A=ee(C,2);Eh(A,{get store(){return y}});var z=ee(A,2);Se(z,()=>t.children??kt),X(_,P)},$$slots:{default:!0}}),re()}var ig=se("<button><!></button>");function $t(e,t){let n=it(t,["$$slots","$$events","$$legacy","class","bgColor","bgColorHover","color","colorHover","borderColor","onclick","children"]);var r=ig();Ze(r,s=>({type:"button",onclick:t.onclick,class:["svelte-flow__controls-button",t.class],...n,[_n]:s}),[()=>({"--xy-controls-button-background-color-props":t.bgColor,"--xy-controls-button-background-color-hover-props":t.bgColorHover,"--xy-controls-button-color-props":t.color,"--xy-controls-button-color-hover-props":t.colorHover,"--xy-controls-button-border-color-props":t.borderColor})]);var i=J(r);Se(i,()=>t.children??kt),U(r),X(e,r)}var sg=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"></path></svg>');function ag(e){var t=sg();X(e,t)}var lg=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 5"><path d="M0 0h32v4.2H0z"></path></svg>');function cg(e){var t=lg();X(e,t)}var ug=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 30"><path d="M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"></path></svg>');function dg(e){var t=ug();X(e,t)}var fg=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"></path></svg>');function hg(e){var t=fg();X(e,t)}var gg=pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 25 32"><path d="M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"></path></svg>');function mg(e){var t=gg();X(e,t)}var pg=se("<!> <!>",1),vg=se("<!> <!> <!> <!> <!> <!>",1);function yg(e,t){ne(t,!0);let n=W(t,"position",3,"bottom-left"),r=W(t,"orientation",3,"vertical"),i=W(t,"showZoom",3,!0),s=W(t,"showFitView",3,!0),o=W(t,"showLock",3,!0),a=it(t,["$$slots","$$events","$$legacy","position","orientation","showZoom","showFitView","showLock","style","class","buttonBgColor","buttonBgColorHover","buttonColor","buttonColorHover","buttonBorderColor","fitViewOptions","children","before","after"]),c=k(at);const u={bgColor:t.buttonBgColor,bgColorHover:t.buttonBgColorHover,color:t.buttonColor,colorHover:t.buttonColorHover,borderColor:t.buttonBorderColor};let l=k(()=>h(c).nodesDraggable||h(c).nodesConnectable||h(c).elementsSelectable),d=k(()=>h(c).viewport.zoom<=h(c).minZoom),f=k(()=>h(c).viewport.zoom>=h(c).maxZoom),g=k(()=>h(c).ariaLabelConfig),v=k(()=>r()==="horizontal"?"horizontal":"vertical");const b=()=>{h(c).zoomIn()},w=()=>{h(c).zoomOut()},x=()=>{h(c).fitView(t.fitViewOptions)},y=()=>{let N=!h(l);h(c).nodesDraggable=N,h(c).nodesConnectable=N,h(c).elementsSelectable=N};{let N=k(()=>["svelte-flow__controls",h(v),t.class]);ca(e,dt({get class(){return h(N)},get position(){return n()},"data-testid":"svelte-flow__controls",get"aria-label"(){return h(g)["controls.ariaLabel"]},get style(){return t.style}},()=>a,{children:(_,T)=>{var P=vg(),M=ue(P);{var E=q=>{var F=Ne(),G=ue(F);Se(G,()=>t.before),X(q,F)};he(M,q=>{t.before&&q(E)})}var C=ee(M,2);{var A=q=>{var F=pg(),G=ue(F);$t(G,dt({onclick:b,class:"svelte-flow__controls-zoomin",get title(){return h(g)["controls.zoomIn.ariaLabel"]},get"aria-label"(){return h(g)["controls.zoomIn.ariaLabel"]},get disabled(){return h(f)}},()=>u,{children:(D,R)=>{ag(D)},$$slots:{default:!0}}));var Z=ee(G,2);$t(Z,dt({onclick:w,class:"svelte-flow__controls-zoomout",get title(){return h(g)["controls.zoomOut.ariaLabel"]},get"aria-label"(){return h(g)["controls.zoomOut.ariaLabel"]},get disabled(){return h(d)}},()=>u,{children:(D,R)=>{cg(D)},$$slots:{default:!0}})),X(q,F)};he(C,q=>{i()&&q(A)})}var z=ee(C,2);{var m=q=>{$t(q,dt({class:"svelte-flow__controls-fitview",onclick:x,get title(){return h(g)["controls.fitView.ariaLabel"]},get"aria-label"(){return h(g)["controls.fitView.ariaLabel"]}},()=>u,{children:(F,G)=>{dg(F)},$$slots:{default:!0}}))};he(z,q=>{s()&&q(m)})}var S=ee(z,2);{var p=q=>{$t(q,dt({class:"svelte-flow__controls-interactive",onclick:y,get title(){return h(g)["controls.interactive.ariaLabel"]},get"aria-label"(){return h(g)["controls.interactive.ariaLabel"]}},()=>u,{children:(F,G)=>{var Z=Ne(),D=ue(Z);{var R=V=>{mg(V)},L=V=>{hg(V)};he(D,V=>{h(l)?V(R):V(L,!1)})}X(F,Z)},$$slots:{default:!0}}))};he(S,q=>{o()&&q(p)})}var I=ee(S,2);{var O=q=>{var F=Ne(),G=ue(F);Se(G,()=>t.children),X(q,F)};he(I,q=>{t.children&&q(O)})}var H=ee(I,2);{var B=q=>{var F=Ne(),G=ue(F);Se(G,()=>t.after),X(q,F)};he(H,q=>{t.after&&q(B)})}X(_,P)},$$slots:{default:!0}}))}re()}var Xe;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Xe||(Xe={}));var wg=pe("<circle></circle>");function bg(e,t){var n=wg();de(()=>{ie(n,"cx",t.radius),ie(n,"cy",t.radius),ie(n,"r",t.radius),Ue(n,0,Ct(["svelte-flow__background-pattern","dots",t.class]))}),X(e,n)}var xg=pe("<path></path>");function _g(e,t){ne(t,!0);var n=xg();de(()=>{ie(n,"stroke-width",t.lineWidth),ie(n,"d",`M${t.dimensions[0]/2} 0 V${t.dimensions[1]} M0 ${t.dimensions[1]/2} H${t.dimensions[0]}`),Ue(n,0,Ct(["svelte-flow__background-pattern",t.variant,t.class]))}),X(e,n),re()}const Eg={[Xe.Dots]:1,[Xe.Lines]:1,[Xe.Cross]:6};var kg=pe('<svg data-testid="svelte-flow__background"><pattern patternUnits="userSpaceOnUse"><!></pattern><rect x="0" y="0" width="100%" height="100%"></rect></svg>');function Cg(e,t){ne(t,!0);let n=W(t,"variant",19,()=>Xe.Dots),r=W(t,"gap",3,20),i=W(t,"lineWidth",3,1),s=k(at),o=k(()=>n()===Xe.Dots),a=k(()=>n()===Xe.Cross),c=k(()=>Array.isArray(r())?r():[r(),r()]),u=k(()=>`background-pattern-${h(s).flowId}-${t.id??""}`),l=k(()=>[h(c)[0]*h(s).viewport.zoom||1,h(c)[1]*h(s).viewport.zoom||1]),d=k(()=>(t.size??Eg[n()])*h(s).viewport.zoom),f=k(()=>h(a)?[h(d),h(d)]:h(l)),g=k(()=>h(o)?[h(d)/2,h(d)/2]:[h(f)[0]/2,h(f)[1]/2]);var v=kg();let b;var w=J(v),x=J(w);{var y=T=>{{let P=k(()=>h(d)/2);bg(T,{get radius(){return h(P)},get class(){return t.patternClass}})}},N=T=>{_g(T,{get dimensions(){return h(f)},get variant(){return n()},get lineWidth(){return i()},get class(){return t.patternClass}})};he(x,T=>{h(o)?T(y):T(N,!1)})}U(w);var _=ee(w);U(v),de(T=>{Ue(v,0,Ct(["svelte-flow__background","svelte-flow__container",t.class])),b=Le(v,"",b,T),ie(w,"id",h(u)),ie(w,"x",h(s).viewport.x%h(l)[0]),ie(w,"y",h(s).viewport.y%h(l)[1]),ie(w,"width",h(l)[0]),ie(w,"height",h(l)[1]),ie(w,"patternTransform",`translate(-${h(g)[0]},-${h(g)[1]})`),ie(_,"fill",`url(#${h(u)})`)},[()=>({"--xy-background-color-props":t.bgColor,"--xy-background-pattern-color-props":t.patternColor})]),X(e,v),re()}var Ng=se('<div><div class="flex flex-col"><div class="flex items-center gap-3 border-b p-6 pb-4"><div class="flex flex-col gap-1"><div class="text-lg font-semibold leading-none tracking-tight"> </div> <div class="text-muted-foreground text-xs"> </div></div></div> <div class="p-6 pt-4"><div class="mb-3 flex items-center gap-2 text-sm"><span class="text-muted-foreground font-medium">Model:</span> <span class="bg-muted rounded px-2 py-1 font-mono text-xs"> </span></div> <div class="mt-3 flex gap-4"><div class="bg-muted/50 flex flex-1 flex-col items-center rounded-lg px-3 py-3"><span class="text-2xl font-bold leading-none"> </span> <span class="text-muted-foreground mt-1 text-[11px] uppercase tracking-wider">Tools</span></div> <div class="bg-muted/50 flex flex-1 flex-col items-center rounded-lg px-3 py-3"><span class="text-2xl font-bold leading-none"> </span> <span class="text-muted-foreground mt-1 text-[11px] uppercase tracking-wider">Sub-agents</span></div></div></div></div></div> <!> <!>',1);function Sg(e,t){ne(t,!0);const n=t.data.level??0,r=["border-primary/30 border-2","border-purple-500 border-2","border-pink-500 border-2","border-green-500 border-2"],i=["bg-card","bg-purple-950/30","bg-pink-950/30","bg-green-950/30"],s=r[n]||r[r.length-1],o=i[n]||i[i.length-1],a=n===0?"Root Agent":`Sub-Agent (L${n})`;var c=Ng(),u=ue(c),l=J(u),d=J(l),f=J(d),g=J(f),v=J(g,!0);U(g);var b=ee(g,2),w=J(b,!0);U(b),U(f),U(d);var x=ee(d,2),y=J(x),N=ee(J(y),2),_=J(N,!0);U(N),U(y);var T=ee(y,2),P=J(T),M=J(P),E=J(M,!0);U(M),pt(2),U(P);var C=ee(P,2),A=J(C),z=J(A,!0);U(A),pt(2),U(C),U(T),U(x),U(l),U(u);var m=ee(u,2);ot(m,{type:"source",get position(){return $.Bottom},get isConnectable(){return t.isConnectable}});var S=ee(m,2);ot(S,{type:"target",get position(){return $.Top},get isConnectable(){return t.isConnectable}}),de(()=>{Ue(u,1,`text-card-foreground ${o??""} h-full w-full rounded-lg ${s??""} shadow-sm`),ve(v,t.data.label),ve(w,a),ve(_,t.data.model),ve(E,t.data.toolCount),ve(z,t.data.subAgentCount)}),X(e,c),re()}var Pg=se('<div class="text-muted-foreground mb-3 border-b pb-3 text-xs leading-relaxed"> </div>'),Og=se('<span class="bg-muted rounded px-2 py-0.5 font-mono text-xs"> </span>'),Mg=se('<div class="flex flex-col gap-1 text-sm"><span class="text-muted-foreground font-medium">Required:</span> <div class="flex flex-wrap gap-1"></div></div>'),Ig=se('<div class="flex items-center justify-between text-sm"><span class="text-muted-foreground font-medium">Required:</span> <span class="bg-muted rounded px-2 py-0.5 font-mono text-xs">None</span></div>'),Dg=se('<div class="bg-card text-card-foreground h-full w-[280px] rounded-lg border border-orange-500/50 shadow-sm"><div class="flex flex-col"><div class="flex items-center gap-3 border-b p-4 pb-3"><div class="text-xl">🔧</div> <div class="flex-1"><div class="text-base font-semibold leading-none tracking-tight"> </div></div></div> <div class="p-4 pt-3"><!> <div class="flex flex-col gap-2"><div class="flex items-center justify-between text-sm"><span class="text-muted-foreground font-medium">Parameters:</span> <span class="bg-primary text-primary-foreground rounded-full px-2.5 py-0.5 text-xs font-bold"> </span></div> <!></div></div></div></div> <!>',1);function Tg(e,t){ne(t,!0);const n=t.data.requiredParams||[];n.length>0&&n.join(", ");const r=t.data.description||"",i=r.trim().length>0;var s=Dg(),o=ue(s),a=J(o),c=J(a),u=ee(J(c),2),l=J(u),d=J(l,!0);U(l),U(u),U(c);var f=ee(c,2),g=J(f);{var v=M=>{var E=Pg(),C=J(E,!0);U(E),de(()=>ve(C,r)),X(M,E)};he(g,M=>{i&&M(v)})}var b=ee(g,2),w=J(b),x=ee(J(w),2),y=J(x,!0);U(x),U(w);var N=ee(w,2);{var _=M=>{var E=Mg(),C=ee(J(E),2);En(C,21,()=>n,xa,(A,z)=>{var m=Og(),S=J(m,!0);U(m),de(()=>ve(S,h(z))),X(A,m)}),U(C),U(E),X(M,E)},T=M=>{var E=Ig();X(M,E)};he(N,M=>{n.length>0?M(_):M(T,!1)})}U(b),U(f),U(a),U(o);var P=ee(o,2);ot(P,{type:"target",get position(){return $.Top},get isConnectable(){return t.isConnectable}}),de(()=>{ve(d,t.data.label),ve(y,t.data.paramCount)}),X(e,s),re()}var Ag=se("<!> <!>",1);function Fg(e,t){ne(t,!0);let n=fe([]),r=fe([]),i="dark",s=fe(null),o=0,a=0;const c=320,u=200,l=280,d=180;function f(x){return x?.required||[]}function g(x){return Object.keys(x?.properties||{}).length}const v={agent:Sg,tool:Tg};function b(x,y,N=0,_=null){const T=[],P=[],M={id:y,position:{x:0,y:0},data:{label:x.name,model:x.model,toolCount:x.tools.length,subAgentCount:x.sub_agents.length,level:N},type:"agent"};return T.push(M),_&&P.push({id:`e-${_}-${y}`,source:_,target:y,animated:!0,type:"smoothstep",style:"stroke-width: 2px; stroke: #8b5cf6",markerEnd:{type:bt.ArrowClosed,width:20,height:20,color:"#8b5cf6"}}),x.tools.forEach(E=>{const C=`tool-${y}-${o++}`,A=g(E.function.parameters),z=f(E.function.parameters),m={id:C,position:{x:0,y:0},data:{label:E.function.name,description:E.function.description,paramCount:A,requiredParams:z,parameters:E.function.parameters},type:"tool"};T.push(m),P.push({id:`e-${y}-${C}`,source:y,target:C,animated:!0,type:"smoothstep",style:"stroke-width: 1.5px; stroke: #6b7280",markerEnd:{type:bt.ArrowClosed,width:20,height:20,color:"#FF4000"}})}),x.sub_agents.forEach(E=>{const C=`agent-${a++}`,A=b(E,C,N+1,y);T.push(...A.nodes),P.push(...A.edges)}),{nodes:T,edges:P}}function w(x,y,N="TB"){const _=new di.graphlib.Graph;return _.setDefaultEdgeLabel(()=>({})),_.setGraph({rankdir:N,nodesep:100,ranksep:200}),x.forEach(P=>{const M=P.type==="agent"?c:l,E=P.type==="agent"?u:d;_.setNode(P.id,{width:M,height:E})}),y.forEach(P=>{_.setEdge(P.source,P.target)}),di.layout(_),{nodes:x.map(P=>{const M=_.node(P.id),E=P.type==="agent"?c:l,C=P.type==="agent"?u:d;return P.targetPosition=$.Top,P.sourcePosition=$.Bottom,{...P,position:{x:M.x-E/2,y:M.y-C/2}}}),edges:y}}wa(async()=>{try{const x=await fetch("/api/agent/info");if(!x.ok)throw new Error("Failed to fetch agent info");const y=await x.json();o=0,a=0;const{nodes:N,edges:_}=b(y,"root-agent",0,null),{nodes:T,edges:P}=w(N,_);Y(n,T),Y(r,P)}catch(x){Y(s,x instanceof Error?x.message:"An error occurred",!0)}}),og(e,{get nodeTypes(){return v},colorMode:i,fitView:!0,get nodes(){return h(n)},set nodes(x){Y(n,x)},get edges(){return h(r)},set edges(x){Y(r,x)},children:(x,y)=>{var N=Ag(),_=ue(N);Cg(_,{});var T=ee(_,2);yg(T,{}),X(x,N)},$$slots:{default:!0}}),re()}export{Fg as component};
