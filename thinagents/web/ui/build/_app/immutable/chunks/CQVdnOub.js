import{i as y}from"./BcRQlmJM.js";import{i as b}from"./C5RtA5t1.js";import{i as A}from"./Gi6I4Gst.js";import{e as M,f as R,a as q,b as F}from"./C4B-KCzX.js";function S(n,r){return n=+n,r=+r,function(i){return Math.round(n*(1-i)+r*i)}}function g(n,r){return n==null||r==null?NaN:n<r?-1:n>r?1:n>=r?0:NaN}function z(n,r){return n==null||r==null?NaN:r<n?-1:r>n?1:r>=n?0:NaN}function w(n){let r,i,t;n.length!==2?(r=g,i=(u,o)=>g(n(u),o),t=(u,o)=>n(u)-o):(r=n===g||n===z?n:I,i=n,t=n);function f(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<0?e=l+1:m=l}while(e<m)}return e}function c(u,o,e=0,m=u.length){if(e<m){if(r(o,o)!==0)return m;do{const l=e+m>>>1;i(u[l],o)<=0?e=l+1:m=l}while(e<m)}return e}function a(u,o,e=0,m=u.length){const l=f(u,o,e,m-1);return l>e&&t(u[l-1],o)>-t(u[l],o)?l-1:l}return{left:f,center:a,right:c}}function I(){return 0}function P(n){return n===null?NaN:+n}const $=w(g),j=$.right;w(P).center;const x=Math.sqrt(50),B=Math.sqrt(10),C=Math.sqrt(2);function v(n,r,i){const t=(r-n)/Math.max(0,i),f=Math.floor(Math.log10(t)),c=t/Math.pow(10,f),a=c>=x?10:c>=B?5:c>=C?2:1;let u,o,e;return f<0?(e=Math.pow(10,-f)/a,u=Math.round(n*e),o=Math.round(r*e),u/e<n&&++u,o/e>r&&--o,e=-e):(e=Math.pow(10,f)*a,u=Math.round(n/e),o=Math.round(r/e),u*e<n&&++u,o*e>r&&--o),o<u&&.5<=i&&i<2?v(n,r,i*2):[u,o,e]}function D(n,r,i){if(r=+r,n=+n,i=+i,!(i>0))return[];if(n===r)return[n];const t=r<n,[f,c,a]=t?v(r,n,i):v(n,r,i);if(!(c>=f))return[];const u=c-f+1,o=new Array(u);if(t)if(a<0)for(let e=0;e<u;++e)o[e]=(c-e)/-a;else for(let e=0;e<u;++e)o[e]=(c-e)*a;else if(a<0)for(let e=0;e<u;++e)o[e]=(f+e)/-a;else for(let e=0;e<u;++e)o[e]=(f+e)*a;return o}function p(n,r,i){return r=+r,n=+n,i=+i,v(n,r,i)[2]}function E(n,r,i){r=+r,n=+n,i=+i;const t=r<n,f=t?p(r,n,i):p(n,r,i);return(t?-1:1)*(f<0?1/-f:f)}function G(n){return Math.max(0,-M(Math.abs(n)))}function H(n,r){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(M(r)/3)))*3-M(Math.abs(n)))}function J(n,r){return n=Math.abs(n),r=Math.abs(r)-n,Math.max(0,M(r)-M(n))+1}function K(n){return function(){return n}}function L(n){return+n}var N=[0,1];function s(n){return n}function d(n,r){return(r-=n=+n)?function(i){return(i-n)/r}:K(isNaN(r)?NaN:.5)}function O(n,r){var i;return n>r&&(i=n,n=r,r=i),function(t){return Math.max(n,Math.min(r,t))}}function Q(n,r,i){var t=n[0],f=n[1],c=r[0],a=r[1];return f<t?(t=d(f,t),c=i(a,c)):(t=d(t,f),c=i(c,a)),function(u){return c(t(u))}}function T(n,r,i){var t=Math.min(n.length,r.length)-1,f=new Array(t),c=new Array(t),a=-1;for(n[t]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++a<t;)f[a]=d(n[a],n[a+1]),c[a]=i(r[a],r[a+1]);return function(u){var o=j(n,u,1,t)-1;return c[o](f[o](u))}}function U(n,r){return r.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function V(){var n=N,r=N,i=b,t,f,c,a=s,u,o,e;function m(){var h=Math.min(n.length,r.length);return a!==s&&(a=O(n[0],n[h-1])),u=h>2?T:Q,o=e=null,l}function l(h){return h==null||isNaN(h=+h)?c:(o||(o=u(n.map(t),r,i)))(t(a(h)))}return l.invert=function(h){return a(f((e||(e=u(r,n.map(t),y)))(h)))},l.domain=function(h){return arguments.length?(n=Array.from(h,L),m()):n.slice()},l.range=function(h){return arguments.length?(r=Array.from(h),m()):r.slice()},l.rangeRound=function(h){return r=Array.from(h),i=S,m()},l.clamp=function(h){return arguments.length?(a=h?!0:s,m()):a!==s},l.interpolate=function(h){return arguments.length?(i=h,m()):i},l.unknown=function(h){return arguments.length?(c=h,l):c},function(h,k){return t=h,f=k,m()}}function W(){return V()(s,s)}function X(n,r,i,t){var f=E(n,r,i),c;switch(t=R(t??",f"),t.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));return t.precision==null&&!isNaN(c=H(f,a))&&(t.precision=c),q(t,a)}case"":case"e":case"g":case"p":case"r":{t.precision==null&&!isNaN(c=J(f,Math.max(Math.abs(n),Math.abs(r))))&&(t.precision=c-(t.type==="e"));break}case"f":case"%":{t.precision==null&&!isNaN(c=G(f))&&(t.precision=c-(t.type==="%")*2);break}}return F(t)}function Y(n){var r=n.domain;return n.ticks=function(i){var t=r();return D(t[0],t[t.length-1],i??10)},n.tickFormat=function(i,t){var f=r();return X(f[0],f[f.length-1],i??10,t)},n.nice=function(i){i==null&&(i=10);var t=r(),f=0,c=t.length-1,a=t[f],u=t[c],o,e,m=10;for(u<a&&(e=a,a=u,u=e,e=f,f=c,c=e);m-- >0;){if(e=p(a,u,i),e===o)return t[f]=a,t[c]=u,r(t);if(e>0)a=Math.floor(a/e)*e,u=Math.ceil(u/e)*e;else if(e<0)a=Math.ceil(a*e)/e,u=Math.floor(u*e)/e;else break;o=e}return n},n}function Z(){var n=W();return n.copy=function(){return U(n,Z())},A.apply(n,arguments),Y(n)}export{U as a,w as b,W as c,Z as l,E as t};
